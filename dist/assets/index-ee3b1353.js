function uD(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function uc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var oS={exports:{}},uf={},aS={exports:{}},fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cc=Symbol.for("react.element"),cD=Symbol.for("react.portal"),dD=Symbol.for("react.fragment"),hD=Symbol.for("react.strict_mode"),fD=Symbol.for("react.profiler"),pD=Symbol.for("react.provider"),mD=Symbol.for("react.context"),gD=Symbol.for("react.forward_ref"),vD=Symbol.for("react.suspense"),yD=Symbol.for("react.memo"),wD=Symbol.for("react.lazy"),uE=Symbol.iterator;function ED(t){return t===null||typeof t!="object"?null:(t=uE&&t[uE]||t["@@iterator"],typeof t=="function"?t:null)}var lS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},uS=Object.assign,cS={};function Ba(t,e,n){this.props=t,this.context=e,this.refs=cS,this.updater=n||lS}Ba.prototype.isReactComponent={};Ba.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ba.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function dS(){}dS.prototype=Ba.prototype;function zv(t,e,n){this.props=t,this.context=e,this.refs=cS,this.updater=n||lS}var qv=zv.prototype=new dS;qv.constructor=zv;uS(qv,Ba.prototype);qv.isPureReactComponent=!0;var cE=Array.isArray,hS=Object.prototype.hasOwnProperty,Wv={current:null},fS={key:!0,ref:!0,__self:!0,__source:!0};function pS(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)hS.call(e,r)&&!fS.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:cc,type:t,key:s,ref:o,props:i,_owner:Wv.current}}function ID(t,e){return{$$typeof:cc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Hv(t){return typeof t=="object"&&t!==null&&t.$$typeof===cc}function _D(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var dE=/\/+/g;function Np(t,e){return typeof t=="object"&&t!==null&&t.key!=null?_D(""+t.key):e.toString(36)}function bd(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case cc:case cD:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Np(o,0):r,cE(i)?(n="",t!=null&&(n=t.replace(dE,"$&/")+"/"),bd(i,e,n,"",function(u){return u})):i!=null&&(Hv(i)&&(i=ID(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(dE,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",cE(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Np(s,a);o+=bd(s,e,n,l,i)}else if(l=ED(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Np(s,a++),o+=bd(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Qc(t,e,n){if(t==null)return t;var r=[],i=0;return bd(t,r,"","",function(s){return e.call(n,s,i++)}),r}function SD(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var en={current:null},Nd={transition:null},TD={ReactCurrentDispatcher:en,ReactCurrentBatchConfig:Nd,ReactCurrentOwner:Wv};fe.Children={map:Qc,forEach:function(t,e,n){Qc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Qc(t,function(){e++}),e},toArray:function(t){return Qc(t,function(e){return e})||[]},only:function(t){if(!Hv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};fe.Component=Ba;fe.Fragment=dD;fe.Profiler=fD;fe.PureComponent=zv;fe.StrictMode=hD;fe.Suspense=vD;fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TD;fe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=uS({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Wv.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)hS.call(e,l)&&!fS.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:cc,type:t.type,key:i,ref:s,props:r,_owner:o}};fe.createContext=function(t){return t={$$typeof:mD,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:pD,_context:t},t.Consumer=t};fe.createElement=pS;fe.createFactory=function(t){var e=pS.bind(null,t);return e.type=t,e};fe.createRef=function(){return{current:null}};fe.forwardRef=function(t){return{$$typeof:gD,render:t}};fe.isValidElement=Hv;fe.lazy=function(t){return{$$typeof:wD,_payload:{_status:-1,_result:t},_init:SD}};fe.memo=function(t,e){return{$$typeof:yD,type:t,compare:e===void 0?null:e}};fe.startTransition=function(t){var e=Nd.transition;Nd.transition={};try{t()}finally{Nd.transition=e}};fe.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};fe.useCallback=function(t,e){return en.current.useCallback(t,e)};fe.useContext=function(t){return en.current.useContext(t)};fe.useDebugValue=function(){};fe.useDeferredValue=function(t){return en.current.useDeferredValue(t)};fe.useEffect=function(t,e){return en.current.useEffect(t,e)};fe.useId=function(){return en.current.useId()};fe.useImperativeHandle=function(t,e,n){return en.current.useImperativeHandle(t,e,n)};fe.useInsertionEffect=function(t,e){return en.current.useInsertionEffect(t,e)};fe.useLayoutEffect=function(t,e){return en.current.useLayoutEffect(t,e)};fe.useMemo=function(t,e){return en.current.useMemo(t,e)};fe.useReducer=function(t,e,n){return en.current.useReducer(t,e,n)};fe.useRef=function(t){return en.current.useRef(t)};fe.useState=function(t){return en.current.useState(t)};fe.useSyncExternalStore=function(t,e,n){return en.current.useSyncExternalStore(t,e,n)};fe.useTransition=function(){return en.current.useTransition()};fe.version="18.2.0";aS.exports=fe;var v=aS.exports;const Oe=uc(v),hE=uD({__proto__:null,default:Oe},[v]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CD=v,xD=Symbol.for("react.element"),kD=Symbol.for("react.fragment"),bD=Object.prototype.hasOwnProperty,ND=CD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,AD={key:!0,ref:!0,__self:!0,__source:!0};function mS(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)bD.call(e,r)&&!AD.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:xD,type:t,key:s,ref:o,props:i,_owner:ND.current}}uf.Fragment=kD;uf.jsx=mS;uf.jsxs=mS;oS.exports=uf;var E=oS.exports,Vm={},gS={exports:{}},Cn={},vS={exports:{}},yS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(P,Y){var G=P.length;P.push(Y);e:for(;0<G;){var ce=G-1>>>1,Ee=P[ce];if(0<i(Ee,Y))P[ce]=Y,P[G]=Ee,G=ce;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var Y=P[0],G=P.pop();if(G!==Y){P[0]=G;e:for(var ce=0,Ee=P.length,mt=Ee>>>1;ce<mt;){var Be=2*(ce+1)-1,Ie=P[Be],ze=Be+1,Wt=P[ze];if(0>i(Ie,G))ze<Ee&&0>i(Wt,Ie)?(P[ce]=Wt,P[ze]=G,ce=ze):(P[ce]=Ie,P[Be]=G,ce=Be);else if(ze<Ee&&0>i(Wt,G))P[ce]=Wt,P[ze]=G,ce=ze;else break e}}return Y}function i(P,Y){var G=P.sortIndex-Y.sortIndex;return G!==0?G:P.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,h=3,f=!1,m=!1,w=!1,I=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(P){for(var Y=n(u);Y!==null;){if(Y.callback===null)r(u);else if(Y.startTime<=P)r(u),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=n(u)}}function _(P){if(w=!1,g(P),!m)if(n(l)!==null)m=!0,oe(T);else{var Y=n(u);Y!==null&&de(_,Y.startTime-P)}}function T(P,Y){m=!1,w&&(w=!1,y(A),A=-1),f=!0;var G=h;try{for(g(Y),d=n(l);d!==null&&(!(d.expirationTime>Y)||P&&!Q());){var ce=d.callback;if(typeof ce=="function"){d.callback=null,h=d.priorityLevel;var Ee=ce(d.expirationTime<=Y);Y=t.unstable_now(),typeof Ee=="function"?d.callback=Ee:d===n(l)&&r(l),g(Y)}else r(l);d=n(l)}if(d!==null)var mt=!0;else{var Be=n(u);Be!==null&&de(_,Be.startTime-Y),mt=!1}return mt}finally{d=null,h=G,f=!1}}var C=!1,b=null,A=-1,W=5,j=-1;function Q(){return!(t.unstable_now()-j<W)}function q(){if(b!==null){var P=t.unstable_now();j=P;var Y=!0;try{Y=b(!0,P)}finally{Y?U():(C=!1,b=null)}}else C=!1}var U;if(typeof p=="function")U=function(){p(q)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,ue=re.port2;re.port1.onmessage=q,U=function(){ue.postMessage(null)}}else U=function(){I(q,0)};function oe(P){b=P,C||(C=!0,U())}function de(P,Y){A=I(function(){P(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,oe(T))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(P){switch(h){case 1:case 2:case 3:var Y=3;break;default:Y=h}var G=h;h=Y;try{return P()}finally{h=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,Y){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var G=h;h=P;try{return Y()}finally{h=G}},t.unstable_scheduleCallback=function(P,Y,G){var ce=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?ce+G:ce):G=ce,P){case 1:var Ee=-1;break;case 2:Ee=250;break;case 5:Ee=1073741823;break;case 4:Ee=1e4;break;default:Ee=5e3}return Ee=G+Ee,P={id:c++,callback:Y,priorityLevel:P,startTime:G,expirationTime:Ee,sortIndex:-1},G>ce?(P.sortIndex=G,e(u,P),n(l)===null&&P===n(u)&&(w?(y(A),A=-1):w=!0,de(_,G-ce))):(P.sortIndex=Ee,e(l,P),m||f||(m=!0,oe(T))),P},t.unstable_shouldYield=Q,t.unstable_wrapCallback=function(P){var Y=h;return function(){var G=h;h=Y;try{return P.apply(this,arguments)}finally{h=G}}}})(yS);vS.exports=yS;var RD=vS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wS=v,In=RD;function L(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ES=new Set,hu={};function ho(t,e){ga(t,e),ga(t+"Capture",e)}function ga(t,e){for(hu[t]=e,t=0;t<e.length;t++)ES.add(e[t])}var zr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jm=Object.prototype.hasOwnProperty,DD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,fE={},pE={};function OD(t){return jm.call(pE,t)?!0:jm.call(fE,t)?!1:DD.test(t)?pE[t]=!0:(fE[t]=!0,!1)}function PD(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function LD(t,e,n,r){if(e===null||typeof e>"u"||PD(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function tn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ot[t]=new tn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ot[e]=new tn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ot[t]=new tn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ot[t]=new tn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ot[t]=new tn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ot[t]=new tn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ot[t]=new tn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ot[t]=new tn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ot[t]=new tn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Kv=/[\-:]([a-z])/g;function Gv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Kv,Gv);Ot[e]=new tn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Kv,Gv);Ot[e]=new tn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Kv,Gv);Ot[e]=new tn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ot[t]=new tn(t,1,!1,t.toLowerCase(),null,!1,!1)});Ot.xlinkHref=new tn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ot[t]=new tn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Qv(t,e,n,r){var i=Ot.hasOwnProperty(e)?Ot[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(LD(e,n,i,r)&&(n=null),r||i===null?OD(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Jr=wS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Yc=Symbol.for("react.element"),Fo=Symbol.for("react.portal"),Uo=Symbol.for("react.fragment"),Yv=Symbol.for("react.strict_mode"),Bm=Symbol.for("react.profiler"),IS=Symbol.for("react.provider"),_S=Symbol.for("react.context"),Xv=Symbol.for("react.forward_ref"),zm=Symbol.for("react.suspense"),qm=Symbol.for("react.suspense_list"),Jv=Symbol.for("react.memo"),hi=Symbol.for("react.lazy"),SS=Symbol.for("react.offscreen"),mE=Symbol.iterator;function cl(t){return t===null||typeof t!="object"?null:(t=mE&&t[mE]||t["@@iterator"],typeof t=="function"?t:null)}var He=Object.assign,Ap;function Dl(t){if(Ap===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ap=e&&e[1]||""}return`
`+Ap+t}var Rp=!1;function Dp(t,e){if(!t||Rp)return"";Rp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Rp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Dl(t):""}function $D(t){switch(t.tag){case 5:return Dl(t.type);case 16:return Dl("Lazy");case 13:return Dl("Suspense");case 19:return Dl("SuspenseList");case 0:case 2:case 15:return t=Dp(t.type,!1),t;case 11:return t=Dp(t.type.render,!1),t;case 1:return t=Dp(t.type,!0),t;default:return""}}function Wm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Uo:return"Fragment";case Fo:return"Portal";case Bm:return"Profiler";case Yv:return"StrictMode";case zm:return"Suspense";case qm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case _S:return(t.displayName||"Context")+".Consumer";case IS:return(t._context.displayName||"Context")+".Provider";case Xv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Jv:return e=t.displayName||null,e!==null?e:Wm(t.type)||"Memo";case hi:e=t._payload,t=t._init;try{return Wm(t(e))}catch{}}return null}function MD(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Wm(e);case 8:return e===Yv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Fi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function TS(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function FD(t){var e=TS(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Xc(t){t._valueTracker||(t._valueTracker=FD(t))}function CS(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=TS(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function eh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Hm(t,e){var n=e.checked;return He({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function gE(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Fi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function xS(t,e){e=e.checked,e!=null&&Qv(t,"checked",e,!1)}function Km(t,e){xS(t,e);var n=Fi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Gm(t,e.type,n):e.hasOwnProperty("defaultValue")&&Gm(t,e.type,Fi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function vE(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Gm(t,e,n){(e!=="number"||eh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ol=Array.isArray;function ta(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Fi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Qm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(L(91));return He({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function yE(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(L(92));if(Ol(n)){if(1<n.length)throw Error(L(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Fi(n)}}function kS(t,e){var n=Fi(e.value),r=Fi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function wE(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function bS(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ym(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?bS(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Jc,NS=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Jc=Jc||document.createElement("div"),Jc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Jc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function fu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ql={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},UD=["Webkit","ms","Moz","O"];Object.keys(ql).forEach(function(t){UD.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ql[e]=ql[t]})});function AS(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ql.hasOwnProperty(t)&&ql[t]?(""+e).trim():e+"px"}function RS(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=AS(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var VD=He({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Xm(t,e){if(e){if(VD[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(L(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(L(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(L(61))}if(e.style!=null&&typeof e.style!="object")throw Error(L(62))}}function Jm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zm=null;function Zv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var eg=null,na=null,ra=null;function EE(t){if(t=fc(t)){if(typeof eg!="function")throw Error(L(280));var e=t.stateNode;e&&(e=pf(e),eg(t.stateNode,t.type,e))}}function DS(t){na?ra?ra.push(t):ra=[t]:na=t}function OS(){if(na){var t=na,e=ra;if(ra=na=null,EE(t),e)for(t=0;t<e.length;t++)EE(e[t])}}function PS(t,e){return t(e)}function LS(){}var Op=!1;function $S(t,e,n){if(Op)return t(e,n);Op=!0;try{return PS(t,e,n)}finally{Op=!1,(na!==null||ra!==null)&&(LS(),OS())}}function pu(t,e){var n=t.stateNode;if(n===null)return null;var r=pf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(L(231,e,typeof n));return n}var tg=!1;if(zr)try{var dl={};Object.defineProperty(dl,"passive",{get:function(){tg=!0}}),window.addEventListener("test",dl,dl),window.removeEventListener("test",dl,dl)}catch{tg=!1}function jD(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Wl=!1,th=null,nh=!1,ng=null,BD={onError:function(t){Wl=!0,th=t}};function zD(t,e,n,r,i,s,o,a,l){Wl=!1,th=null,jD.apply(BD,arguments)}function qD(t,e,n,r,i,s,o,a,l){if(zD.apply(this,arguments),Wl){if(Wl){var u=th;Wl=!1,th=null}else throw Error(L(198));nh||(nh=!0,ng=u)}}function fo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function MS(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function IE(t){if(fo(t)!==t)throw Error(L(188))}function WD(t){var e=t.alternate;if(!e){if(e=fo(t),e===null)throw Error(L(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return IE(i),t;if(s===r)return IE(i),e;s=s.sibling}throw Error(L(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(L(189))}}if(n.alternate!==r)throw Error(L(190))}if(n.tag!==3)throw Error(L(188));return n.stateNode.current===n?t:e}function FS(t){return t=WD(t),t!==null?US(t):null}function US(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=US(t);if(e!==null)return e;t=t.sibling}return null}var VS=In.unstable_scheduleCallback,_E=In.unstable_cancelCallback,HD=In.unstable_shouldYield,KD=In.unstable_requestPaint,Je=In.unstable_now,GD=In.unstable_getCurrentPriorityLevel,ey=In.unstable_ImmediatePriority,jS=In.unstable_UserBlockingPriority,rh=In.unstable_NormalPriority,QD=In.unstable_LowPriority,BS=In.unstable_IdlePriority,cf=null,pr=null;function YD(t){if(pr&&typeof pr.onCommitFiberRoot=="function")try{pr.onCommitFiberRoot(cf,t,void 0,(t.current.flags&128)===128)}catch{}}var Kn=Math.clz32?Math.clz32:ZD,XD=Math.log,JD=Math.LN2;function ZD(t){return t>>>=0,t===0?32:31-(XD(t)/JD|0)|0}var Zc=64,ed=4194304;function Pl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ih(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Pl(a):(s&=o,s!==0&&(r=Pl(s)))}else o=n&~i,o!==0?r=Pl(o):s!==0&&(r=Pl(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Kn(e),i=1<<n,r|=t[n],e&=~i;return r}function eO(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tO(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Kn(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=eO(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function rg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function zS(){var t=Zc;return Zc<<=1,!(Zc&4194240)&&(Zc=64),t}function Pp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function dc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Kn(e),t[e]=n}function nO(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Kn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function ty(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Kn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Se=0;function qS(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var WS,ny,HS,KS,GS,ig=!1,td=[],bi=null,Ni=null,Ai=null,mu=new Map,gu=new Map,gi=[],rO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function SE(t,e){switch(t){case"focusin":case"focusout":bi=null;break;case"dragenter":case"dragleave":Ni=null;break;case"mouseover":case"mouseout":Ai=null;break;case"pointerover":case"pointerout":mu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":gu.delete(e.pointerId)}}function hl(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=fc(e),e!==null&&ny(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function iO(t,e,n,r,i){switch(e){case"focusin":return bi=hl(bi,t,e,n,r,i),!0;case"dragenter":return Ni=hl(Ni,t,e,n,r,i),!0;case"mouseover":return Ai=hl(Ai,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return mu.set(s,hl(mu.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,gu.set(s,hl(gu.get(s)||null,t,e,n,r,i)),!0}return!1}function QS(t){var e=ks(t.target);if(e!==null){var n=fo(e);if(n!==null){if(e=n.tag,e===13){if(e=MS(n),e!==null){t.blockedOn=e,GS(t.priority,function(){HS(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ad(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=sg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Zm=r,n.target.dispatchEvent(r),Zm=null}else return e=fc(n),e!==null&&ny(e),t.blockedOn=n,!1;e.shift()}return!0}function TE(t,e,n){Ad(t)&&n.delete(e)}function sO(){ig=!1,bi!==null&&Ad(bi)&&(bi=null),Ni!==null&&Ad(Ni)&&(Ni=null),Ai!==null&&Ad(Ai)&&(Ai=null),mu.forEach(TE),gu.forEach(TE)}function fl(t,e){t.blockedOn===e&&(t.blockedOn=null,ig||(ig=!0,In.unstable_scheduleCallback(In.unstable_NormalPriority,sO)))}function vu(t){function e(i){return fl(i,t)}if(0<td.length){fl(td[0],t);for(var n=1;n<td.length;n++){var r=td[n];r.blockedOn===t&&(r.blockedOn=null)}}for(bi!==null&&fl(bi,t),Ni!==null&&fl(Ni,t),Ai!==null&&fl(Ai,t),mu.forEach(e),gu.forEach(e),n=0;n<gi.length;n++)r=gi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<gi.length&&(n=gi[0],n.blockedOn===null);)QS(n),n.blockedOn===null&&gi.shift()}var ia=Jr.ReactCurrentBatchConfig,sh=!0;function oO(t,e,n,r){var i=Se,s=ia.transition;ia.transition=null;try{Se=1,ry(t,e,n,r)}finally{Se=i,ia.transition=s}}function aO(t,e,n,r){var i=Se,s=ia.transition;ia.transition=null;try{Se=4,ry(t,e,n,r)}finally{Se=i,ia.transition=s}}function ry(t,e,n,r){if(sh){var i=sg(t,e,n,r);if(i===null)qp(t,e,r,oh,n),SE(t,r);else if(iO(i,t,e,n,r))r.stopPropagation();else if(SE(t,r),e&4&&-1<rO.indexOf(t)){for(;i!==null;){var s=fc(i);if(s!==null&&WS(s),s=sg(t,e,n,r),s===null&&qp(t,e,r,oh,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else qp(t,e,r,null,n)}}var oh=null;function sg(t,e,n,r){if(oh=null,t=Zv(r),t=ks(t),t!==null)if(e=fo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=MS(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return oh=t,null}function YS(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(GD()){case ey:return 1;case jS:return 4;case rh:case QD:return 16;case BS:return 536870912;default:return 16}default:return 16}}var Ei=null,iy=null,Rd=null;function XS(){if(Rd)return Rd;var t,e=iy,n=e.length,r,i="value"in Ei?Ei.value:Ei.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Rd=i.slice(t,1<r?1-r:void 0)}function Dd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function nd(){return!0}function CE(){return!1}function xn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?nd:CE,this.isPropagationStopped=CE,this}return He(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=nd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=nd)},persist:function(){},isPersistent:nd}),e}var za={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sy=xn(za),hc=He({},za,{view:0,detail:0}),lO=xn(hc),Lp,$p,pl,df=He({},hc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:oy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==pl&&(pl&&t.type==="mousemove"?(Lp=t.screenX-pl.screenX,$p=t.screenY-pl.screenY):$p=Lp=0,pl=t),Lp)},movementY:function(t){return"movementY"in t?t.movementY:$p}}),xE=xn(df),uO=He({},df,{dataTransfer:0}),cO=xn(uO),dO=He({},hc,{relatedTarget:0}),Mp=xn(dO),hO=He({},za,{animationName:0,elapsedTime:0,pseudoElement:0}),fO=xn(hO),pO=He({},za,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),mO=xn(pO),gO=He({},za,{data:0}),kE=xn(gO),vO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function EO(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=wO[t])?!!e[t]:!1}function oy(){return EO}var IO=He({},hc,{key:function(t){if(t.key){var e=vO[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Dd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?yO[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:oy,charCode:function(t){return t.type==="keypress"?Dd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Dd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),_O=xn(IO),SO=He({},df,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bE=xn(SO),TO=He({},hc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:oy}),CO=xn(TO),xO=He({},za,{propertyName:0,elapsedTime:0,pseudoElement:0}),kO=xn(xO),bO=He({},df,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),NO=xn(bO),AO=[9,13,27,32],ay=zr&&"CompositionEvent"in window,Hl=null;zr&&"documentMode"in document&&(Hl=document.documentMode);var RO=zr&&"TextEvent"in window&&!Hl,JS=zr&&(!ay||Hl&&8<Hl&&11>=Hl),NE=String.fromCharCode(32),AE=!1;function ZS(t,e){switch(t){case"keyup":return AO.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function eT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Vo=!1;function DO(t,e){switch(t){case"compositionend":return eT(e);case"keypress":return e.which!==32?null:(AE=!0,NE);case"textInput":return t=e.data,t===NE&&AE?null:t;default:return null}}function OO(t,e){if(Vo)return t==="compositionend"||!ay&&ZS(t,e)?(t=XS(),Rd=iy=Ei=null,Vo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return JS&&e.locale!=="ko"?null:e.data;default:return null}}var PO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function RE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!PO[t.type]:e==="textarea"}function tT(t,e,n,r){DS(r),e=ah(e,"onChange"),0<e.length&&(n=new sy("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Kl=null,yu=null;function LO(t){hT(t,0)}function hf(t){var e=zo(t);if(CS(e))return t}function $O(t,e){if(t==="change")return e}var nT=!1;if(zr){var Fp;if(zr){var Up="oninput"in document;if(!Up){var DE=document.createElement("div");DE.setAttribute("oninput","return;"),Up=typeof DE.oninput=="function"}Fp=Up}else Fp=!1;nT=Fp&&(!document.documentMode||9<document.documentMode)}function OE(){Kl&&(Kl.detachEvent("onpropertychange",rT),yu=Kl=null)}function rT(t){if(t.propertyName==="value"&&hf(yu)){var e=[];tT(e,yu,t,Zv(t)),$S(LO,e)}}function MO(t,e,n){t==="focusin"?(OE(),Kl=e,yu=n,Kl.attachEvent("onpropertychange",rT)):t==="focusout"&&OE()}function FO(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return hf(yu)}function UO(t,e){if(t==="click")return hf(e)}function VO(t,e){if(t==="input"||t==="change")return hf(e)}function jO(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Qn=typeof Object.is=="function"?Object.is:jO;function wu(t,e){if(Qn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!jm.call(e,i)||!Qn(t[i],e[i]))return!1}return!0}function PE(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function LE(t,e){var n=PE(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=PE(n)}}function iT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?iT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function sT(){for(var t=window,e=eh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=eh(t.document)}return e}function ly(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function BO(t){var e=sT(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&iT(n.ownerDocument.documentElement,n)){if(r!==null&&ly(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=LE(n,s);var o=LE(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var zO=zr&&"documentMode"in document&&11>=document.documentMode,jo=null,og=null,Gl=null,ag=!1;function $E(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ag||jo==null||jo!==eh(r)||(r=jo,"selectionStart"in r&&ly(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Gl&&wu(Gl,r)||(Gl=r,r=ah(og,"onSelect"),0<r.length&&(e=new sy("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=jo)))}function rd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Bo={animationend:rd("Animation","AnimationEnd"),animationiteration:rd("Animation","AnimationIteration"),animationstart:rd("Animation","AnimationStart"),transitionend:rd("Transition","TransitionEnd")},Vp={},oT={};zr&&(oT=document.createElement("div").style,"AnimationEvent"in window||(delete Bo.animationend.animation,delete Bo.animationiteration.animation,delete Bo.animationstart.animation),"TransitionEvent"in window||delete Bo.transitionend.transition);function ff(t){if(Vp[t])return Vp[t];if(!Bo[t])return t;var e=Bo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in oT)return Vp[t]=e[n];return t}var aT=ff("animationend"),lT=ff("animationiteration"),uT=ff("animationstart"),cT=ff("transitionend"),dT=new Map,ME="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function es(t,e){dT.set(t,e),ho(e,[t])}for(var jp=0;jp<ME.length;jp++){var Bp=ME[jp],qO=Bp.toLowerCase(),WO=Bp[0].toUpperCase()+Bp.slice(1);es(qO,"on"+WO)}es(aT,"onAnimationEnd");es(lT,"onAnimationIteration");es(uT,"onAnimationStart");es("dblclick","onDoubleClick");es("focusin","onFocus");es("focusout","onBlur");es(cT,"onTransitionEnd");ga("onMouseEnter",["mouseout","mouseover"]);ga("onMouseLeave",["mouseout","mouseover"]);ga("onPointerEnter",["pointerout","pointerover"]);ga("onPointerLeave",["pointerout","pointerover"]);ho("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ho("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ho("onBeforeInput",["compositionend","keypress","textInput","paste"]);ho("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ho("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ho("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ll="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),HO=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ll));function FE(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,qD(r,e,void 0,t),t.currentTarget=null}function hT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;FE(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;FE(i,a,u),s=l}}}if(nh)throw t=ng,nh=!1,ng=null,t}function Ae(t,e){var n=e[hg];n===void 0&&(n=e[hg]=new Set);var r=t+"__bubble";n.has(r)||(fT(e,t,2,!1),n.add(r))}function zp(t,e,n){var r=0;e&&(r|=4),fT(n,t,r,e)}var id="_reactListening"+Math.random().toString(36).slice(2);function Eu(t){if(!t[id]){t[id]=!0,ES.forEach(function(n){n!=="selectionchange"&&(HO.has(n)||zp(n,!1,t),zp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[id]||(e[id]=!0,zp("selectionchange",!1,e))}}function fT(t,e,n,r){switch(YS(e)){case 1:var i=oO;break;case 4:i=aO;break;default:i=ry}n=i.bind(null,e,n,t),i=void 0,!tg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function qp(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=ks(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}$S(function(){var u=s,c=Zv(n),d=[];e:{var h=dT.get(t);if(h!==void 0){var f=sy,m=t;switch(t){case"keypress":if(Dd(n)===0)break e;case"keydown":case"keyup":f=_O;break;case"focusin":m="focus",f=Mp;break;case"focusout":m="blur",f=Mp;break;case"beforeblur":case"afterblur":f=Mp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=xE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=cO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=CO;break;case aT:case lT:case uT:f=fO;break;case cT:f=kO;break;case"scroll":f=lO;break;case"wheel":f=NO;break;case"copy":case"cut":case"paste":f=mO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=bE}var w=(e&4)!==0,I=!w&&t==="scroll",y=w?h!==null?h+"Capture":null:h;w=[];for(var p=u,g;p!==null;){g=p;var _=g.stateNode;if(g.tag===5&&_!==null&&(g=_,y!==null&&(_=pu(p,y),_!=null&&w.push(Iu(p,_,g)))),I)break;p=p.return}0<w.length&&(h=new f(h,m,null,n,c),d.push({event:h,listeners:w}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==Zm&&(m=n.relatedTarget||n.fromElement)&&(ks(m)||m[qr]))break e;if((f||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,f?(m=n.relatedTarget||n.toElement,f=u,m=m?ks(m):null,m!==null&&(I=fo(m),m!==I||m.tag!==5&&m.tag!==6)&&(m=null)):(f=null,m=u),f!==m)){if(w=xE,_="onMouseLeave",y="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(w=bE,_="onPointerLeave",y="onPointerEnter",p="pointer"),I=f==null?h:zo(f),g=m==null?h:zo(m),h=new w(_,p+"leave",f,n,c),h.target=I,h.relatedTarget=g,_=null,ks(c)===u&&(w=new w(y,p+"enter",m,n,c),w.target=g,w.relatedTarget=I,_=w),I=_,f&&m)t:{for(w=f,y=m,p=0,g=w;g;g=Co(g))p++;for(g=0,_=y;_;_=Co(_))g++;for(;0<p-g;)w=Co(w),p--;for(;0<g-p;)y=Co(y),g--;for(;p--;){if(w===y||y!==null&&w===y.alternate)break t;w=Co(w),y=Co(y)}w=null}else w=null;f!==null&&UE(d,h,f,w,!1),m!==null&&I!==null&&UE(d,I,m,w,!0)}}e:{if(h=u?zo(u):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var T=$O;else if(RE(h))if(nT)T=VO;else{T=FO;var C=MO}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(T=UO);if(T&&(T=T(t,u))){tT(d,T,n,c);break e}C&&C(t,h,u),t==="focusout"&&(C=h._wrapperState)&&C.controlled&&h.type==="number"&&Gm(h,"number",h.value)}switch(C=u?zo(u):window,t){case"focusin":(RE(C)||C.contentEditable==="true")&&(jo=C,og=u,Gl=null);break;case"focusout":Gl=og=jo=null;break;case"mousedown":ag=!0;break;case"contextmenu":case"mouseup":case"dragend":ag=!1,$E(d,n,c);break;case"selectionchange":if(zO)break;case"keydown":case"keyup":$E(d,n,c)}var b;if(ay)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Vo?ZS(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(JS&&n.locale!=="ko"&&(Vo||A!=="onCompositionStart"?A==="onCompositionEnd"&&Vo&&(b=XS()):(Ei=c,iy="value"in Ei?Ei.value:Ei.textContent,Vo=!0)),C=ah(u,A),0<C.length&&(A=new kE(A,t,null,n,c),d.push({event:A,listeners:C}),b?A.data=b:(b=eT(n),b!==null&&(A.data=b)))),(b=RO?DO(t,n):OO(t,n))&&(u=ah(u,"onBeforeInput"),0<u.length&&(c=new kE("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=b))}hT(d,e)})}function Iu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ah(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=pu(t,n),s!=null&&r.unshift(Iu(t,s,i)),s=pu(t,e),s!=null&&r.push(Iu(t,s,i))),t=t.return}return r}function Co(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function UE(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=pu(n,s),l!=null&&o.unshift(Iu(n,l,a))):i||(l=pu(n,s),l!=null&&o.push(Iu(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var KO=/\r\n?/g,GO=/\u0000|\uFFFD/g;function VE(t){return(typeof t=="string"?t:""+t).replace(KO,`
`).replace(GO,"")}function sd(t,e,n){if(e=VE(e),VE(t)!==e&&n)throw Error(L(425))}function lh(){}var lg=null,ug=null;function cg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var dg=typeof setTimeout=="function"?setTimeout:void 0,QO=typeof clearTimeout=="function"?clearTimeout:void 0,jE=typeof Promise=="function"?Promise:void 0,YO=typeof queueMicrotask=="function"?queueMicrotask:typeof jE<"u"?function(t){return jE.resolve(null).then(t).catch(XO)}:dg;function XO(t){setTimeout(function(){throw t})}function Wp(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),vu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);vu(e)}function Ri(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function BE(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var qa=Math.random().toString(36).slice(2),nr="__reactFiber$"+qa,_u="__reactProps$"+qa,qr="__reactContainer$"+qa,hg="__reactEvents$"+qa,JO="__reactListeners$"+qa,ZO="__reactHandles$"+qa;function ks(t){var e=t[nr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[qr]||n[nr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=BE(t);t!==null;){if(n=t[nr])return n;t=BE(t)}return e}t=n,n=t.parentNode}return null}function fc(t){return t=t[nr]||t[qr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function zo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(L(33))}function pf(t){return t[_u]||null}var fg=[],qo=-1;function ts(t){return{current:t}}function Pe(t){0>qo||(t.current=fg[qo],fg[qo]=null,qo--)}function xe(t,e){qo++,fg[qo]=t.current,t.current=e}var Ui={},zt=ts(Ui),cn=ts(!1),qs=Ui;function va(t,e){var n=t.type.contextTypes;if(!n)return Ui;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function dn(t){return t=t.childContextTypes,t!=null}function uh(){Pe(cn),Pe(zt)}function zE(t,e,n){if(zt.current!==Ui)throw Error(L(168));xe(zt,e),xe(cn,n)}function pT(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(L(108,MD(t)||"Unknown",i));return He({},n,r)}function ch(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ui,qs=zt.current,xe(zt,t),xe(cn,cn.current),!0}function qE(t,e,n){var r=t.stateNode;if(!r)throw Error(L(169));n?(t=pT(t,e,qs),r.__reactInternalMemoizedMergedChildContext=t,Pe(cn),Pe(zt),xe(zt,t)):Pe(cn),xe(cn,n)}var Nr=null,mf=!1,Hp=!1;function mT(t){Nr===null?Nr=[t]:Nr.push(t)}function eP(t){mf=!0,mT(t)}function ns(){if(!Hp&&Nr!==null){Hp=!0;var t=0,e=Se;try{var n=Nr;for(Se=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Nr=null,mf=!1}catch(i){throw Nr!==null&&(Nr=Nr.slice(t+1)),VS(ey,ns),i}finally{Se=e,Hp=!1}}return null}var Wo=[],Ho=0,dh=null,hh=0,Nn=[],An=0,Ws=null,Dr=1,Or="";function ys(t,e){Wo[Ho++]=hh,Wo[Ho++]=dh,dh=t,hh=e}function gT(t,e,n){Nn[An++]=Dr,Nn[An++]=Or,Nn[An++]=Ws,Ws=t;var r=Dr;t=Or;var i=32-Kn(r)-1;r&=~(1<<i),n+=1;var s=32-Kn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Dr=1<<32-Kn(e)+i|n<<i|r,Or=s+t}else Dr=1<<s|n<<i|r,Or=t}function uy(t){t.return!==null&&(ys(t,1),gT(t,1,0))}function cy(t){for(;t===dh;)dh=Wo[--Ho],Wo[Ho]=null,hh=Wo[--Ho],Wo[Ho]=null;for(;t===Ws;)Ws=Nn[--An],Nn[An]=null,Or=Nn[--An],Nn[An]=null,Dr=Nn[--An],Nn[An]=null}var En=null,yn=null,Ue=!1,zn=null;function vT(t,e){var n=Dn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function WE(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,En=t,yn=Ri(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,En=t,yn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ws!==null?{id:Dr,overflow:Or}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Dn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,En=t,yn=null,!0):!1;default:return!1}}function pg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function mg(t){if(Ue){var e=yn;if(e){var n=e;if(!WE(t,e)){if(pg(t))throw Error(L(418));e=Ri(n.nextSibling);var r=En;e&&WE(t,e)?vT(r,n):(t.flags=t.flags&-4097|2,Ue=!1,En=t)}}else{if(pg(t))throw Error(L(418));t.flags=t.flags&-4097|2,Ue=!1,En=t}}}function HE(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;En=t}function od(t){if(t!==En)return!1;if(!Ue)return HE(t),Ue=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!cg(t.type,t.memoizedProps)),e&&(e=yn)){if(pg(t))throw yT(),Error(L(418));for(;e;)vT(t,e),e=Ri(e.nextSibling)}if(HE(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(L(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){yn=Ri(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}yn=null}}else yn=En?Ri(t.stateNode.nextSibling):null;return!0}function yT(){for(var t=yn;t;)t=Ri(t.nextSibling)}function ya(){yn=En=null,Ue=!1}function dy(t){zn===null?zn=[t]:zn.push(t)}var tP=Jr.ReactCurrentBatchConfig;function jn(t,e){if(t&&t.defaultProps){e=He({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var fh=ts(null),ph=null,Ko=null,hy=null;function fy(){hy=Ko=ph=null}function py(t){var e=fh.current;Pe(fh),t._currentValue=e}function gg(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function sa(t,e){ph=t,hy=Ko=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(on=!0),t.firstContext=null)}function Ln(t){var e=t._currentValue;if(hy!==t)if(t={context:t,memoizedValue:e,next:null},Ko===null){if(ph===null)throw Error(L(308));Ko=t,ph.dependencies={lanes:0,firstContext:t}}else Ko=Ko.next=t;return e}var bs=null;function my(t){bs===null?bs=[t]:bs.push(t)}function wT(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,my(e)):(n.next=i.next,i.next=n),e.interleaved=n,Wr(t,r)}function Wr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var fi=!1;function gy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ET(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Fr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Di(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ye&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Wr(t,n)}return i=r.interleaved,i===null?(e.next=e,my(r)):(e.next=i.next,i.next=e),r.interleaved=e,Wr(t,n)}function Od(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ty(t,n)}}function KE(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function mh(t,e,n,r){var i=t.updateQueue;fi=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,c=u=l=null,a=s;do{var h=a.lane,f=a.eventTime;if((r&h)===h){c!==null&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,w=a;switch(h=e,f=n,w.tag){case 1:if(m=w.payload,typeof m=="function"){d=m.call(f,d,h);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=w.payload,h=typeof m=="function"?m.call(f,d,h):m,h==null)break e;d=He({},d,h);break e;case 2:fi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=f,l=d):c=c.next=f,o|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(1);if(c===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ks|=o,t.lanes=o,t.memoizedState=d}}function GE(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(L(191,i));i.call(r)}}}var IT=new wS.Component().refs;function vg(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:He({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var gf={isMounted:function(t){return(t=t._reactInternals)?fo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Xt(),i=Pi(t),s=Fr(r,i);s.payload=e,n!=null&&(s.callback=n),e=Di(t,s,i),e!==null&&(Gn(e,t,i,r),Od(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Xt(),i=Pi(t),s=Fr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Di(t,s,i),e!==null&&(Gn(e,t,i,r),Od(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Xt(),r=Pi(t),i=Fr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Di(t,i,r),e!==null&&(Gn(e,t,r,n),Od(e,t,r))}};function QE(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!wu(n,r)||!wu(i,s):!0}function _T(t,e,n){var r=!1,i=Ui,s=e.contextType;return typeof s=="object"&&s!==null?s=Ln(s):(i=dn(e)?qs:zt.current,r=e.contextTypes,s=(r=r!=null)?va(t,i):Ui),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=gf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function YE(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&gf.enqueueReplaceState(e,e.state,null)}function yg(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=IT,gy(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Ln(s):(s=dn(e)?qs:zt.current,i.context=va(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(vg(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&gf.enqueueReplaceState(i,i.state,null),mh(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ml(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(L(309));var r=n.stateNode}if(!r)throw Error(L(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===IT&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(L(284));if(!n._owner)throw Error(L(290,t))}return t}function ad(t,e){throw t=Object.prototype.toString.call(e),Error(L(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function XE(t){var e=t._init;return e(t._payload)}function ST(t){function e(y,p){if(t){var g=y.deletions;g===null?(y.deletions=[p],y.flags|=16):g.push(p)}}function n(y,p){if(!t)return null;for(;p!==null;)e(y,p),p=p.sibling;return null}function r(y,p){for(y=new Map;p!==null;)p.key!==null?y.set(p.key,p):y.set(p.index,p),p=p.sibling;return y}function i(y,p){return y=Li(y,p),y.index=0,y.sibling=null,y}function s(y,p,g){return y.index=g,t?(g=y.alternate,g!==null?(g=g.index,g<p?(y.flags|=2,p):g):(y.flags|=2,p)):(y.flags|=1048576,p)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,p,g,_){return p===null||p.tag!==6?(p=Zp(g,y.mode,_),p.return=y,p):(p=i(p,g),p.return=y,p)}function l(y,p,g,_){var T=g.type;return T===Uo?c(y,p,g.props.children,_,g.key):p!==null&&(p.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===hi&&XE(T)===p.type)?(_=i(p,g.props),_.ref=ml(y,p,g),_.return=y,_):(_=Ud(g.type,g.key,g.props,null,y.mode,_),_.ref=ml(y,p,g),_.return=y,_)}function u(y,p,g,_){return p===null||p.tag!==4||p.stateNode.containerInfo!==g.containerInfo||p.stateNode.implementation!==g.implementation?(p=em(g,y.mode,_),p.return=y,p):(p=i(p,g.children||[]),p.return=y,p)}function c(y,p,g,_,T){return p===null||p.tag!==7?(p=Ms(g,y.mode,_,T),p.return=y,p):(p=i(p,g),p.return=y,p)}function d(y,p,g){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Zp(""+p,y.mode,g),p.return=y,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Yc:return g=Ud(p.type,p.key,p.props,null,y.mode,g),g.ref=ml(y,null,p),g.return=y,g;case Fo:return p=em(p,y.mode,g),p.return=y,p;case hi:var _=p._init;return d(y,_(p._payload),g)}if(Ol(p)||cl(p))return p=Ms(p,y.mode,g,null),p.return=y,p;ad(y,p)}return null}function h(y,p,g,_){var T=p!==null?p.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return T!==null?null:a(y,p,""+g,_);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Yc:return g.key===T?l(y,p,g,_):null;case Fo:return g.key===T?u(y,p,g,_):null;case hi:return T=g._init,h(y,p,T(g._payload),_)}if(Ol(g)||cl(g))return T!==null?null:c(y,p,g,_,null);ad(y,g)}return null}function f(y,p,g,_,T){if(typeof _=="string"&&_!==""||typeof _=="number")return y=y.get(g)||null,a(p,y,""+_,T);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Yc:return y=y.get(_.key===null?g:_.key)||null,l(p,y,_,T);case Fo:return y=y.get(_.key===null?g:_.key)||null,u(p,y,_,T);case hi:var C=_._init;return f(y,p,g,C(_._payload),T)}if(Ol(_)||cl(_))return y=y.get(g)||null,c(p,y,_,T,null);ad(p,_)}return null}function m(y,p,g,_){for(var T=null,C=null,b=p,A=p=0,W=null;b!==null&&A<g.length;A++){b.index>A?(W=b,b=null):W=b.sibling;var j=h(y,b,g[A],_);if(j===null){b===null&&(b=W);break}t&&b&&j.alternate===null&&e(y,b),p=s(j,p,A),C===null?T=j:C.sibling=j,C=j,b=W}if(A===g.length)return n(y,b),Ue&&ys(y,A),T;if(b===null){for(;A<g.length;A++)b=d(y,g[A],_),b!==null&&(p=s(b,p,A),C===null?T=b:C.sibling=b,C=b);return Ue&&ys(y,A),T}for(b=r(y,b);A<g.length;A++)W=f(b,y,A,g[A],_),W!==null&&(t&&W.alternate!==null&&b.delete(W.key===null?A:W.key),p=s(W,p,A),C===null?T=W:C.sibling=W,C=W);return t&&b.forEach(function(Q){return e(y,Q)}),Ue&&ys(y,A),T}function w(y,p,g,_){var T=cl(g);if(typeof T!="function")throw Error(L(150));if(g=T.call(g),g==null)throw Error(L(151));for(var C=T=null,b=p,A=p=0,W=null,j=g.next();b!==null&&!j.done;A++,j=g.next()){b.index>A?(W=b,b=null):W=b.sibling;var Q=h(y,b,j.value,_);if(Q===null){b===null&&(b=W);break}t&&b&&Q.alternate===null&&e(y,b),p=s(Q,p,A),C===null?T=Q:C.sibling=Q,C=Q,b=W}if(j.done)return n(y,b),Ue&&ys(y,A),T;if(b===null){for(;!j.done;A++,j=g.next())j=d(y,j.value,_),j!==null&&(p=s(j,p,A),C===null?T=j:C.sibling=j,C=j);return Ue&&ys(y,A),T}for(b=r(y,b);!j.done;A++,j=g.next())j=f(b,y,A,j.value,_),j!==null&&(t&&j.alternate!==null&&b.delete(j.key===null?A:j.key),p=s(j,p,A),C===null?T=j:C.sibling=j,C=j);return t&&b.forEach(function(q){return e(y,q)}),Ue&&ys(y,A),T}function I(y,p,g,_){if(typeof g=="object"&&g!==null&&g.type===Uo&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case Yc:e:{for(var T=g.key,C=p;C!==null;){if(C.key===T){if(T=g.type,T===Uo){if(C.tag===7){n(y,C.sibling),p=i(C,g.props.children),p.return=y,y=p;break e}}else if(C.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===hi&&XE(T)===C.type){n(y,C.sibling),p=i(C,g.props),p.ref=ml(y,C,g),p.return=y,y=p;break e}n(y,C);break}else e(y,C);C=C.sibling}g.type===Uo?(p=Ms(g.props.children,y.mode,_,g.key),p.return=y,y=p):(_=Ud(g.type,g.key,g.props,null,y.mode,_),_.ref=ml(y,p,g),_.return=y,y=_)}return o(y);case Fo:e:{for(C=g.key;p!==null;){if(p.key===C)if(p.tag===4&&p.stateNode.containerInfo===g.containerInfo&&p.stateNode.implementation===g.implementation){n(y,p.sibling),p=i(p,g.children||[]),p.return=y,y=p;break e}else{n(y,p);break}else e(y,p);p=p.sibling}p=em(g,y.mode,_),p.return=y,y=p}return o(y);case hi:return C=g._init,I(y,p,C(g._payload),_)}if(Ol(g))return m(y,p,g,_);if(cl(g))return w(y,p,g,_);ad(y,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,p!==null&&p.tag===6?(n(y,p.sibling),p=i(p,g),p.return=y,y=p):(n(y,p),p=Zp(g,y.mode,_),p.return=y,y=p),o(y)):n(y,p)}return I}var wa=ST(!0),TT=ST(!1),pc={},mr=ts(pc),Su=ts(pc),Tu=ts(pc);function Ns(t){if(t===pc)throw Error(L(174));return t}function vy(t,e){switch(xe(Tu,e),xe(Su,t),xe(mr,pc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ym(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ym(e,t)}Pe(mr),xe(mr,e)}function Ea(){Pe(mr),Pe(Su),Pe(Tu)}function CT(t){Ns(Tu.current);var e=Ns(mr.current),n=Ym(e,t.type);e!==n&&(xe(Su,t),xe(mr,n))}function yy(t){Su.current===t&&(Pe(mr),Pe(Su))}var qe=ts(0);function gh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Kp=[];function wy(){for(var t=0;t<Kp.length;t++)Kp[t]._workInProgressVersionPrimary=null;Kp.length=0}var Pd=Jr.ReactCurrentDispatcher,Gp=Jr.ReactCurrentBatchConfig,Hs=0,We=null,ct=null,vt=null,vh=!1,Ql=!1,Cu=0,nP=0;function Mt(){throw Error(L(321))}function Ey(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Qn(t[n],e[n]))return!1;return!0}function Iy(t,e,n,r,i,s){if(Hs=s,We=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Pd.current=t===null||t.memoizedState===null?oP:aP,t=n(r,i),Ql){s=0;do{if(Ql=!1,Cu=0,25<=s)throw Error(L(301));s+=1,vt=ct=null,e.updateQueue=null,Pd.current=lP,t=n(r,i)}while(Ql)}if(Pd.current=yh,e=ct!==null&&ct.next!==null,Hs=0,vt=ct=We=null,vh=!1,e)throw Error(L(300));return t}function _y(){var t=Cu!==0;return Cu=0,t}function tr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?We.memoizedState=vt=t:vt=vt.next=t,vt}function $n(){if(ct===null){var t=We.alternate;t=t!==null?t.memoizedState:null}else t=ct.next;var e=vt===null?We.memoizedState:vt.next;if(e!==null)vt=e,ct=t;else{if(t===null)throw Error(L(310));ct=t,t={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},vt===null?We.memoizedState=vt=t:vt=vt.next=t}return vt}function xu(t,e){return typeof e=="function"?e(t):e}function Qp(t){var e=$n(),n=e.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=t;var r=ct,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((Hs&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,We.lanes|=c,Ks|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,Qn(r,e.memoizedState)||(on=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,We.lanes|=s,Ks|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Yp(t){var e=$n(),n=e.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Qn(s,e.memoizedState)||(on=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function xT(){}function kT(t,e){var n=We,r=$n(),i=e(),s=!Qn(r.memoizedState,i);if(s&&(r.memoizedState=i,on=!0),r=r.queue,Sy(AT.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||vt!==null&&vt.memoizedState.tag&1){if(n.flags|=2048,ku(9,NT.bind(null,n,r,i,e),void 0,null),wt===null)throw Error(L(349));Hs&30||bT(n,e,i)}return i}function bT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=We.updateQueue,e===null?(e={lastEffect:null,stores:null},We.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function NT(t,e,n,r){e.value=n,e.getSnapshot=r,RT(e)&&DT(t)}function AT(t,e,n){return n(function(){RT(e)&&DT(t)})}function RT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Qn(t,n)}catch{return!0}}function DT(t){var e=Wr(t,1);e!==null&&Gn(e,t,1,-1)}function JE(t){var e=tr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xu,lastRenderedState:t},e.queue=t,t=t.dispatch=sP.bind(null,We,t),[e.memoizedState,t]}function ku(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=We.updateQueue,e===null?(e={lastEffect:null,stores:null},We.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function OT(){return $n().memoizedState}function Ld(t,e,n,r){var i=tr();We.flags|=t,i.memoizedState=ku(1|e,n,void 0,r===void 0?null:r)}function vf(t,e,n,r){var i=$n();r=r===void 0?null:r;var s=void 0;if(ct!==null){var o=ct.memoizedState;if(s=o.destroy,r!==null&&Ey(r,o.deps)){i.memoizedState=ku(e,n,s,r);return}}We.flags|=t,i.memoizedState=ku(1|e,n,s,r)}function ZE(t,e){return Ld(8390656,8,t,e)}function Sy(t,e){return vf(2048,8,t,e)}function PT(t,e){return vf(4,2,t,e)}function LT(t,e){return vf(4,4,t,e)}function $T(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function MT(t,e,n){return n=n!=null?n.concat([t]):null,vf(4,4,$T.bind(null,e,t),n)}function Ty(){}function FT(t,e){var n=$n();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ey(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function UT(t,e){var n=$n();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ey(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function VT(t,e,n){return Hs&21?(Qn(n,e)||(n=zS(),We.lanes|=n,Ks|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,on=!0),t.memoizedState=n)}function rP(t,e){var n=Se;Se=n!==0&&4>n?n:4,t(!0);var r=Gp.transition;Gp.transition={};try{t(!1),e()}finally{Se=n,Gp.transition=r}}function jT(){return $n().memoizedState}function iP(t,e,n){var r=Pi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},BT(t))zT(e,n);else if(n=wT(t,e,n,r),n!==null){var i=Xt();Gn(n,t,r,i),qT(n,e,r)}}function sP(t,e,n){var r=Pi(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(BT(t))zT(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Qn(a,o)){var l=e.interleaved;l===null?(i.next=i,my(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=wT(t,e,i,r),n!==null&&(i=Xt(),Gn(n,t,r,i),qT(n,e,r))}}function BT(t){var e=t.alternate;return t===We||e!==null&&e===We}function zT(t,e){Ql=vh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function qT(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ty(t,n)}}var yh={readContext:Ln,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useInsertionEffect:Mt,useLayoutEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useMutableSource:Mt,useSyncExternalStore:Mt,useId:Mt,unstable_isNewReconciler:!1},oP={readContext:Ln,useCallback:function(t,e){return tr().memoizedState=[t,e===void 0?null:e],t},useContext:Ln,useEffect:ZE,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ld(4194308,4,$T.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ld(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ld(4,2,t,e)},useMemo:function(t,e){var n=tr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=tr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=iP.bind(null,We,t),[r.memoizedState,t]},useRef:function(t){var e=tr();return t={current:t},e.memoizedState=t},useState:JE,useDebugValue:Ty,useDeferredValue:function(t){return tr().memoizedState=t},useTransition:function(){var t=JE(!1),e=t[0];return t=rP.bind(null,t[1]),tr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=We,i=tr();if(Ue){if(n===void 0)throw Error(L(407));n=n()}else{if(n=e(),wt===null)throw Error(L(349));Hs&30||bT(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,ZE(AT.bind(null,r,s,t),[t]),r.flags|=2048,ku(9,NT.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=tr(),e=wt.identifierPrefix;if(Ue){var n=Or,r=Dr;n=(r&~(1<<32-Kn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Cu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=nP++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},aP={readContext:Ln,useCallback:FT,useContext:Ln,useEffect:Sy,useImperativeHandle:MT,useInsertionEffect:PT,useLayoutEffect:LT,useMemo:UT,useReducer:Qp,useRef:OT,useState:function(){return Qp(xu)},useDebugValue:Ty,useDeferredValue:function(t){var e=$n();return VT(e,ct.memoizedState,t)},useTransition:function(){var t=Qp(xu)[0],e=$n().memoizedState;return[t,e]},useMutableSource:xT,useSyncExternalStore:kT,useId:jT,unstable_isNewReconciler:!1},lP={readContext:Ln,useCallback:FT,useContext:Ln,useEffect:Sy,useImperativeHandle:MT,useInsertionEffect:PT,useLayoutEffect:LT,useMemo:UT,useReducer:Yp,useRef:OT,useState:function(){return Yp(xu)},useDebugValue:Ty,useDeferredValue:function(t){var e=$n();return ct===null?e.memoizedState=t:VT(e,ct.memoizedState,t)},useTransition:function(){var t=Yp(xu)[0],e=$n().memoizedState;return[t,e]},useMutableSource:xT,useSyncExternalStore:kT,useId:jT,unstable_isNewReconciler:!1};function Ia(t,e){try{var n="",r=e;do n+=$D(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Xp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function wg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var uP=typeof WeakMap=="function"?WeakMap:Map;function WT(t,e,n){n=Fr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Eh||(Eh=!0,Ng=r),wg(t,e)},n}function HT(t,e,n){n=Fr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){wg(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){wg(t,e),typeof r!="function"&&(Oi===null?Oi=new Set([this]):Oi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function eI(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new uP;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=SP.bind(null,t,e,n),e.then(t,t))}function tI(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function nI(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Fr(-1,1),e.tag=2,Di(n,e,1))),n.lanes|=1),t)}var cP=Jr.ReactCurrentOwner,on=!1;function Ht(t,e,n,r){e.child=t===null?TT(e,null,n,r):wa(e,t.child,n,r)}function rI(t,e,n,r,i){n=n.render;var s=e.ref;return sa(e,i),r=Iy(t,e,n,r,s,i),n=_y(),t!==null&&!on?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Hr(t,e,i)):(Ue&&n&&uy(e),e.flags|=1,Ht(t,e,r,i),e.child)}function iI(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Dy(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,KT(t,e,s,r,i)):(t=Ud(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:wu,n(o,r)&&t.ref===e.ref)return Hr(t,e,i)}return e.flags|=1,t=Li(s,r),t.ref=e.ref,t.return=e,e.child=t}function KT(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(wu(s,r)&&t.ref===e.ref)if(on=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(on=!0);else return e.lanes=t.lanes,Hr(t,e,i)}return Eg(t,e,n,r,i)}function GT(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},xe(Qo,gn),gn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,xe(Qo,gn),gn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,xe(Qo,gn),gn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,xe(Qo,gn),gn|=r;return Ht(t,e,i,n),e.child}function QT(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Eg(t,e,n,r,i){var s=dn(n)?qs:zt.current;return s=va(e,s),sa(e,i),n=Iy(t,e,n,r,s,i),r=_y(),t!==null&&!on?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Hr(t,e,i)):(Ue&&r&&uy(e),e.flags|=1,Ht(t,e,n,i),e.child)}function sI(t,e,n,r,i){if(dn(n)){var s=!0;ch(e)}else s=!1;if(sa(e,i),e.stateNode===null)$d(t,e),_T(e,n,r),yg(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Ln(u):(u=dn(n)?qs:zt.current,u=va(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&YE(e,o,r,u),fi=!1;var h=e.memoizedState;o.state=h,mh(e,r,o,i),l=e.memoizedState,a!==r||h!==l||cn.current||fi?(typeof c=="function"&&(vg(e,n,c,r),l=e.memoizedState),(a=fi||QE(e,n,a,r,h,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,ET(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:jn(e.type,a),o.props=u,d=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Ln(l):(l=dn(n)?qs:zt.current,l=va(e,l));var f=n.getDerivedStateFromProps;(c=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==l)&&YE(e,o,r,l),fi=!1,h=e.memoizedState,o.state=h,mh(e,r,o,i);var m=e.memoizedState;a!==d||h!==m||cn.current||fi?(typeof f=="function"&&(vg(e,n,f,r),m=e.memoizedState),(u=fi||QE(e,n,u,r,h,m,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),o.props=r,o.state=m,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return Ig(t,e,n,r,s,i)}function Ig(t,e,n,r,i,s){QT(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&qE(e,n,!1),Hr(t,e,s);r=e.stateNode,cP.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=wa(e,t.child,null,s),e.child=wa(e,null,a,s)):Ht(t,e,a,s),e.memoizedState=r.state,i&&qE(e,n,!0),e.child}function YT(t){var e=t.stateNode;e.pendingContext?zE(t,e.pendingContext,e.pendingContext!==e.context):e.context&&zE(t,e.context,!1),vy(t,e.containerInfo)}function oI(t,e,n,r,i){return ya(),dy(i),e.flags|=256,Ht(t,e,n,r),e.child}var _g={dehydrated:null,treeContext:null,retryLane:0};function Sg(t){return{baseLanes:t,cachePool:null,transitions:null}}function XT(t,e,n){var r=e.pendingProps,i=qe.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),xe(qe,i&1),t===null)return mg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Ef(o,r,0,null),t=Ms(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Sg(n),e.memoizedState=_g,t):Cy(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return dP(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Li(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Li(a,s):(s=Ms(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Sg(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=_g,r}return s=t.child,t=s.sibling,r=Li(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Cy(t,e){return e=Ef({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ld(t,e,n,r){return r!==null&&dy(r),wa(e,t.child,null,n),t=Cy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function dP(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Xp(Error(L(422))),ld(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Ef({mode:"visible",children:r.children},i,0,null),s=Ms(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&wa(e,t.child,null,o),e.child.memoizedState=Sg(o),e.memoizedState=_g,s);if(!(e.mode&1))return ld(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(L(419)),r=Xp(s,r,void 0),ld(t,e,o,r)}if(a=(o&t.childLanes)!==0,on||a){if(r=wt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Wr(t,i),Gn(r,t,i,-1))}return Ry(),r=Xp(Error(L(421))),ld(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=TP.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,yn=Ri(i.nextSibling),En=e,Ue=!0,zn=null,t!==null&&(Nn[An++]=Dr,Nn[An++]=Or,Nn[An++]=Ws,Dr=t.id,Or=t.overflow,Ws=e),e=Cy(e,r.children),e.flags|=4096,e)}function aI(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),gg(t.return,e,n)}function Jp(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function JT(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Ht(t,e,r.children,n),r=qe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&aI(t,n,e);else if(t.tag===19)aI(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(xe(qe,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&gh(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Jp(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&gh(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Jp(e,!0,n,null,s);break;case"together":Jp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function $d(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Hr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ks|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(L(153));if(e.child!==null){for(t=e.child,n=Li(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Li(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function hP(t,e,n){switch(e.tag){case 3:YT(e),ya();break;case 5:CT(e);break;case 1:dn(e.type)&&ch(e);break;case 4:vy(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;xe(fh,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(xe(qe,qe.current&1),e.flags|=128,null):n&e.child.childLanes?XT(t,e,n):(xe(qe,qe.current&1),t=Hr(t,e,n),t!==null?t.sibling:null);xe(qe,qe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return JT(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),xe(qe,qe.current),r)break;return null;case 22:case 23:return e.lanes=0,GT(t,e,n)}return Hr(t,e,n)}var ZT,Tg,eC,tC;ZT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Tg=function(){};eC=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ns(mr.current);var s=null;switch(n){case"input":i=Hm(t,i),r=Hm(t,r),s=[];break;case"select":i=He({},i,{value:void 0}),r=He({},r,{value:void 0}),s=[];break;case"textarea":i=Qm(t,i),r=Qm(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=lh)}Xm(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(hu.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(hu.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Ae("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};tC=function(t,e,n,r){n!==r&&(e.flags|=4)};function gl(t,e){if(!Ue)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ft(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function fP(t,e,n){var r=e.pendingProps;switch(cy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(e),null;case 1:return dn(e.type)&&uh(),Ft(e),null;case 3:return r=e.stateNode,Ea(),Pe(cn),Pe(zt),wy(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(od(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zn!==null&&(Dg(zn),zn=null))),Tg(t,e),Ft(e),null;case 5:yy(e);var i=Ns(Tu.current);if(n=e.type,t!==null&&e.stateNode!=null)eC(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(L(166));return Ft(e),null}if(t=Ns(mr.current),od(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[nr]=e,r[_u]=s,t=(e.mode&1)!==0,n){case"dialog":Ae("cancel",r),Ae("close",r);break;case"iframe":case"object":case"embed":Ae("load",r);break;case"video":case"audio":for(i=0;i<Ll.length;i++)Ae(Ll[i],r);break;case"source":Ae("error",r);break;case"img":case"image":case"link":Ae("error",r),Ae("load",r);break;case"details":Ae("toggle",r);break;case"input":gE(r,s),Ae("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ae("invalid",r);break;case"textarea":yE(r,s),Ae("invalid",r)}Xm(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&sd(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&sd(r.textContent,a,t),i=["children",""+a]):hu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ae("scroll",r)}switch(n){case"input":Xc(r),vE(r,s,!0);break;case"textarea":Xc(r),wE(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=lh)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=bS(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[nr]=e,t[_u]=r,ZT(t,e,!1,!1),e.stateNode=t;e:{switch(o=Jm(n,r),n){case"dialog":Ae("cancel",t),Ae("close",t),i=r;break;case"iframe":case"object":case"embed":Ae("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ll.length;i++)Ae(Ll[i],t);i=r;break;case"source":Ae("error",t),i=r;break;case"img":case"image":case"link":Ae("error",t),Ae("load",t),i=r;break;case"details":Ae("toggle",t),i=r;break;case"input":gE(t,r),i=Hm(t,r),Ae("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=He({},r,{value:void 0}),Ae("invalid",t);break;case"textarea":yE(t,r),i=Qm(t,r),Ae("invalid",t);break;default:i=r}Xm(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?RS(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&NS(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&fu(t,l):typeof l=="number"&&fu(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(hu.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ae("scroll",t):l!=null&&Qv(t,s,l,o))}switch(n){case"input":Xc(t),vE(t,r,!1);break;case"textarea":Xc(t),wE(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Fi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ta(t,!!r.multiple,s,!1):r.defaultValue!=null&&ta(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=lh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ft(e),null;case 6:if(t&&e.stateNode!=null)tC(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(L(166));if(n=Ns(Tu.current),Ns(mr.current),od(e)){if(r=e.stateNode,n=e.memoizedProps,r[nr]=e,(s=r.nodeValue!==n)&&(t=En,t!==null))switch(t.tag){case 3:sd(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&sd(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[nr]=e,e.stateNode=r}return Ft(e),null;case 13:if(Pe(qe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ue&&yn!==null&&e.mode&1&&!(e.flags&128))yT(),ya(),e.flags|=98560,s=!1;else if(s=od(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(L(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(L(317));s[nr]=e}else ya(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ft(e),s=!1}else zn!==null&&(Dg(zn),zn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||qe.current&1?dt===0&&(dt=3):Ry())),e.updateQueue!==null&&(e.flags|=4),Ft(e),null);case 4:return Ea(),Tg(t,e),t===null&&Eu(e.stateNode.containerInfo),Ft(e),null;case 10:return py(e.type._context),Ft(e),null;case 17:return dn(e.type)&&uh(),Ft(e),null;case 19:if(Pe(qe),s=e.memoizedState,s===null)return Ft(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)gl(s,!1);else{if(dt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=gh(t),o!==null){for(e.flags|=128,gl(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return xe(qe,qe.current&1|2),e.child}t=t.sibling}s.tail!==null&&Je()>_a&&(e.flags|=128,r=!0,gl(s,!1),e.lanes=4194304)}else{if(!r)if(t=gh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),gl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ue)return Ft(e),null}else 2*Je()-s.renderingStartTime>_a&&n!==1073741824&&(e.flags|=128,r=!0,gl(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Je(),e.sibling=null,n=qe.current,xe(qe,r?n&1|2:n&1),e):(Ft(e),null);case 22:case 23:return Ay(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?gn&1073741824&&(Ft(e),e.subtreeFlags&6&&(e.flags|=8192)):Ft(e),null;case 24:return null;case 25:return null}throw Error(L(156,e.tag))}function pP(t,e){switch(cy(e),e.tag){case 1:return dn(e.type)&&uh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ea(),Pe(cn),Pe(zt),wy(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return yy(e),null;case 13:if(Pe(qe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(L(340));ya()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Pe(qe),null;case 4:return Ea(),null;case 10:return py(e.type._context),null;case 22:case 23:return Ay(),null;case 24:return null;default:return null}}var ud=!1,Vt=!1,mP=typeof WeakSet=="function"?WeakSet:Set,K=null;function Go(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ge(t,e,r)}else n.current=null}function Cg(t,e,n){try{n()}catch(r){Ge(t,e,r)}}var lI=!1;function gP(t,e){if(lg=sh,t=sT(),ly(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,d=t,h=null;t:for(;;){for(var f;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++u===i&&(a=o),h===s&&++c===r&&(l=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ug={focusedElem:t,selectionRange:n},sh=!1,K=e;K!==null;)if(e=K,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,K=t;else for(;K!==null;){e=K;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var w=m.memoizedProps,I=m.memoizedState,y=e.stateNode,p=y.getSnapshotBeforeUpdate(e.elementType===e.type?w:jn(e.type,w),I);y.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var g=e.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(L(163))}}catch(_){Ge(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,K=t;break}K=e.return}return m=lI,lI=!1,m}function Yl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Cg(e,n,s)}i=i.next}while(i!==r)}}function yf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function xg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function nC(t){var e=t.alternate;e!==null&&(t.alternate=null,nC(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[nr],delete e[_u],delete e[hg],delete e[JO],delete e[ZO])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function rC(t){return t.tag===5||t.tag===3||t.tag===4}function uI(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||rC(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function kg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=lh));else if(r!==4&&(t=t.child,t!==null))for(kg(t,e,n),t=t.sibling;t!==null;)kg(t,e,n),t=t.sibling}function bg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(bg(t,e,n),t=t.sibling;t!==null;)bg(t,e,n),t=t.sibling}var xt=null,Bn=!1;function oi(t,e,n){for(n=n.child;n!==null;)iC(t,e,n),n=n.sibling}function iC(t,e,n){if(pr&&typeof pr.onCommitFiberUnmount=="function")try{pr.onCommitFiberUnmount(cf,n)}catch{}switch(n.tag){case 5:Vt||Go(n,e);case 6:var r=xt,i=Bn;xt=null,oi(t,e,n),xt=r,Bn=i,xt!==null&&(Bn?(t=xt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):xt.removeChild(n.stateNode));break;case 18:xt!==null&&(Bn?(t=xt,n=n.stateNode,t.nodeType===8?Wp(t.parentNode,n):t.nodeType===1&&Wp(t,n),vu(t)):Wp(xt,n.stateNode));break;case 4:r=xt,i=Bn,xt=n.stateNode.containerInfo,Bn=!0,oi(t,e,n),xt=r,Bn=i;break;case 0:case 11:case 14:case 15:if(!Vt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Cg(n,e,o),i=i.next}while(i!==r)}oi(t,e,n);break;case 1:if(!Vt&&(Go(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ge(n,e,a)}oi(t,e,n);break;case 21:oi(t,e,n);break;case 22:n.mode&1?(Vt=(r=Vt)||n.memoizedState!==null,oi(t,e,n),Vt=r):oi(t,e,n);break;default:oi(t,e,n)}}function cI(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new mP),e.forEach(function(r){var i=CP.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Vn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:xt=a.stateNode,Bn=!1;break e;case 3:xt=a.stateNode.containerInfo,Bn=!0;break e;case 4:xt=a.stateNode.containerInfo,Bn=!0;break e}a=a.return}if(xt===null)throw Error(L(160));iC(s,o,i),xt=null,Bn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Ge(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)sC(e,t),e=e.sibling}function sC(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Vn(e,t),er(t),r&4){try{Yl(3,t,t.return),yf(3,t)}catch(w){Ge(t,t.return,w)}try{Yl(5,t,t.return)}catch(w){Ge(t,t.return,w)}}break;case 1:Vn(e,t),er(t),r&512&&n!==null&&Go(n,n.return);break;case 5:if(Vn(e,t),er(t),r&512&&n!==null&&Go(n,n.return),t.flags&32){var i=t.stateNode;try{fu(i,"")}catch(w){Ge(t,t.return,w)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&xS(i,s),Jm(a,o);var u=Jm(a,s);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?RS(i,d):c==="dangerouslySetInnerHTML"?NS(i,d):c==="children"?fu(i,d):Qv(i,c,d,u)}switch(a){case"input":Km(i,s);break;case"textarea":kS(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?ta(i,!!s.multiple,f,!1):h!==!!s.multiple&&(s.defaultValue!=null?ta(i,!!s.multiple,s.defaultValue,!0):ta(i,!!s.multiple,s.multiple?[]:"",!1))}i[_u]=s}catch(w){Ge(t,t.return,w)}}break;case 6:if(Vn(e,t),er(t),r&4){if(t.stateNode===null)throw Error(L(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(w){Ge(t,t.return,w)}}break;case 3:if(Vn(e,t),er(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{vu(e.containerInfo)}catch(w){Ge(t,t.return,w)}break;case 4:Vn(e,t),er(t);break;case 13:Vn(e,t),er(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(by=Je())),r&4&&cI(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Vt=(u=Vt)||c,Vn(e,t),Vt=u):Vn(e,t),er(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(K=t,c=t.child;c!==null;){for(d=K=c;K!==null;){switch(h=K,f=h.child,h.tag){case 0:case 11:case 14:case 15:Yl(4,h,h.return);break;case 1:Go(h,h.return);var m=h.stateNode;if(typeof m.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(w){Ge(r,n,w)}}break;case 5:Go(h,h.return);break;case 22:if(h.memoizedState!==null){hI(d);continue}}f!==null?(f.return=h,K=f):hI(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=AS("display",o))}catch(w){Ge(t,t.return,w)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(w){Ge(t,t.return,w)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Vn(e,t),er(t),r&4&&cI(t);break;case 21:break;default:Vn(e,t),er(t)}}function er(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(rC(n)){var r=n;break e}n=n.return}throw Error(L(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(fu(i,""),r.flags&=-33);var s=uI(t);bg(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=uI(t);kg(t,a,o);break;default:throw Error(L(161))}}catch(l){Ge(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function vP(t,e,n){K=t,oC(t)}function oC(t,e,n){for(var r=(t.mode&1)!==0;K!==null;){var i=K,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||ud;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Vt;a=ud;var u=Vt;if(ud=o,(Vt=l)&&!u)for(K=i;K!==null;)o=K,l=o.child,o.tag===22&&o.memoizedState!==null?fI(i):l!==null?(l.return=o,K=l):fI(i);for(;s!==null;)K=s,oC(s),s=s.sibling;K=i,ud=a,Vt=u}dI(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,K=s):dI(t)}}function dI(t){for(;K!==null;){var e=K;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Vt||yf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Vt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:jn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&GE(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}GE(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&vu(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(L(163))}Vt||e.flags&512&&xg(e)}catch(h){Ge(e,e.return,h)}}if(e===t){K=null;break}if(n=e.sibling,n!==null){n.return=e.return,K=n;break}K=e.return}}function hI(t){for(;K!==null;){var e=K;if(e===t){K=null;break}var n=e.sibling;if(n!==null){n.return=e.return,K=n;break}K=e.return}}function fI(t){for(;K!==null;){var e=K;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{yf(4,e)}catch(l){Ge(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Ge(e,i,l)}}var s=e.return;try{xg(e)}catch(l){Ge(e,s,l)}break;case 5:var o=e.return;try{xg(e)}catch(l){Ge(e,o,l)}}}catch(l){Ge(e,e.return,l)}if(e===t){K=null;break}var a=e.sibling;if(a!==null){a.return=e.return,K=a;break}K=e.return}}var yP=Math.ceil,wh=Jr.ReactCurrentDispatcher,xy=Jr.ReactCurrentOwner,Pn=Jr.ReactCurrentBatchConfig,ye=0,wt=null,at=null,At=0,gn=0,Qo=ts(0),dt=0,bu=null,Ks=0,wf=0,ky=0,Xl=null,sn=null,by=0,_a=1/0,br=null,Eh=!1,Ng=null,Oi=null,cd=!1,Ii=null,Ih=0,Jl=0,Ag=null,Md=-1,Fd=0;function Xt(){return ye&6?Je():Md!==-1?Md:Md=Je()}function Pi(t){return t.mode&1?ye&2&&At!==0?At&-At:tP.transition!==null?(Fd===0&&(Fd=zS()),Fd):(t=Se,t!==0||(t=window.event,t=t===void 0?16:YS(t.type)),t):1}function Gn(t,e,n,r){if(50<Jl)throw Jl=0,Ag=null,Error(L(185));dc(t,n,r),(!(ye&2)||t!==wt)&&(t===wt&&(!(ye&2)&&(wf|=n),dt===4&&vi(t,At)),hn(t,r),n===1&&ye===0&&!(e.mode&1)&&(_a=Je()+500,mf&&ns()))}function hn(t,e){var n=t.callbackNode;tO(t,e);var r=ih(t,t===wt?At:0);if(r===0)n!==null&&_E(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&_E(n),e===1)t.tag===0?eP(pI.bind(null,t)):mT(pI.bind(null,t)),YO(function(){!(ye&6)&&ns()}),n=null;else{switch(qS(r)){case 1:n=ey;break;case 4:n=jS;break;case 16:n=rh;break;case 536870912:n=BS;break;default:n=rh}n=pC(n,aC.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function aC(t,e){if(Md=-1,Fd=0,ye&6)throw Error(L(327));var n=t.callbackNode;if(oa()&&t.callbackNode!==n)return null;var r=ih(t,t===wt?At:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=_h(t,r);else{e=r;var i=ye;ye|=2;var s=uC();(wt!==t||At!==e)&&(br=null,_a=Je()+500,$s(t,e));do try{IP();break}catch(a){lC(t,a)}while(1);fy(),wh.current=s,ye=i,at!==null?e=0:(wt=null,At=0,e=dt)}if(e!==0){if(e===2&&(i=rg(t),i!==0&&(r=i,e=Rg(t,i))),e===1)throw n=bu,$s(t,0),vi(t,r),hn(t,Je()),n;if(e===6)vi(t,r);else{if(i=t.current.alternate,!(r&30)&&!wP(i)&&(e=_h(t,r),e===2&&(s=rg(t),s!==0&&(r=s,e=Rg(t,s))),e===1))throw n=bu,$s(t,0),vi(t,r),hn(t,Je()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(L(345));case 2:ws(t,sn,br);break;case 3:if(vi(t,r),(r&130023424)===r&&(e=by+500-Je(),10<e)){if(ih(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Xt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=dg(ws.bind(null,t,sn,br),e);break}ws(t,sn,br);break;case 4:if(vi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Kn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Je()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*yP(r/1960))-r,10<r){t.timeoutHandle=dg(ws.bind(null,t,sn,br),r);break}ws(t,sn,br);break;case 5:ws(t,sn,br);break;default:throw Error(L(329))}}}return hn(t,Je()),t.callbackNode===n?aC.bind(null,t):null}function Rg(t,e){var n=Xl;return t.current.memoizedState.isDehydrated&&($s(t,e).flags|=256),t=_h(t,e),t!==2&&(e=sn,sn=n,e!==null&&Dg(e)),t}function Dg(t){sn===null?sn=t:sn.push.apply(sn,t)}function wP(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Qn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function vi(t,e){for(e&=~ky,e&=~wf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Kn(e),r=1<<n;t[n]=-1,e&=~r}}function pI(t){if(ye&6)throw Error(L(327));oa();var e=ih(t,0);if(!(e&1))return hn(t,Je()),null;var n=_h(t,e);if(t.tag!==0&&n===2){var r=rg(t);r!==0&&(e=r,n=Rg(t,r))}if(n===1)throw n=bu,$s(t,0),vi(t,e),hn(t,Je()),n;if(n===6)throw Error(L(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ws(t,sn,br),hn(t,Je()),null}function Ny(t,e){var n=ye;ye|=1;try{return t(e)}finally{ye=n,ye===0&&(_a=Je()+500,mf&&ns())}}function Gs(t){Ii!==null&&Ii.tag===0&&!(ye&6)&&oa();var e=ye;ye|=1;var n=Pn.transition,r=Se;try{if(Pn.transition=null,Se=1,t)return t()}finally{Se=r,Pn.transition=n,ye=e,!(ye&6)&&ns()}}function Ay(){gn=Qo.current,Pe(Qo)}function $s(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,QO(n)),at!==null)for(n=at.return;n!==null;){var r=n;switch(cy(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&uh();break;case 3:Ea(),Pe(cn),Pe(zt),wy();break;case 5:yy(r);break;case 4:Ea();break;case 13:Pe(qe);break;case 19:Pe(qe);break;case 10:py(r.type._context);break;case 22:case 23:Ay()}n=n.return}if(wt=t,at=t=Li(t.current,null),At=gn=e,dt=0,bu=null,ky=wf=Ks=0,sn=Xl=null,bs!==null){for(e=0;e<bs.length;e++)if(n=bs[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}bs=null}return t}function lC(t,e){do{var n=at;try{if(fy(),Pd.current=yh,vh){for(var r=We.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}vh=!1}if(Hs=0,vt=ct=We=null,Ql=!1,Cu=0,xy.current=null,n===null||n.return===null){dt=1,bu=e,at=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=At,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=tI(o);if(f!==null){f.flags&=-257,nI(f,o,a,s,e),f.mode&1&&eI(s,u,e),e=f,l=u;var m=e.updateQueue;if(m===null){var w=new Set;w.add(l),e.updateQueue=w}else m.add(l);break e}else{if(!(e&1)){eI(s,u,e),Ry();break e}l=Error(L(426))}}else if(Ue&&a.mode&1){var I=tI(o);if(I!==null){!(I.flags&65536)&&(I.flags|=256),nI(I,o,a,s,e),dy(Ia(l,a));break e}}s=l=Ia(l,a),dt!==4&&(dt=2),Xl===null?Xl=[s]:Xl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=WT(s,l,e);KE(s,y);break e;case 1:a=l;var p=s.type,g=s.stateNode;if(!(s.flags&128)&&(typeof p.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Oi===null||!Oi.has(g)))){s.flags|=65536,e&=-e,s.lanes|=e;var _=HT(s,a,e);KE(s,_);break e}}s=s.return}while(s!==null)}dC(n)}catch(T){e=T,at===n&&n!==null&&(at=n=n.return);continue}break}while(1)}function uC(){var t=wh.current;return wh.current=yh,t===null?yh:t}function Ry(){(dt===0||dt===3||dt===2)&&(dt=4),wt===null||!(Ks&268435455)&&!(wf&268435455)||vi(wt,At)}function _h(t,e){var n=ye;ye|=2;var r=uC();(wt!==t||At!==e)&&(br=null,$s(t,e));do try{EP();break}catch(i){lC(t,i)}while(1);if(fy(),ye=n,wh.current=r,at!==null)throw Error(L(261));return wt=null,At=0,dt}function EP(){for(;at!==null;)cC(at)}function IP(){for(;at!==null&&!HD();)cC(at)}function cC(t){var e=fC(t.alternate,t,gn);t.memoizedProps=t.pendingProps,e===null?dC(t):at=e,xy.current=null}function dC(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=pP(n,e),n!==null){n.flags&=32767,at=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{dt=6,at=null;return}}else if(n=fP(n,e,gn),n!==null){at=n;return}if(e=e.sibling,e!==null){at=e;return}at=e=t}while(e!==null);dt===0&&(dt=5)}function ws(t,e,n){var r=Se,i=Pn.transition;try{Pn.transition=null,Se=1,_P(t,e,n,r)}finally{Pn.transition=i,Se=r}return null}function _P(t,e,n,r){do oa();while(Ii!==null);if(ye&6)throw Error(L(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(L(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(nO(t,s),t===wt&&(at=wt=null,At=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||cd||(cd=!0,pC(rh,function(){return oa(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Pn.transition,Pn.transition=null;var o=Se;Se=1;var a=ye;ye|=4,xy.current=null,gP(t,n),sC(n,t),BO(ug),sh=!!lg,ug=lg=null,t.current=n,vP(n),KD(),ye=a,Se=o,Pn.transition=s}else t.current=n;if(cd&&(cd=!1,Ii=t,Ih=i),s=t.pendingLanes,s===0&&(Oi=null),YD(n.stateNode),hn(t,Je()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Eh)throw Eh=!1,t=Ng,Ng=null,t;return Ih&1&&t.tag!==0&&oa(),s=t.pendingLanes,s&1?t===Ag?Jl++:(Jl=0,Ag=t):Jl=0,ns(),null}function oa(){if(Ii!==null){var t=qS(Ih),e=Pn.transition,n=Se;try{if(Pn.transition=null,Se=16>t?16:t,Ii===null)var r=!1;else{if(t=Ii,Ii=null,Ih=0,ye&6)throw Error(L(331));var i=ye;for(ye|=4,K=t.current;K!==null;){var s=K,o=s.child;if(K.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(K=u;K!==null;){var c=K;switch(c.tag){case 0:case 11:case 15:Yl(8,c,s)}var d=c.child;if(d!==null)d.return=c,K=d;else for(;K!==null;){c=K;var h=c.sibling,f=c.return;if(nC(c),c===u){K=null;break}if(h!==null){h.return=f,K=h;break}K=f}}}var m=s.alternate;if(m!==null){var w=m.child;if(w!==null){m.child=null;do{var I=w.sibling;w.sibling=null,w=I}while(w!==null)}}K=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,K=o;else e:for(;K!==null;){if(s=K,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Yl(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,K=y;break e}K=s.return}}var p=t.current;for(K=p;K!==null;){o=K;var g=o.child;if(o.subtreeFlags&2064&&g!==null)g.return=o,K=g;else e:for(o=p;K!==null;){if(a=K,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:yf(9,a)}}catch(T){Ge(a,a.return,T)}if(a===o){K=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,K=_;break e}K=a.return}}if(ye=i,ns(),pr&&typeof pr.onPostCommitFiberRoot=="function")try{pr.onPostCommitFiberRoot(cf,t)}catch{}r=!0}return r}finally{Se=n,Pn.transition=e}}return!1}function mI(t,e,n){e=Ia(n,e),e=WT(t,e,1),t=Di(t,e,1),e=Xt(),t!==null&&(dc(t,1,e),hn(t,e))}function Ge(t,e,n){if(t.tag===3)mI(t,t,n);else for(;e!==null;){if(e.tag===3){mI(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Oi===null||!Oi.has(r))){t=Ia(n,t),t=HT(e,t,1),e=Di(e,t,1),t=Xt(),e!==null&&(dc(e,1,t),hn(e,t));break}}e=e.return}}function SP(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Xt(),t.pingedLanes|=t.suspendedLanes&n,wt===t&&(At&n)===n&&(dt===4||dt===3&&(At&130023424)===At&&500>Je()-by?$s(t,0):ky|=n),hn(t,e)}function hC(t,e){e===0&&(t.mode&1?(e=ed,ed<<=1,!(ed&130023424)&&(ed=4194304)):e=1);var n=Xt();t=Wr(t,e),t!==null&&(dc(t,e,n),hn(t,n))}function TP(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),hC(t,n)}function CP(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(L(314))}r!==null&&r.delete(e),hC(t,n)}var fC;fC=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||cn.current)on=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return on=!1,hP(t,e,n);on=!!(t.flags&131072)}else on=!1,Ue&&e.flags&1048576&&gT(e,hh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;$d(t,e),t=e.pendingProps;var i=va(e,zt.current);sa(e,n),i=Iy(null,e,r,t,i,n);var s=_y();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,dn(r)?(s=!0,ch(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,gy(e),i.updater=gf,e.stateNode=i,i._reactInternals=e,yg(e,r,t,n),e=Ig(null,e,r,!0,s,n)):(e.tag=0,Ue&&s&&uy(e),Ht(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch($d(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=kP(r),t=jn(r,t),i){case 0:e=Eg(null,e,r,t,n);break e;case 1:e=sI(null,e,r,t,n);break e;case 11:e=rI(null,e,r,t,n);break e;case 14:e=iI(null,e,r,jn(r.type,t),n);break e}throw Error(L(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:jn(r,i),Eg(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:jn(r,i),sI(t,e,r,i,n);case 3:e:{if(YT(e),t===null)throw Error(L(387));r=e.pendingProps,s=e.memoizedState,i=s.element,ET(t,e),mh(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ia(Error(L(423)),e),e=oI(t,e,r,n,i);break e}else if(r!==i){i=Ia(Error(L(424)),e),e=oI(t,e,r,n,i);break e}else for(yn=Ri(e.stateNode.containerInfo.firstChild),En=e,Ue=!0,zn=null,n=TT(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ya(),r===i){e=Hr(t,e,n);break e}Ht(t,e,r,n)}e=e.child}return e;case 5:return CT(e),t===null&&mg(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,cg(r,i)?o=null:s!==null&&cg(r,s)&&(e.flags|=32),QT(t,e),Ht(t,e,o,n),e.child;case 6:return t===null&&mg(e),null;case 13:return XT(t,e,n);case 4:return vy(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=wa(e,null,r,n):Ht(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:jn(r,i),rI(t,e,r,i,n);case 7:return Ht(t,e,e.pendingProps,n),e.child;case 8:return Ht(t,e,e.pendingProps.children,n),e.child;case 12:return Ht(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,xe(fh,r._currentValue),r._currentValue=o,s!==null)if(Qn(s.value,o)){if(s.children===i.children&&!cn.current){e=Hr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Fr(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),gg(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(L(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),gg(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ht(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,sa(e,n),i=Ln(i),r=r(i),e.flags|=1,Ht(t,e,r,n),e.child;case 14:return r=e.type,i=jn(r,e.pendingProps),i=jn(r.type,i),iI(t,e,r,i,n);case 15:return KT(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:jn(r,i),$d(t,e),e.tag=1,dn(r)?(t=!0,ch(e)):t=!1,sa(e,n),_T(e,r,i),yg(e,r,i,n),Ig(null,e,r,!0,t,n);case 19:return JT(t,e,n);case 22:return GT(t,e,n)}throw Error(L(156,e.tag))};function pC(t,e){return VS(t,e)}function xP(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dn(t,e,n,r){return new xP(t,e,n,r)}function Dy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function kP(t){if(typeof t=="function")return Dy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Xv)return 11;if(t===Jv)return 14}return 2}function Li(t,e){var n=t.alternate;return n===null?(n=Dn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ud(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Dy(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Uo:return Ms(n.children,i,s,e);case Yv:o=8,i|=8;break;case Bm:return t=Dn(12,n,e,i|2),t.elementType=Bm,t.lanes=s,t;case zm:return t=Dn(13,n,e,i),t.elementType=zm,t.lanes=s,t;case qm:return t=Dn(19,n,e,i),t.elementType=qm,t.lanes=s,t;case SS:return Ef(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case IS:o=10;break e;case _S:o=9;break e;case Xv:o=11;break e;case Jv:o=14;break e;case hi:o=16,r=null;break e}throw Error(L(130,t==null?t:typeof t,""))}return e=Dn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ms(t,e,n,r){return t=Dn(7,t,r,e),t.lanes=n,t}function Ef(t,e,n,r){return t=Dn(22,t,r,e),t.elementType=SS,t.lanes=n,t.stateNode={isHidden:!1},t}function Zp(t,e,n){return t=Dn(6,t,null,e),t.lanes=n,t}function em(t,e,n){return e=Dn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function bP(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pp(0),this.expirationTimes=Pp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pp(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Oy(t,e,n,r,i,s,o,a,l){return t=new bP(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Dn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},gy(s),t}function NP(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function mC(t){if(!t)return Ui;t=t._reactInternals;e:{if(fo(t)!==t||t.tag!==1)throw Error(L(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(dn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(L(171))}if(t.tag===1){var n=t.type;if(dn(n))return pT(t,n,e)}return e}function gC(t,e,n,r,i,s,o,a,l){return t=Oy(n,r,!0,t,i,s,o,a,l),t.context=mC(null),n=t.current,r=Xt(),i=Pi(n),s=Fr(r,i),s.callback=e??null,Di(n,s,i),t.current.lanes=i,dc(t,i,r),hn(t,r),t}function If(t,e,n,r){var i=e.current,s=Xt(),o=Pi(i);return n=mC(n),e.context===null?e.context=n:e.pendingContext=n,e=Fr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Di(i,e,o),t!==null&&(Gn(t,i,o,s),Od(t,i,o)),o}function Sh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function gI(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Py(t,e){gI(t,e),(t=t.alternate)&&gI(t,e)}function AP(){return null}var vC=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ly(t){this._internalRoot=t}_f.prototype.render=Ly.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(L(409));If(t,e,null,null)};_f.prototype.unmount=Ly.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Gs(function(){If(null,t,null,null)}),e[qr]=null}};function _f(t){this._internalRoot=t}_f.prototype.unstable_scheduleHydration=function(t){if(t){var e=KS();t={blockedOn:null,target:t,priority:e};for(var n=0;n<gi.length&&e!==0&&e<gi[n].priority;n++);gi.splice(n,0,t),n===0&&QS(t)}};function $y(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Sf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function vI(){}function RP(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Sh(o);s.call(u)}}var o=gC(e,r,t,0,null,!1,!1,"",vI);return t._reactRootContainer=o,t[qr]=o.current,Eu(t.nodeType===8?t.parentNode:t),Gs(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Sh(l);a.call(u)}}var l=Oy(t,0,!1,null,null,!1,!1,"",vI);return t._reactRootContainer=l,t[qr]=l.current,Eu(t.nodeType===8?t.parentNode:t),Gs(function(){If(e,l,n,r)}),l}function Tf(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Sh(o);a.call(l)}}If(e,o,t,i)}else o=RP(n,e,t,i,r);return Sh(o)}WS=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Pl(e.pendingLanes);n!==0&&(ty(e,n|1),hn(e,Je()),!(ye&6)&&(_a=Je()+500,ns()))}break;case 13:Gs(function(){var r=Wr(t,1);if(r!==null){var i=Xt();Gn(r,t,1,i)}}),Py(t,1)}};ny=function(t){if(t.tag===13){var e=Wr(t,134217728);if(e!==null){var n=Xt();Gn(e,t,134217728,n)}Py(t,134217728)}};HS=function(t){if(t.tag===13){var e=Pi(t),n=Wr(t,e);if(n!==null){var r=Xt();Gn(n,t,e,r)}Py(t,e)}};KS=function(){return Se};GS=function(t,e){var n=Se;try{return Se=t,e()}finally{Se=n}};eg=function(t,e,n){switch(e){case"input":if(Km(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=pf(r);if(!i)throw Error(L(90));CS(r),Km(r,i)}}}break;case"textarea":kS(t,n);break;case"select":e=n.value,e!=null&&ta(t,!!n.multiple,e,!1)}};PS=Ny;LS=Gs;var DP={usingClientEntryPoint:!1,Events:[fc,zo,pf,DS,OS,Ny]},vl={findFiberByHostInstance:ks,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},OP={bundleType:vl.bundleType,version:vl.version,rendererPackageName:vl.rendererPackageName,rendererConfig:vl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Jr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=FS(t),t===null?null:t.stateNode},findFiberByHostInstance:vl.findFiberByHostInstance||AP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dd.isDisabled&&dd.supportsFiber)try{cf=dd.inject(OP),pr=dd}catch{}}Cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=DP;Cn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$y(e))throw Error(L(200));return NP(t,e,null,n)};Cn.createRoot=function(t,e){if(!$y(t))throw Error(L(299));var n=!1,r="",i=vC;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Oy(t,1,!1,null,null,n,!1,r,i),t[qr]=e.current,Eu(t.nodeType===8?t.parentNode:t),new Ly(e)};Cn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(L(188)):(t=Object.keys(t).join(","),Error(L(268,t)));return t=FS(e),t=t===null?null:t.stateNode,t};Cn.flushSync=function(t){return Gs(t)};Cn.hydrate=function(t,e,n){if(!Sf(e))throw Error(L(200));return Tf(null,t,e,!0,n)};Cn.hydrateRoot=function(t,e,n){if(!$y(t))throw Error(L(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=vC;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=gC(e,null,t,1,n??null,i,!1,s,o),t[qr]=e.current,Eu(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new _f(e)};Cn.render=function(t,e,n){if(!Sf(e))throw Error(L(200));return Tf(null,t,e,!1,n)};Cn.unmountComponentAtNode=function(t){if(!Sf(t))throw Error(L(40));return t._reactRootContainer?(Gs(function(){Tf(null,null,t,!1,function(){t._reactRootContainer=null,t[qr]=null})}),!0):!1};Cn.unstable_batchedUpdates=Ny;Cn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Sf(n))throw Error(L(200));if(t==null||t._reactInternals===void 0)throw Error(L(38));return Tf(t,e,n,!1,r)};Cn.version="18.2.0-next-9e3b772b8-20220608";function yC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(yC)}catch(t){console.error(t)}}yC(),gS.exports=Cn;var wC=gS.exports;const Yo=uc(wC);var yI=wC;Vm.createRoot=yI.createRoot,Vm.hydrateRoot=yI.hydrateRoot;function PP(){const[t,e]=v.useState(0),n=()=>{e(t+1)},r=()=>{e(t-1)};return E.jsxs("div",{children:[E.jsx("button",{onClick:n,children:"Incrementar"}),E.jsxs("p",{children:["Cantidad: ",t]}),E.jsx("button",{onClick:r,children:"Decrementar"})]})}/**
 * @remix-run/router v1.6.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nu(){return Nu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nu.apply(this,arguments)}var _i;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(_i||(_i={}));const wI="popstate";function LP(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return Og("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Th(i)}return MP(e,n,null,t)}function lt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function My(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function $P(){return Math.random().toString(36).substr(2,8)}function EI(t,e){return{usr:t.state,key:t.key,idx:e}}function Og(t,e,n,r){return n===void 0&&(n=null),Nu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Wa(e):e,{state:n,key:e&&e.key||r||$P()})}function Th(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Wa(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function MP(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=_i.Pop,l=null,u=c();u==null&&(u=0,o.replaceState(Nu({},o.state,{idx:u}),""));function c(){return(o.state||{idx:null}).idx}function d(){a=_i.Pop;let I=c(),y=I==null?null:I-u;u=I,l&&l({action:a,location:w.location,delta:y})}function h(I,y){a=_i.Push;let p=Og(w.location,I,y);n&&n(p,I),u=c()+1;let g=EI(p,u),_=w.createHref(p);try{o.pushState(g,"",_)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;i.location.assign(_)}s&&l&&l({action:a,location:w.location,delta:1})}function f(I,y){a=_i.Replace;let p=Og(w.location,I,y);n&&n(p,I),u=c();let g=EI(p,u),_=w.createHref(p);o.replaceState(g,"",_),s&&l&&l({action:a,location:w.location,delta:0})}function m(I){let y=i.location.origin!=="null"?i.location.origin:i.location.href,p=typeof I=="string"?I:Th(I);return lt(y,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,y)}let w={get action(){return a},get location(){return t(i,o)},listen(I){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(wI,d),l=I,()=>{i.removeEventListener(wI,d),l=null}},createHref(I){return e(i,I)},createURL:m,encodeLocation(I){let y=m(I);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:f,go(I){return o.go(I)}};return w}var II;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(II||(II={}));function FP(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?Wa(e):e,i=Fy(r.pathname||"/",n);if(i==null)return null;let s=EC(t);UP(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=GP(s[a],XP(i));return o}function EC(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(lt(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=$i([r,l.relativePath]),c=n.concat(l);s.children&&s.children.length>0&&(lt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),EC(s.children,e,c,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:HP(u,s.index),routesMeta:c})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of IC(s.path))i(s,o,l)}),e}function IC(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=IC(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function UP(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:KP(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const VP=/^:\w+$/,jP=3,BP=2,zP=1,qP=10,WP=-2,_I=t=>t==="*";function HP(t,e){let n=t.split("/"),r=n.length;return n.some(_I)&&(r+=WP),e&&(r+=BP),n.filter(i=>!_I(i)).reduce((i,s)=>i+(VP.test(s)?jP:s===""?zP:qP),r)}function KP(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function GP(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,u=i==="/"?e:e.slice(i.length)||"/",c=QP({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},u);if(!c)return null;Object.assign(r,c.params);let d=a.route;s.push({params:r,pathname:$i([i,c.pathname]),pathnameBase:tL($i([i,c.pathnameBase])),route:d}),c.pathnameBase!=="/"&&(i=$i([i,c.pathnameBase]))}return s}function QP(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=YP(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,c,d)=>{if(c==="*"){let h=a[d]||"";o=s.slice(0,s.length-h.length).replace(/(.)\/+$/,"$1")}return u[c]=JP(a[d]||"",c),u},{}),pathname:s,pathnameBase:o,pattern:t}}function YP(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),My(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,a)=>(r.push(a),"/([^\\/]+)"));return t.endsWith("*")?(r.push("*"),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function XP(t){try{return decodeURI(t)}catch(e){return My(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function JP(t,e){try{return decodeURIComponent(t)}catch(n){return My(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function Fy(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function ZP(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Wa(t):t;return{pathname:n?n.startsWith("/")?n:eL(n,e):e,search:nL(r),hash:rL(i)}}function eL(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function tm(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function _C(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function SC(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Wa(t):(i=Nu({},t),lt(!i.pathname||!i.pathname.includes("?"),tm("?","pathname","search",i)),lt(!i.pathname||!i.pathname.includes("#"),tm("#","pathname","hash",i)),lt(!i.search||!i.search.includes("#"),tm("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(r||o==null)a=n;else{let d=e.length-1;if(o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;i.pathname=h.join("/")}a=d>=0?e[d]:"/"}let l=ZP(i,a),u=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const $i=t=>t.join("/").replace(/\/\/+/g,"/"),tL=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),nL=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,rL=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function iL(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const TC=["post","put","patch","delete"];new Set(TC);const sL=["get",...TC];new Set(sL);/**
 * React Router v6.12.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ch(){return Ch=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ch.apply(this,arguments)}const Uy=v.createContext(null),oL=v.createContext(null),Ha=v.createContext(null),Cf=v.createContext(null),rs=v.createContext({outlet:null,matches:[],isDataRoute:!1}),CC=v.createContext(null);function aL(t,e){let{relative:n}=e===void 0?{}:e;mc()||lt(!1);let{basename:r,navigator:i}=v.useContext(Ha),{hash:s,pathname:o,search:a}=NC(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:$i([r,o])),i.createHref({pathname:l,search:a,hash:s})}function mc(){return v.useContext(Cf)!=null}function xf(){return mc()||lt(!1),v.useContext(Cf).location}function xC(t){v.useContext(Ha).static||v.useLayoutEffect(t)}function kC(){let{isDataRoute:t}=v.useContext(rs);return t?EL():lL()}function lL(){mc()||lt(!1);let t=v.useContext(Uy),{basename:e,navigator:n}=v.useContext(Ha),{matches:r}=v.useContext(rs),{pathname:i}=xf(),s=JSON.stringify(_C(r).map(l=>l.pathnameBase)),o=v.useRef(!1);return xC(()=>{o.current=!0}),v.useCallback(function(l,u){if(u===void 0&&(u={}),!o.current)return;if(typeof l=="number"){n.go(l);return}let c=SC(l,JSON.parse(s),i,u.relative==="path");t==null&&e!=="/"&&(c.pathname=c.pathname==="/"?e:$i([e,c.pathname])),(u.replace?n.replace:n.push)(c,u.state,u)},[e,n,s,i,t])}function bC(){let{matches:t}=v.useContext(rs),e=t[t.length-1];return e?e.params:{}}function NC(t,e){let{relative:n}=e===void 0?{}:e,{matches:r}=v.useContext(rs),{pathname:i}=xf(),s=JSON.stringify(_C(r).map(o=>o.pathnameBase));return v.useMemo(()=>SC(t,JSON.parse(s),i,n==="path"),[t,s,i,n])}function uL(t,e){return cL(t,e)}function cL(t,e,n){mc()||lt(!1);let{navigator:r}=v.useContext(Ha),{matches:i}=v.useContext(rs),s=i[i.length-1],o=s?s.params:{};s&&s.pathname;let a=s?s.pathnameBase:"/";s&&s.route;let l=xf(),u;if(e){var c;let w=typeof e=="string"?Wa(e):e;a==="/"||(c=w.pathname)!=null&&c.startsWith(a)||lt(!1),u=w}else u=l;let d=u.pathname||"/",h=a==="/"?d:d.slice(a.length)||"/",f=FP(t,{pathname:h}),m=mL(f&&f.map(w=>Object.assign({},w,{params:Object.assign({},o,w.params),pathname:$i([a,r.encodeLocation?r.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?a:$i([a,r.encodeLocation?r.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,n);return e&&m?v.createElement(Cf.Provider,{value:{location:Ch({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:_i.Pop}},m):m}function dL(){let t=wL(),e=iL(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},e),n?v.createElement("pre",{style:i},n):null,s)}const hL=v.createElement(dL,null);class fL extends v.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?v.createElement(rs.Provider,{value:this.props.routeContext},v.createElement(CC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function pL(t){let{routeContext:e,match:n,children:r}=t,i=v.useContext(Uy);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),v.createElement(rs.Provider,{value:e},r)}function mL(t,e,n){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),t==null){var i;if((i=n)!=null&&i.errors)t=n.matches;else return null}let s=t,o=(r=n)==null?void 0:r.errors;if(o!=null){let a=s.findIndex(l=>l.route.id&&(o==null?void 0:o[l.route.id]));a>=0||lt(!1),s=s.slice(0,Math.min(s.length,a+1))}return s.reduceRight((a,l,u)=>{let c=l.route.id?o==null?void 0:o[l.route.id]:null,d=null;n&&(d=l.route.errorElement||hL);let h=e.concat(s.slice(0,u+1)),f=()=>{let m;return c?m=d:l.route.Component?m=v.createElement(l.route.Component,null):l.route.element?m=l.route.element:m=a,v.createElement(pL,{match:l,routeContext:{outlet:a,matches:h,isDataRoute:n!=null},children:m})};return n&&(l.route.ErrorBoundary||l.route.errorElement||u===0)?v.createElement(fL,{location:n.location,revalidation:n.revalidation,component:d,error:c,children:f(),routeContext:{outlet:null,matches:h,isDataRoute:!0}}):f()},null)}var Pg;(function(t){t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate"})(Pg||(Pg={}));var Au;(function(t){t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId"})(Au||(Au={}));function gL(t){let e=v.useContext(Uy);return e||lt(!1),e}function vL(t){let e=v.useContext(oL);return e||lt(!1),e}function yL(t){let e=v.useContext(rs);return e||lt(!1),e}function AC(t){let e=yL(),n=e.matches[e.matches.length-1];return n.route.id||lt(!1),n.route.id}function wL(){var t;let e=v.useContext(CC),n=vL(Au.UseRouteError),r=AC(Au.UseRouteError);return e||((t=n.errors)==null?void 0:t[r])}function EL(){let{router:t}=gL(Pg.UseNavigateStable),e=AC(Au.UseNavigateStable),n=v.useRef(!1);return xC(()=>{n.current=!0}),v.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Ch({fromRouteId:e},s)))},[t,e])}function kr(t){lt(!1)}function IL(t){let{basename:e="/",children:n=null,location:r,navigationType:i=_i.Pop,navigator:s,static:o=!1}=t;mc()&&lt(!1);let a=e.replace(/^\/*/,"/"),l=v.useMemo(()=>({basename:a,navigator:s,static:o}),[a,s,o]);typeof r=="string"&&(r=Wa(r));let{pathname:u="/",search:c="",hash:d="",state:h=null,key:f="default"}=r,m=v.useMemo(()=>{let w=Fy(u,a);return w==null?null:{location:{pathname:w,search:c,hash:d,state:h,key:f},navigationType:i}},[a,u,c,d,h,f,i]);return m==null?null:v.createElement(Ha.Provider,{value:l},v.createElement(Cf.Provider,{children:n,value:m}))}function _L(t){let{children:e,location:n}=t;return uL(Lg(e),n)}var SI;(function(t){t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error"})(SI||(SI={}));new Promise(()=>{});function Lg(t,e){e===void 0&&(e=[]);let n=[];return v.Children.forEach(t,(r,i)=>{if(!v.isValidElement(r))return;let s=[...e,i];if(r.type===v.Fragment){n.push.apply(n,Lg(r.props.children,s));return}r.type!==kr&&lt(!1),!r.props.index||!r.props.children||lt(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Lg(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.12.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $g(){return $g=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$g.apply(this,arguments)}function SL(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function TL(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function CL(t,e){return t.button===0&&(!e||e==="_self")&&!TL(t)}const xL=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],TI="startTransition";function kL(t){let{basename:e,children:n,window:r}=t,i=v.useRef();i.current==null&&(i.current=LP({window:r,v5Compat:!0}));let s=i.current,[o,a]=v.useState({action:s.action,location:s.location}),l=v.useCallback(u=>{TI in hE?hE[TI](()=>a(u)):a(u)},[a]);return v.useLayoutEffect(()=>s.listen(l),[s,l]),v.createElement(IL,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:s})}const bL=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",NL=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pi=v.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:c}=e,d=SL(e,xL),{basename:h}=v.useContext(Ha),f,m=!1;if(typeof u=="string"&&NL.test(u)&&(f=u,bL))try{let p=new URL(window.location.href),g=u.startsWith("//")?new URL(p.protocol+u):new URL(u),_=Fy(g.pathname,h);g.origin===p.origin&&_!=null?u=_+g.search+g.hash:m=!0}catch{}let w=aL(u,{relative:i}),I=AL(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:i});function y(p){r&&r(p),p.defaultPrevented||I(p)}return v.createElement("a",$g({},d,{href:f||w,onClick:m||s?r:y,ref:n,target:l}))});var CI;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmitImpl="useSubmitImpl",t.UseFetcher="useFetcher"})(CI||(CI={}));var xI;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(xI||(xI={}));function AL(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o}=e===void 0?{}:e,a=kC(),l=xf(),u=NC(t,{relative:o});return v.useCallback(c=>{if(CL(c,n)){c.preventDefault();let d=r!==void 0?r:Th(l)===Th(u);a(t,{replace:d,state:i,preventScrollReset:s,relative:o})}},[l,a,u,r,i,n,t,s,o])}var RC={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var r=[],i=0;i<arguments.length;i++){var s=arguments[i];if(s){var o=typeof s;if(o==="string"||o==="number")r.push(s);else if(Array.isArray(s)){if(s.length){var a=n.apply(null,s);a&&r.push(a)}}else if(o==="object"){if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]")){r.push(s.toString());continue}for(var l in s)e.call(s,l)&&s[l]&&r.push(l)}}}return r.join(" ")}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(RC);var RL=RC.exports;const le=uc(RL),DL=["as","disabled"];function OL(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function PL(t){return!t||t.trim()==="#"}function Vy({tagName:t,disabled:e,href:n,target:r,rel:i,role:s,onClick:o,tabIndex:a=0,type:l}){t||(n!=null||r!=null||i!=null?t="a":t="button");const u={tagName:t};if(t==="button")return[{type:l||"button",disabled:e},u];const c=h=>{if((e||t==="a"&&PL(n))&&h.preventDefault(),e){h.stopPropagation();return}o==null||o(h)},d=h=>{h.key===" "&&(h.preventDefault(),c(h))};return t==="a"&&(n||(n="#"),e&&(n=void 0)),[{role:s??"button",disabled:void 0,tabIndex:e?void 0:a,href:n,target:t==="a"?r:void 0,"aria-disabled":e||void 0,rel:t==="a"?i:void 0,onClick:c,onKeyDown:d},u]}const jy=v.forwardRef((t,e)=>{let{as:n,disabled:r}=t,i=OL(t,DL);const[s,{tagName:o}]=Vy(Object.assign({tagName:n,disabled:r},i));return E.jsx(o,Object.assign({},i,s,{ref:e}))});jy.displayName="Button";const LL=["xxl","xl","lg","md","sm","xs"],$L="xs",kf=v.createContext({prefixes:{},breakpoints:LL,minBreakpoint:$L});function ve(t,e){const{prefixes:n}=v.useContext(kf);return t||n[e]||e}function DC(){const{breakpoints:t}=v.useContext(kf);return t}function OC(){const{minBreakpoint:t}=v.useContext(kf);return t}function ML(){const{dir:t}=v.useContext(kf);return t==="rtl"}const PC=v.forwardRef(({as:t,bsPrefix:e,variant:n="primary",size:r,active:i=!1,disabled:s=!1,className:o,...a},l)=>{const u=ve(e,"btn"),[c,{tagName:d}]=Vy({tagName:t,disabled:s,...a}),h=d;return E.jsx(h,{...c,...a,ref:l,disabled:s,className:le(o,u,i&&"active",n&&`${u}-${n}`,r&&`${u}-${r}`,a.href&&s&&"disabled")})});PC.displayName="Button";const Qs=PC;var FL=/-(.)/g;function UL(t){return t.replace(FL,function(e,n){return n.toUpperCase()})}const VL=t=>t[0].toUpperCase()+UL(t).slice(1);function $t(t,{displayName:e=VL(t),Component:n,defaultProps:r}={}){const i=v.forwardRef(({className:s,bsPrefix:o,as:a=n||"div",...l},u)=>{const c={...r,...l},d=ve(o,t);return E.jsx(a,{ref:u,className:le(s,d),...c})});return i.displayName=e,i}const bf=t=>v.forwardRef((e,n)=>E.jsx("div",{...e,ref:n,className:le(e.className,t)})),LC=v.forwardRef(({bsPrefix:t,className:e,variant:n,as:r="img",...i},s)=>{const o=ve(t,"card-img");return E.jsx(r,{ref:s,className:le(n?`${o}-${n}`:o,e),...i})});LC.displayName="CardImg";const jL=LC,$C=v.createContext(null);$C.displayName="CardHeaderContext";const MC=$C,FC=v.forwardRef(({bsPrefix:t,className:e,as:n="div",...r},i)=>{const s=ve(t,"card-header"),o=v.useMemo(()=>({cardHeaderBsPrefix:s}),[s]);return E.jsx(MC.Provider,{value:o,children:E.jsx(n,{ref:i,...r,className:le(e,s)})})});FC.displayName="CardHeader";const BL=FC,zL=bf("h5"),qL=bf("h6"),UC=$t("card-body"),WL=$t("card-title",{Component:zL}),HL=$t("card-subtitle",{Component:qL}),KL=$t("card-link",{Component:"a"}),GL=$t("card-text",{Component:"p"}),QL=$t("card-footer"),YL=$t("card-img-overlay"),VC=v.forwardRef(({bsPrefix:t,className:e,bg:n,text:r,border:i,body:s=!1,children:o,as:a="div",...l},u)=>{const c=ve(t,"card");return E.jsx(a,{ref:u,...l,className:le(e,c,n&&`bg-${n}`,r&&`text-${r}`,i&&`border-${i}`),children:s?E.jsx(UC,{children:o}):o})});VC.displayName="Card";const xo=Object.assign(VC,{Img:jL,Title:WL,Subtitle:HL,Body:UC,Link:KL,Text:GL,Header:BL,Footer:QL,ImgOverlay:YL});function XL({as:t,bsPrefix:e,className:n,...r}){e=ve(e,"col");const i=DC(),s=OC(),o=[],a=[];return i.forEach(l=>{const u=r[l];delete r[l];let c,d,h;typeof u=="object"&&u!=null?{span:c,offset:d,order:h}=u:c=u;const f=l!==s?`-${l}`:"";c&&o.push(c===!0?`${e}${f}`:`${e}${f}-${c}`),h!=null&&a.push(`order${f}-${h}`),d!=null&&a.push(`offset${f}-${d}`)}),[{...r,className:le(n,...o,...a)},{as:t,bsPrefix:e,spans:o}]}const jC=v.forwardRef((t,e)=>{const[{className:n,...r},{as:i="div",bsPrefix:s,spans:o}]=XL(t);return E.jsx(i,{...r,ref:e,className:le(n,!o.length&&s)})});jC.displayName="Col";const BC=jC,By=Oe.createContext(),JL=({children:t})=>{const[e,n]=v.useState(!!localStorage.getItem("login")),[r,i]=v.useState(localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):{}),s=a=>{n(!0),localStorage.setItem("login","true"),i(a),localStorage.setItem("userInfo",JSON.stringify(a))},o=()=>{n(!1),localStorage.removeItem("login"),i({}),localStorage.removeItem("userInfo")};return E.jsx(By.Provider,{value:{login:e,handleLogin:s,handleLogout:o,userInfo:r},children:t})},zy=()=>v.useContext(By),ZL={card:{marginBottom:"10px",width:"18rem"}};function e$({id:t,price:e,title:n,seller:r,thumbnail:i}){const{login:s}=zy();return E.jsx(BC,{xs:12,sm:6,lg:4,xxl:3,children:E.jsxs(xo,{style:ZL.card,children:[E.jsx(xo.Img,{variant:"top",src:i}),E.jsxs(xo.Body,{children:[E.jsx(xo.Title,{children:n}),E.jsx(xo.Subtitle,{children:e}),E.jsx(xo.Text,{children:r==null?void 0:r.nickname}),E.jsx(Qs,{variant:"primary",as:pi,to:`/producto/${t}`,children:"Ver Detalle"}),s&&E.jsx(Qs,{variant:"primary",as:pi,to:`/productos/modificar/${t}`,children:"Modificar"})]})]})})}const zC=v.forwardRef(({bsPrefix:t,className:e,as:n="div",...r},i)=>{const s=ve(t,"row"),o=DC(),a=OC(),l=`${s}-cols`,u=[];return o.forEach(c=>{const d=r[c];delete r[c];let h;d!=null&&typeof d=="object"?{cols:h}=d:h=d;const f=c!==a?`-${c}`:"";h!=null&&u.push(`${l}${f}-${h}`)}),E.jsx(n,{ref:i,...r,className:le(e,s,...u)})});zC.displayName="Row";const t$=zC;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},n$=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},WC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,c=s>>2,d=(s&3)<<4|a>>4;let h=(a&15)<<2|u>>6,f=u&63;l||(f=64,o||(h=64)),r.push(n[c],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(qC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):n$(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||d==null)throw new r$;const h=s<<2|a>>4;if(r.push(h),u!==64){const f=a<<4&240|u>>2;if(r.push(f),d!==64){const m=u<<6&192|d;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class r$ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const i$=function(t){const e=qC(t);return WC.encodeByteArray(e,!0)},xh=function(t){return i$(t).replace(/\./g,"")},HC=function(t){try{return WC.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function kh(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!s$(n)||(t[n]=kh(t[n],e[n]));return t}function s$(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o$(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a$=()=>o$().__FIREBASE_DEFAULTS__,l$=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},u$=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&HC(t[1]);return e&&JSON.parse(e)},qy=()=>{try{return a$()||l$()||u$()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},KC=()=>{var t;return(t=qy())===null||t===void 0?void 0:t.config},c$=t=>{var e;return(e=qy())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d${constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h$(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[xh(JSON.stringify(n)),xh(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ke(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function f$(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ke())}function Wy(){var t;const e=(t=qy())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function p$(){return typeof self=="object"&&self.self===self}function GC(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Hy(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function QC(){const t=Ke();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function m$(){return!Wy()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ru(){try{return typeof indexedDB=="object"}catch{return!1}}function g$(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v$="FirebaseError";class Jt extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=v$,Object.setPrototypeOf(this,Jt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,po.prototype.create)}}class po{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?y$(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Jt(i,a,r)}}function y$(t,e){return t.replace(w$,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const w$=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kI(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function E$(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Mg(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(bI(s)&&bI(o)){if(!Mg(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function bI(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ka(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Xo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function $l(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function YC(t,e){const n=new I$(t,e);return n.subscribe.bind(n)}class I${constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");_$(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=nm),i.error===void 0&&(i.error=nm),i.complete===void 0&&(i.complete=nm);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function _$(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function nm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(t){return t&&t._delegate?t._delegate:t}class Ir{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S${constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new d$;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(C$(e))try{this.getOrInitializeService({instanceIdentifier:Es})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Es){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Es){return this.instances.has(e)}getOptions(e=Es){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:T$(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Es){return this.component?this.component.multipleInstances?e:Es:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function T$(t){return t===Es?void 0:t}function C$(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x${constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new S$(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ky=[];var me;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(me||(me={}));const XC={debug:me.DEBUG,verbose:me.VERBOSE,info:me.INFO,warn:me.WARN,error:me.ERROR,silent:me.SILENT},k$=me.INFO,b$={[me.DEBUG]:"log",[me.VERBOSE]:"log",[me.INFO]:"info",[me.WARN]:"warn",[me.ERROR]:"error"},N$=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=b$[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Nf{constructor(e){this.name=e,this._logLevel=k$,this._logHandler=N$,this._userLogHandler=null,Ky.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?XC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,me.DEBUG,...e),this._logHandler(this,me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,me.VERBOSE,...e),this._logHandler(this,me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,me.INFO,...e),this._logHandler(this,me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,me.WARN,...e),this._logHandler(this,me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,me.ERROR,...e),this._logHandler(this,me.ERROR,...e)}}function A$(t){Ky.forEach(e=>{e.setLogLevel(t)})}function R$(t,e){for(const n of Ky){let r=null;e&&e.level&&(r=XC[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,s,...o)=>{const a=o.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");s>=(r??i.logLevel)&&t({level:me[s].toLowerCase(),message:a,args:o,type:i.name})}}}const D$=(t,e)=>e.some(n=>t instanceof n);let NI,AI;function O$(){return NI||(NI=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function P$(){return AI||(AI=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const JC=new WeakMap,Fg=new WeakMap,ZC=new WeakMap,rm=new WeakMap,Gy=new WeakMap;function L$(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Mi(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&JC.set(n,t)}).catch(()=>{}),Gy.set(e,t),e}function $$(t){if(Fg.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Fg.set(t,e)}let Ug={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Fg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ZC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Mi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function M$(t){Ug=t(Ug)}function F$(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(im(this),e,...n);return ZC.set(r,e.sort?e.sort():[e]),Mi(r)}:P$().includes(t)?function(...e){return t.apply(im(this),e),Mi(JC.get(this))}:function(...e){return Mi(t.apply(im(this),e))}}function U$(t){return typeof t=="function"?F$(t):(t instanceof IDBTransaction&&$$(t),D$(t,O$())?new Proxy(t,Ug):t)}function Mi(t){if(t instanceof IDBRequest)return L$(t);if(rm.has(t))return rm.get(t);const e=U$(t);return e!==t&&(rm.set(t,e),Gy.set(e,t)),e}const im=t=>Gy.get(t);function V$(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Mi(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Mi(o.result),l.oldVersion,l.newVersion,Mi(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const j$=["get","getKey","getAll","getAllKeys","count"],B$=["put","add","delete","clear"],sm=new Map;function RI(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(sm.get(e))return sm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=B$.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||j$.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return sm.set(e,s),s}M$(t=>({...t,get:(e,n,r)=>RI(e,n)||t.get(e,n,r),has:(e,n)=>!!RI(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z${constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(q$(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function q$(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Vg="@firebase/app",DI="0.9.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys=new Nf("@firebase/app"),W$="@firebase/app-compat",H$="@firebase/analytics-compat",K$="@firebase/analytics",G$="@firebase/app-check-compat",Q$="@firebase/app-check",Y$="@firebase/auth",X$="@firebase/auth-compat",J$="@firebase/database",Z$="@firebase/database-compat",eM="@firebase/functions",tM="@firebase/functions-compat",nM="@firebase/installations",rM="@firebase/installations-compat",iM="@firebase/messaging",sM="@firebase/messaging-compat",oM="@firebase/performance",aM="@firebase/performance-compat",lM="@firebase/remote-config",uM="@firebase/remote-config-compat",cM="@firebase/storage",dM="@firebase/storage-compat",hM="@firebase/firestore",fM="@firebase/firestore-compat",pM="firebase",mM="9.23.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi="[DEFAULT]",gM={[Vg]:"fire-core",[W$]:"fire-core-compat",[K$]:"fire-analytics",[H$]:"fire-analytics-compat",[Q$]:"fire-app-check",[G$]:"fire-app-check-compat",[Y$]:"fire-auth",[X$]:"fire-auth-compat",[J$]:"fire-rtdb",[Z$]:"fire-rtdb-compat",[eM]:"fire-fn",[tM]:"fire-fn-compat",[nM]:"fire-iid",[rM]:"fire-iid-compat",[iM]:"fire-fcm",[sM]:"fire-fcm-compat",[oM]:"fire-perf",[aM]:"fire-perf-compat",[lM]:"fire-rc",[uM]:"fire-rc-compat",[cM]:"fire-gcs",[dM]:"fire-gcs-compat",[hM]:"fire-fst",[fM]:"fire-fst-compat","fire-js":"fire-js",[pM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ji=new Map,Du=new Map;function bh(t,e){try{t.container.addComponent(e)}catch(n){Ys.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ex(t,e){t.container.addOrOverwriteComponent(e)}function Bi(t){const e=t.name;if(Du.has(e))return Ys.debug(`There were multiple attempts to register component ${e}.`),!1;Du.set(e,t);for(const n of ji.values())bh(n,t);return!0}function tx(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function vM(t,e,n=Vi){tx(t,e).clearInstance(n)}function yM(){Du.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wM={["no-app"]:"No Firebase App '{$appName}' has been created - call initializeApp() first",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Ur=new po("app","Firebase",wM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let EM=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ir("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ur.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const is=mM;function Qy(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Vi,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ur.create("bad-app-name",{appName:String(i)});if(n||(n=KC()),!n)throw Ur.create("no-options");const s=ji.get(i);if(s){if(Mg(n,s.options)&&Mg(r,s.config))return s;throw Ur.create("duplicate-app",{appName:i})}const o=new x$(i);for(const l of Du.values())o.addComponent(l);const a=new EM(n,r,o);return ji.set(i,a),a}function IM(t=Vi){const e=ji.get(t);if(!e&&t===Vi&&KC())return Qy();if(!e)throw Ur.create("no-app",{appName:t});return e}function _M(){return Array.from(ji.values())}async function nx(t){const e=t.name;ji.has(e)&&(ji.delete(e),await Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)}function gr(t,e,n){var r;let i=(r=gM[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ys.warn(a.join(" "));return}Bi(new Ir(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function rx(t,e){if(t!==null&&typeof t!="function")throw Ur.create("invalid-log-argument");R$(t,e)}function ix(t){A$(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SM="firebase-heartbeat-database",TM=1,Ou="firebase-heartbeat-store";let om=null;function sx(){return om||(om=V$(SM,TM,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ou)}}}).catch(t=>{throw Ur.create("idb-open",{originalErrorMessage:t.message})})),om}async function CM(t){try{return await(await sx()).transaction(Ou).objectStore(Ou).get(ox(t))}catch(e){if(e instanceof Jt)Ys.warn(e.message);else{const n=Ur.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ys.warn(n.message)}}}async function OI(t,e){try{const r=(await sx()).transaction(Ou,"readwrite");await r.objectStore(Ou).put(e,ox(t)),await r.done}catch(n){if(n instanceof Jt)Ys.warn(n.message);else{const r=Ur.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ys.warn(r.message)}}}function ox(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xM=1024,kM=30*24*60*60*1e3;class bM{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new AM(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=PI();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const s=new Date(i.date).valueOf();return Date.now()-s<=kM}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=PI(),{heartbeatsToSend:n,unsentEntries:r}=NM(this._heartbeatsCache.heartbeats),i=xh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function PI(){return new Date().toISOString().substring(0,10)}function NM(t,e=xM){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),LI(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),LI(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class AM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ru()?g$().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await CM(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return OI(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return OI(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function LI(t){return xh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RM(t){Bi(new Ir("platform-logger",e=>new z$(e),"PRIVATE")),Bi(new Ir("heartbeat",e=>new bM(e),"PRIVATE")),gr(Vg,DI,t),gr(Vg,DI,"esm2017"),gr("fire-js","")}RM("");const DM=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Jt,SDK_VERSION:is,_DEFAULT_ENTRY_NAME:Vi,_addComponent:bh,_addOrOverwriteComponent:ex,_apps:ji,_clearComponents:yM,_components:Du,_getProvider:tx,_registerComponent:Bi,_removeServiceInstance:vM,deleteApp:nx,getApp:IM,getApps:_M,initializeApp:Qy,onLog:rx,registerVersion:gr,setLogLevel:ix},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{constructor(e,n){this._delegate=e,this.firebase=n,bh(e,new Ir("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),nx(this._delegate)))}_getService(e,n=Vi){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=Vi){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){bh(this._delegate,e)}_addOrOverwriteComponent(e){ex(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PM={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance."},$I=new po("app-compat","Firebase",PM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LM(t){const e={},n={__esModule:!0,initializeApp:s,app:i,registerVersion:gr,setLogLevel:ix,onLog:rx,apps:null,SDK_VERSION:is,INTERNAL:{registerComponent:a,removeApp:r,useAsService:l,modularAPIs:DM}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(u){delete e[u]}function i(u){if(u=u||Vi,!kI(e,u))throw $I.create("no-app",{appName:u});return e[u]}i.App=t;function s(u,c={}){const d=Qy(u,c);if(kI(e,d.name))return e[d.name];const h=new t(d,n);return e[d.name]=h,h}function o(){return Object.keys(e).map(u=>e[u])}function a(u){const c=u.name,d=c.replace("-compat","");if(Bi(u)&&u.type==="PUBLIC"){const h=(f=i())=>{if(typeof f[d]!="function")throw $I.create("invalid-app-argument",{appName:c});return f[d]()};u.serviceProps!==void 0&&kh(h,u.serviceProps),n[d]=h,t.prototype[d]=function(...f){return this._getService.bind(this,c).apply(this,u.multipleInstances?f:[])}}return u.type==="PUBLIC"?n[d]:null}function l(u,c){return c==="serverAuth"?null:c}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ax(){const t=LM(OM);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:ax,extendNamespace:e,createSubscribe:YC,ErrorFactory:po,deepExtend:kh});function e(n){kh(t,n)}return t}const $M=ax();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI=new Nf("@firebase/app-compat"),MM="@firebase/app-compat",FM="0.2.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UM(t){gr(MM,FM,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(p$()&&self.firebase!==void 0){MI.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);const t=self.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&MI.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}const qt=$M;UM();var VM="firebase",jM="9.23.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qt.registerVersion(VM,jM,"app-compat");function Yy(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}const yl={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ko={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BM(){return{["admin-restricted-operation"]:"This operation is restricted to administrators only.",["argument-error"]:"",["app-not-authorized"]:"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.",["app-not-installed"]:"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.",["captcha-check-failed"]:"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.",["code-expired"]:"The SMS code has expired. Please re-send the verification code to try again.",["cordova-not-ready"]:"Cordova framework is not ready.",["cors-unsupported"]:"This browser is not supported.",["credential-already-in-use"]:"This credential is already associated with a different user account.",["custom-token-mismatch"]:"The custom token corresponds to a different audience.",["requires-recent-login"]:"This operation is sensitive and requires recent authentication. Log in again before retrying this request.",["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.",["dynamic-link-not-activated"]:"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.",["email-change-needs-verification"]:"Multi-factor users must always have a verified email.",["email-already-in-use"]:"The email address is already in use by another account.",["emulator-config-failed"]:'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',["expired-action-code"]:"The action code has expired.",["cancelled-popup-request"]:"This operation has been cancelled due to another conflicting popup being opened.",["internal-error"]:"An internal AuthError has occurred.",["invalid-app-credential"]:"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.",["invalid-app-id"]:"The mobile app identifier is not registed for the current project.",["invalid-user-token"]:"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.",["invalid-auth-event"]:"An internal AuthError has occurred.",["invalid-verification-code"]:"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.",["invalid-continue-uri"]:"The continue URL provided in the request is invalid.",["invalid-cordova-configuration"]:"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.",["invalid-custom-token"]:"The custom token format is incorrect. Please check the documentation.",["invalid-dynamic-link-domain"]:"The provided dynamic link domain is not configured or authorized for the current project.",["invalid-email"]:"The email address is badly formatted.",["invalid-emulator-scheme"]:"Emulator URL must start with a valid scheme (http:// or https://).",["invalid-api-key"]:"Your API key is invalid, please check you have copied it correctly.",["invalid-cert-hash"]:"The SHA-1 certificate hash provided is invalid.",["invalid-credential"]:"The supplied auth credential is malformed or has expired.",["invalid-message-payload"]:"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-multi-factor-session"]:"The request does not contain a valid proof of first factor successful sign-in.",["invalid-oauth-provider"]:"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.",["invalid-oauth-client-id"]:"The OAuth client ID provided is either invalid or does not match the specified API key.",["unauthorized-domain"]:"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.",["invalid-action-code"]:"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.",["wrong-password"]:"The password is invalid or the user does not have a password.",["invalid-persistence-type"]:"The specified persistence type is invalid. It can only be local, session or none.",["invalid-phone-number"]:"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].",["invalid-provider-id"]:"The specified provider ID is invalid.",["invalid-recipient-email"]:"The email corresponding to this action failed to send as the provided recipient email address is invalid.",["invalid-sender"]:"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-verification-id"]:"The verification ID used to create the phone auth credential is invalid.",["invalid-tenant-id"]:"The Auth instance's tenant ID is invalid.",["login-blocked"]:"Login blocked by user-provided method: {$originalMessage}",["missing-android-pkg-name"]:"An Android Package Name must be provided if the Android App is required to be installed.",["auth-domain-config-required"]:"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.",["missing-app-credential"]:"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.",["missing-verification-code"]:"The phone auth credential was created with an empty SMS verification code.",["missing-continue-uri"]:"A continue URL must be provided in the request.",["missing-iframe-start"]:"An internal AuthError has occurred.",["missing-ios-bundle-id"]:"An iOS Bundle ID must be provided if an App Store ID is provided.",["missing-or-invalid-nonce"]:"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.",["missing-password"]:"A non-empty password must be provided",["missing-multi-factor-info"]:"No second factor identifier is provided.",["missing-multi-factor-session"]:"The request is missing proof of first factor successful sign-in.",["missing-phone-number"]:"To send verification codes, provide a phone number for the recipient.",["missing-verification-id"]:"The phone auth credential was created with an empty verification ID.",["app-deleted"]:"This instance of FirebaseApp has been deleted.",["multi-factor-info-not-found"]:"The user does not have a second factor matching the identifier provided.",["multi-factor-auth-required"]:"Proof of ownership of a second factor is required to complete sign-in.",["account-exists-with-different-credential"]:"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.",["network-request-failed"]:"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.",["no-auth-event"]:"An internal AuthError has occurred.",["no-such-provider"]:"User was not linked to an account with the given provider.",["null-user"]:"A null user object was provided as the argument for an operation which requires a non-null user object.",["operation-not-allowed"]:"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.",["operation-not-supported-in-this-environment"]:'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',["popup-blocked"]:"Unable to establish a connection with the popup. It may have been blocked by the browser.",["popup-closed-by-user"]:"The popup has been closed by the user before finalizing the operation.",["provider-already-linked"]:"User can only be linked to one identity for the given provider.",["quota-exceeded"]:"The project's quota for this operation has been exceeded.",["redirect-cancelled-by-user"]:"The redirect operation has been cancelled by the user before finalizing.",["redirect-operation-pending"]:"A redirect sign-in operation is already pending.",["rejected-credential"]:"The request contains malformed or mismatching credentials.",["second-factor-already-in-use"]:"The second factor is already enrolled on this account.",["maximum-second-factor-count-exceeded"]:"The maximum allowed number of second factors on a user has been exceeded.",["tenant-id-mismatch"]:"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.",["user-token-expired"]:"The user's credential is no longer valid. The user must sign in again.",["too-many-requests"]:"We have blocked all requests from this device due to unusual activity. Try again later.",["unauthorized-continue-uri"]:"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.",["unsupported-first-factor"]:"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.",["unsupported-persistence-type"]:"The current environment does not support the specified persistence type.",["unsupported-tenant-operation"]:"This operation is not supported in a multi-tenant context.",["unverified-email"]:"The operation requires a verified email.",["user-cancelled"]:"The user did not grant your application the permissions it requested.",["user-not-found"]:"There is no user record corresponding to this identifier. The user may have been deleted.",["user-disabled"]:"The user account has been disabled by an administrator.",["user-mismatch"]:"The supplied credentials do not correspond to the previously signed in user.",["user-signed-out"]:"",["weak-password"]:"The password must be 6 characters long or more.",["web-storage-unsupported"]:"This browser is not supported or 3rd party cookies and data may be disabled.",["already-initialized"]:"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.",["missing-recaptcha-token"]:"The reCAPTCHA token is missing when sending request to the backend.",["invalid-recaptcha-token"]:"The reCAPTCHA token is invalid when sending request to the backend.",["invalid-recaptcha-action"]:"The reCAPTCHA action is invalid when sending request to the backend.",["recaptcha-not-enabled"]:"reCAPTCHA Enterprise integration is not enabled for this project.",["missing-client-type"]:"The reCAPTCHA client type is missing when sending request to the backend.",["missing-recaptcha-version"]:"The reCAPTCHA version is missing when sending request to the backend.",["invalid-req-type"]:"Invalid request parameters.",["invalid-recaptcha-version"]:"The reCAPTCHA version is invalid when sending request to the backend."}}function lx(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const zM=BM,qM=lx,ux=new po("auth","Firebase",lx());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nh=new Nf("@firebase/auth");function WM(t,...e){Nh.logLevel<=me.WARN&&Nh.warn(`Auth (${is}): ${t}`,...e)}function Vd(t,...e){Nh.logLevel<=me.ERROR&&Nh.error(`Auth (${is}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(t,...e){throw Xy(t,...e)}function Rt(t,...e){return Xy(t,...e)}function cx(t,e,n){const r=Object.assign(Object.assign({},qM()),{[e]:n});return new po("auth","Firebase",r).create(e,{appName:t.name})}function Ga(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Pt(t,"argument-error"),cx(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Xy(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return ux.create(t,...e)}function $(t,e,...n){if(!t)throw Xy(e,...n)}function lr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Vd(e),new Error(e)}function Yn(t,e){t||lr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pu(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Jy(){return FI()==="http:"||FI()==="https:"}function FI(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Jy()||GC()||"connection"in navigator)?navigator.onLine:!0}function KM(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Yn(n>e,"Short delay should be less than long delay!"),this.isMobile=f$()||Hy()}get(){return HM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zy(t,e){Yn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;lr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;lr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;lr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QM=new gc(3e4,6e4);function ut(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function pt(t,e,n,r,i={}){return hx(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Ka(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),dx.fetch()(fx(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function hx(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},GM),e);try{const i=new YM(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Ml(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ml(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Ml(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Ml(t,"user-disabled",o);const c=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw cx(t,c,u);Pt(t,c)}}catch(i){if(i instanceof Jt)throw i;Pt(t,"network-request-failed",{message:String(i)})}}async function Zr(t,e,n,r,i={}){const s=await pt(t,e,n,r,i);return"mfaPendingCredential"in s&&Pt(t,"multi-factor-auth-required",{_serverResponse:s}),s}function fx(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Zy(t.config,i):`${t.config.apiScheme}://${i}`}class YM{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Rt(this.auth,"network-request-failed")),QM.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ml(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Rt(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XM(t,e){return pt(t,"POST","/v1/accounts:delete",e)}async function JM(t,e){return pt(t,"POST","/v1/accounts:update",e)}async function ZM(t,e){return pt(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function e2(t,e=!1){const n=ne(t),r=await n.getIdToken(e),i=Af(r);$(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Zl(am(i.auth_time)),issuedAtTime:Zl(am(i.iat)),expirationTime:Zl(am(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function am(t){return Number(t)*1e3}function Af(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Vd("JWT malformed, contained fewer than 3 sections"),null;try{const i=HC(n);return i?JSON.parse(i):(Vd("Failed to decode base64 JWT payload"),null)}catch(i){return Vd("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function t2(t){const e=Af(t);return $(e,"internal-error"),$(typeof e.exp<"u","internal-error"),$(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kr(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Jt&&n2(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function n2({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zl(this.lastLoginAt),this.creationTime=Zl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lu(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Kr(t,ZM(n,{idToken:r}));$(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?o2(s.providerUserInfo):[],a=s2(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),c=l?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new px(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,d)}async function i2(t){const e=ne(t);await Lu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function s2(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function o2(t){return t.map(e=>{var{providerId:n}=e,r=Yy(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a2(t,e){const n=await hx(t,{},async()=>{const r=Ka({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=fx(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",dx.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){$(e.idToken,"internal-error"),$(typeof e.idToken<"u","internal-error"),$(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):t2(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return $(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await a2(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new $u;return r&&($(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&($(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&($(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new $u,this.toJSON())}_performRefresh(){return lr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(t,e){$(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Fs{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Yy(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new r2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new px(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Kr(this,this.stsTokenManager.getToken(this.auth,e));return $(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return e2(this,e)}reload(){return i2(this)}_assign(e){this!==e&&($(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Fs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){$(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Lu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Kr(this,XM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,u,c;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(i=n.email)!==null&&i!==void 0?i:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,m=(o=n.photoURL)!==null&&o!==void 0?o:void 0,w=(a=n.tenantId)!==null&&a!==void 0?a:void 0,I=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,y=(u=n.createdAt)!==null&&u!==void 0?u:void 0,p=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:g,emailVerified:_,isAnonymous:T,providerData:C,stsTokenManager:b}=n;$(g&&b,e,"internal-error");const A=$u.fromJSON(this.name,b);$(typeof g=="string",e,"internal-error"),ai(d,e.name),ai(h,e.name),$(typeof _=="boolean",e,"internal-error"),$(typeof T=="boolean",e,"internal-error"),ai(f,e.name),ai(m,e.name),ai(w,e.name),ai(I,e.name),ai(y,e.name),ai(p,e.name);const W=new Fs({uid:g,auth:e,email:h,emailVerified:_,displayName:d,isAnonymous:T,photoURL:m,phoneNumber:f,tenantId:w,stsTokenManager:A,createdAt:y,lastLoginAt:p});return C&&Array.isArray(C)&&(W.providerData=C.map(j=>Object.assign({},j))),I&&(W._redirectEventId=I),W}static async _fromIdTokenResponse(e,n,r=!1){const i=new $u;i.updateFromServerResponse(n);const s=new Fs({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Lu(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI=new Map;function wn(t){Yn(t instanceof Function,"Expected a class definition");let e=UI.get(t);return e?(Yn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,UI.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}mx.type="NONE";const Sa=mx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Us(t,e,n){return`firebase:${t}:${e}:${n}`}class aa{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Us(this.userKey,i.apiKey,s),this.fullPersistenceKey=Us("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Fs._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new aa(wn(Sa),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||wn(Sa);const o=Us(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const c=await u._get(o);if(c){const d=Fs._fromJSON(e,c);u!==s&&(a=d),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new aa(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new aa(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VI(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(yx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(gx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(wx(e))return"Blackberry";if(Ex(e))return"Webos";if(ew(e))return"Safari";if((e.includes("chrome/")||vx(e))&&!e.includes("edge/"))return"Chrome";if(vc(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function gx(t=Ke()){return/firefox\//i.test(t)}function ew(t=Ke()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function vx(t=Ke()){return/crios\//i.test(t)}function yx(t=Ke()){return/iemobile/i.test(t)}function vc(t=Ke()){return/android/i.test(t)}function wx(t=Ke()){return/blackberry/i.test(t)}function Ex(t=Ke()){return/webos/i.test(t)}function Qa(t=Ke()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function l2(t=Ke()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function u2(t=Ke()){var e;return Qa(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function c2(){return QC()&&document.documentMode===10}function Ix(t=Ke()){return Qa(t)||vc(t)||Ex(t)||wx(t)||/windows phone/i.test(t)||yx(t)}function d2(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _x(t,e=[]){let n;switch(t){case"Browser":n=VI(Ke());break;case"Worker":n=`${VI(Ke())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${is}/${r}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h2(t){return(await pt(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function Sx(t,e){return pt(t,"GET","/v2/recaptchaConfig",ut(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jI(t){return t!==void 0&&t.getResponse!==void 0}function BI(t){return t!==void 0&&t.enterprise!==void 0}class Tx{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(n=>n.provider==="EMAIL_PASSWORD_PROVIDER"&&n.enforcementState!=="OFF")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f2(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function tw(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Rt("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",f2().appendChild(r)})}function Cx(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const p2="https://www.google.com/recaptcha/enterprise.js?render=",m2="recaptcha-enterprise",g2="NO_RECAPTCHA";class xx{constructor(e){this.type=m2,this.auth=rt(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{Sx(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new Tx(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;BI(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(g2)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&BI(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}tw(p2+a).then(()=>{i(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})}}async function zi(t,e,n,r=!1){const i=new xx(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zI(this),this.idTokenSubscription=new zI(this),this.beforeStateQueue=new v2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ux,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=wn(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await aa.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return $(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Lu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=KM()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?ne(e):null;return n&&$(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&$(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(wn(e))})}async initializeRecaptchaConfig(){const e=await Sx(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),n=new Tx(e);this.tenantId==null?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new xx(this).verify()}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new po("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&wn(e)||this._popupRedirectResolver;$(n,this,"argument-error"),this.redirectPersistenceManager=await aa.create(this,[wn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return $(o,this,"internal-error"),o.then(()=>s(this.currentUser)),typeof n=="function"?e.addObserver(n,r,i):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return $(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_x(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&WM(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function rt(t){return ne(t)}class zI{constructor(e){this.auth=e,this.observer=null,this.addObserver=YC(n=>this.observer=n)}get next(){return $(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function w2(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(wn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function E2(t,e,n){const r=rt(t);$(r._canInitEmulator,r,"emulator-config-failed"),$(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=kx(e),{host:o,port:a}=I2(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||_2()}function kx(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function I2(t){const e=kx(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:qI(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:qI(o)}}}function qI(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function _2(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return lr("not implemented")}_getIdTokenResponse(e){return lr("not implemented")}_linkToIdToken(e,n){return lr("not implemented")}_getReauthenticationResolver(e){return lr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bx(t,e){return pt(t,"POST","/v1/accounts:resetPassword",ut(t,e))}async function Nx(t,e){return pt(t,"POST","/v1/accounts:update",e)}async function S2(t,e){return pt(t,"POST","/v1/accounts:update",ut(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lm(t,e){return Zr(t,"POST","/v1/accounts:signInWithPassword",ut(t,e))}async function Rf(t,e){return pt(t,"POST","/v1/accounts:sendOobCode",ut(t,e))}async function T2(t,e){return Rf(t,e)}async function um(t,e){return Rf(t,e)}async function cm(t,e){return Rf(t,e)}async function C2(t,e){return Rf(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x2(t,e){return Zr(t,"POST","/v1/accounts:signInWithEmailLink",ut(t,e))}async function k2(t,e){return Zr(t,"POST","/v1/accounts:signInWithEmailLink",ut(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu extends Ya{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Mu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Mu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){var n;switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(!((n=e._getRecaptchaConfig())===null||n===void 0)&&n.emailPasswordEnabled){const i=await zi(e,r,"signInWithPassword");return lm(e,i)}else return lm(e,r).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const s=await zi(e,r,"signInWithPassword");return lm(e,s)}else return Promise.reject(i)});case"emailLink":return x2(e,{email:this._email,oobCode:this._password});default:Pt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return Nx(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return k2(e,{idToken:n,email:this._email,oobCode:this._password});default:Pt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vr(t,e){return Zr(t,"POST","/v1/accounts:signInWithIdp",ut(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2="http://localhost";class _r extends Ya{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new _r(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Pt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Yy(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new _r(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Vr(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Vr(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Vr(e,n)}buildRequest(){const e={requestUri:b2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ka(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N2(t,e){return pt(t,"POST","/v1/accounts:sendVerificationCode",ut(t,e))}async function A2(t,e){return Zr(t,"POST","/v1/accounts:signInWithPhoneNumber",ut(t,e))}async function R2(t,e){const n=await Zr(t,"POST","/v1/accounts:signInWithPhoneNumber",ut(t,e));if(n.temporaryProof)throw Ml(t,"account-exists-with-different-credential",n);return n}const D2={USER_NOT_FOUND:"user-not-found"};async function O2(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Zr(t,"POST","/v1/accounts:signInWithPhoneNumber",ut(t,n),D2)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs extends Ya{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Vs({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Vs({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return A2(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return R2(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return O2(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!n&&!i&&!s?null:new Vs({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P2(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function L2(t){const e=Xo($l(t)).link,n=e?Xo($l(e)).deep_link_id:null,r=Xo($l(t)).deep_link_id;return(r?Xo($l(r)).link:null)||r||n||e||t}class Df{constructor(e){var n,r,i,s,o,a;const l=Xo($l(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,c=(r=l.oobCode)!==null&&r!==void 0?r:null,d=P2((i=l.mode)!==null&&i!==void 0?i:null);$(u&&c&&d,"argument-error"),this.apiKey=u,this.operation=d,this.code=c,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=L2(e);try{return new Df(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(){this.providerId=ss.PROVIDER_ID}static credential(e,n){return Mu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Df.parseLink(n);return $(r,"argument-error"),Mu._fromEmailAndCode(e,r.code,r.tenantId)}}ss.PROVIDER_ID="password";ss.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ss.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa extends ei{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class la extends Xa{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return $("providerId"in n&&"signInMethod"in n,"argument-error"),_r._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return $(e.idToken||e.accessToken,"argument-error"),_r._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return la.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return la.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=e;if(!r&&!i&&!n&&!s||!a)return null;try{return new la(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr extends Xa{constructor(){super("facebook.com")}static credential(e){return _r._fromParams({providerId:rr.PROVIDER_ID,signInMethod:rr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rr.credentialFromTaggedObject(e)}static credentialFromError(e){return rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rr.credential(e.oauthAccessToken)}catch{return null}}}rr.FACEBOOK_SIGN_IN_METHOD="facebook.com";rr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir extends Xa{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return _r._fromParams({providerId:ir.PROVIDER_ID,signInMethod:ir.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ir.credentialFromTaggedObject(e)}static credentialFromError(e){return ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ir.credential(n,r)}catch{return null}}}ir.GOOGLE_SIGN_IN_METHOD="google.com";ir.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr extends Xa{constructor(){super("github.com")}static credential(e){return _r._fromParams({providerId:sr.PROVIDER_ID,signInMethod:sr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return sr.credentialFromTaggedObject(e)}static credentialFromError(e){return sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return sr.credential(e.oauthAccessToken)}catch{return null}}}sr.GITHUB_SIGN_IN_METHOD="github.com";sr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2="http://localhost";class Ta extends Ya{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return Vr(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Vr(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Vr(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:s}=n;return!r||!i||!s||r!==i?null:new Ta(r,s)}static _create(e,n){return new Ta(e,n)}buildRequest(){return{requestUri:$2,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2="saml.";class Ah extends ei{constructor(e){$(e.startsWith(M2),"argument-error"),super(e)}static credentialFromResult(e){return Ah.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Ah.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=Ta.fromJSON(e);return $(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return Ta._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or extends Xa{constructor(){super("twitter.com")}static credential(e,n){return _r._fromParams({providerId:or.PROVIDER_ID,signInMethod:or.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return or.credentialFromTaggedObject(e)}static credentialFromError(e){return or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return or.credential(n,r)}catch{return null}}}or.TWITTER_SIGN_IN_METHOD="twitter.com";or.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jd(t,e){return Zr(t,"POST","/v1/accounts:signUp",ut(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Fs._fromIdTokenResponse(e,r,i),o=WI(r);return new Mn({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=WI(r);return new Mn({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function WI(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F2(t){var e;const n=rt(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Mn({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await jd(n,{returnSecureToken:!0}),i=await Mn._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh extends Jt{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Rh.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Rh(e,n,r,i)}}function Ax(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Rh._fromErrorAndOperation(t,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rx(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U2(t,e){const n=ne(t);await Of(!0,n,e);const{providerUserInfo:r}=await JM(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=Rx(r||[]);return n.providerData=n.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function nw(t,e,n=!1){const r=await Kr(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Mn._forOperation(t,"link",r)}async function Of(t,e,n){await Lu(e);const r=Rx(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";$(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dx(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=await Kr(t,Ax(r,i,e,t),n);$(s.idToken,r,"internal-error");const o=Af(s.idToken);$(o,r,"internal-error");const{sub:a}=o;return $(t.uid===a,r,"user-mismatch"),Mn._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Pt(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ox(t,e,n=!1){const r="signIn",i=await Ax(t,r,e),s=await Mn._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function Pf(t,e){return Ox(rt(t),e)}async function Px(t,e){const n=ne(t);return await Of(!1,n,e.providerId),nw(n,e)}async function Lx(t,e){return Dx(ne(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V2(t,e){return Zr(t,"POST","/v1/accounts:signInWithCustomToken",ut(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j2(t,e){const n=rt(t),r=await V2(n,{token:e,returnSecureToken:!0}),i=await Mn._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?rw._fromServerResponse(e,n):"totpInfo"in n?iw._fromServerResponse(e,n):Pt(e,"internal-error")}}class rw extends yc{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new rw(n)}}class iw extends yc{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new iw(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ua(t,e,n){var r;$(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),$(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&($(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&($(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B2(t,e,n){var r;const i=rt(t),s={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};if(!((r=i._getRecaptchaConfig())===null||r===void 0)&&r.emailPasswordEnabled){const o=await zi(i,s,"getOobCode",!0);n&&ua(i,o,n),await um(i,o)}else n&&ua(i,s,n),await um(i,s).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const a=await zi(i,s,"getOobCode",!0);n&&ua(i,a,n),await um(i,a)}else return Promise.reject(o)})}async function z2(t,e,n){await bx(ne(t),{oobCode:e,newPassword:n})}async function q2(t,e){await S2(ne(t),{oobCode:e})}async function $x(t,e){const n=ne(t),r=await bx(n,{oobCode:e}),i=r.requestType;switch($(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":$(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":$(r.mfaInfo,n,"internal-error");default:$(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=yc._fromServerResponse(rt(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function W2(t,e){const{data:n}=await $x(ne(t),e);return n.email}async function H2(t,e,n){var r;const i=rt(t),s={returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"};let o;if(!((r=i._getRecaptchaConfig())===null||r===void 0)&&r.emailPasswordEnabled){const u=await zi(i,s,"signUpPassword");o=jd(i,u)}else o=jd(i,s).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const c=await zi(i,s,"signUpPassword");return jd(i,c)}else return Promise.reject(u)});const a=await o.catch(u=>Promise.reject(u)),l=await Mn._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(l.user),l}function K2(t,e,n){return Pf(ne(t),ss.credential(e,n))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G2(t,e,n){var r;const i=rt(t),s={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function o(a,l){$(l.handleCodeInApp,i,"argument-error"),l&&ua(i,a,l)}if(!((r=i._getRecaptchaConfig())===null||r===void 0)&&r.emailPasswordEnabled){const a=await zi(i,s,"getOobCode",!0);o(a,n),await cm(i,a)}else o(s,n),await cm(i,s).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const l=await zi(i,s,"getOobCode",!0);o(l,n),await cm(i,l)}else return Promise.reject(a)})}function Q2(t,e){const n=Df.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function Y2(t,e,n){const r=ne(t),i=ss.credentialWithLink(e,n||Pu());return $(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Pf(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X2(t,e){return pt(t,"POST","/v1/accounts:createAuthUri",ut(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J2(t,e){const n=Jy()?Pu():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await X2(ne(t),r);return i||[]}async function Z2(t,e){const n=ne(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&ua(n.auth,i,e);const{email:s}=await T2(n.auth,i);s!==t.email&&await t.reload()}async function eF(t,e,n){const r=ne(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&ua(r.auth,s,n);const{email:o}=await C2(r.auth,s);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tF(t,e){return pt(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nF(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=ne(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Kr(r,tF(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function rF(t,e){return Mx(ne(t),e,null)}function iF(t,e){return Mx(ne(t),null,e)}async function Mx(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const o=await Kr(t,Nx(r,s));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sF(t){var e,n;if(!t)return null;const{providerId:r}=t,i=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(t!=null&&t.idToken)){const o=(n=(e=Af(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(o){const a=o!=="anonymous"&&o!=="custom"?o:null;return new ca(s,a)}}if(!r)return null;switch(r){case"facebook.com":return new oF(s,i);case"github.com":return new aF(s,i);case"google.com":return new lF(s,i);case"twitter.com":return new uF(s,i,t.screenName||null);case"custom":case"anonymous":return new ca(s,null);default:return new ca(s,r,i)}}class ca{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class Fx extends ca{constructor(e,n,r,i){super(e,n,r),this.username=i}}class oF extends ca{constructor(e,n){super(e,"facebook.com",n)}}class aF extends Fx{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class lF extends ca{constructor(e,n){super(e,"google.com",n)}}class uF extends Fx{constructor(e,n,r){super(e,"twitter.com",n,r)}}function cF(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:sF(n)}class As{constructor(e,n,r){this.type=e,this.credential=n,this.auth=r}static _fromIdtoken(e,n){return new As("enroll",e,n)}static _fromMfaPendingCredential(e){return new As("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return As._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return As._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=rt(e),i=n.customData._serverResponse,s=(i.mfaInfo||[]).map(a=>yc._fromServerResponse(r,a));$(i.mfaPendingCredential,r,"internal-error");const o=As._fromMfaPendingCredential(i.mfaPendingCredential);return new sw(o,s,async a=>{const l=await a._process(r,o);delete i.mfaInfo,delete i.mfaPendingCredential;const u=Object.assign(Object.assign({},i),{idToken:l.idToken,refreshToken:l.refreshToken});switch(n.operationType){case"signIn":const c=await Mn._fromIdTokenResponse(r,n.operationType,u);return await r._updateCurrentUser(c.user),c;case"reauthenticate":return $(n.user,r,"internal-error"),Mn._forOperation(n.user,n.operationType,u);default:Pt(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function dF(t,e){var n;const r=ne(t),i=e;return $(e.customData.operationType,r,"argument-error"),$((n=i.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,r,"argument-error"),sw._fromError(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hF(t,e){return pt(t,"POST","/v2/accounts/mfaEnrollment:start",ut(t,e))}function fF(t,e){return pt(t,"POST","/v2/accounts/mfaEnrollment:finalize",ut(t,e))}function pF(t,e){return pt(t,"POST","/v2/accounts/mfaEnrollment:withdraw",ut(t,e))}class ow{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>yc._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new ow(e)}async getSession(){return As._fromIdtoken(await this.user.getIdToken(),this.user.auth)}async enroll(e,n){const r=e,i=await this.getSession(),s=await Kr(this.user,r._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await Kr(this.user,pF(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==n),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const dm=new WeakMap;function mF(t){const e=ne(t);return dm.has(e)||dm.set(e,ow._fromUser(e)),dm.get(e)}const Dh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Dh,"1"),this.storage.removeItem(Dh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gF(){const t=Ke();return ew(t)||Qa(t)}const vF=1e3,yF=10;class Vx extends Ux{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=gF()&&d2(),this.fallbackToPolling=Ix(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);c2()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,yF):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},vF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Vx.type="LOCAL";const aw=Vx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx extends Ux{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}jx.type="SESSION";const Xs=jx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wF(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Lf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await wF(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Lf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wc(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EF{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=wc("",20);i.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const h=d;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(h.data.response);break;default:clearTimeout(c),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function st(){return window}function IF(t){st().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lw(){return typeof st().WorkerGlobalScope<"u"&&typeof st().importScripts=="function"}async function _F(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function SF(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function TF(){return lw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx="firebaseLocalStorageDb",CF=1,Oh="firebaseLocalStorage",zx="fbase_key";class Ec{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function $f(t,e){return t.transaction([Oh],e?"readwrite":"readonly").objectStore(Oh)}function xF(){const t=indexedDB.deleteDatabase(Bx);return new Ec(t).toPromise()}function jg(){const t=indexedDB.open(Bx,CF);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Oh,{keyPath:zx})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Oh)?e(r):(r.close(),await xF(),e(await jg()))})})}async function HI(t,e,n){const r=$f(t,!0).put({[zx]:e,value:n});return new Ec(r).toPromise()}async function kF(t,e){const n=$f(t,!1).get(e),r=await new Ec(n).toPromise();return r===void 0?null:r.value}function KI(t,e){const n=$f(t,!0).delete(e);return new Ec(n).toPromise()}const bF=800,NF=3;class qx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await jg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>NF)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return lw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Lf._getInstance(TF()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await _F(),!this.activeServiceWorker)return;this.sender=new EF(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||SF()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await jg();return await HI(e,Dh,"1"),await KI(e,Dh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>HI(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>kF(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>KI(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=$f(i,!1).getAll();return new Ec(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),bF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}qx.type="LOCAL";const Fu=qx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AF(t,e){return pt(t,"POST","/v2/accounts/mfaSignIn:start",ut(t,e))}function RF(t,e){return pt(t,"POST","/v2/accounts/mfaSignIn:finalize",ut(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DF=500,OF=6e4,hd=1e12;class PF{constructor(e){this.auth=e,this.counter=hd,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new LF(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||hd;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||hd;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||hd;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class LF{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;$(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=$F(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},OF)},DF))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function $F(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hm=Cx("rcb"),MF=new gc(3e4,6e4),FF="https://www.google.com/recaptcha/api.js?";class UF{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=st().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return $(VF(n),e,"argument-error"),this.shouldResolveImmediately(n)&&jI(st().grecaptcha)?Promise.resolve(st().grecaptcha):new Promise((r,i)=>{const s=st().setTimeout(()=>{i(Rt(e,"network-request-failed"))},MF.get());st()[hm]=()=>{st().clearTimeout(s),delete st()[hm];const a=st().grecaptcha;if(!a||!jI(a)){i(Rt(e,"internal-error"));return}const l=a.render;a.render=(u,c)=>{const d=l(u,c);return this.counter++,d},this.hostLanguage=n,r(a)};const o=`${FF}?${Ka({onload:hm,render:"explicit",hl:n})}`;tw(o).catch(()=>{clearTimeout(s),i(Rt(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=st().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function VF(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class jF{async load(e){return new PF(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx="recaptcha",BF={theme:"light",type:"image"};let zF=class{constructor(e,n=Object.assign({},BF),r){this.parameters=n,this.type=Wx,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=rt(r),this.isInvisible=this.parameters.size==="invisible",$(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof e=="string"?document.getElementById(e):e;$(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new jF:new UF,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const s=o=>{o&&(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){$(!this.parameters.sitekey,this.auth,"argument-error"),$(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),$(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=st()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){$(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){$(Jy()&&!lw(),this.auth,"internal-error"),await qF(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await h2(this.auth);$(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return $(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function qF(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Vs._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function WF(t,e,n){const r=rt(t),i=await Mf(r,e,ne(n));return new uw(i,s=>Pf(r,s))}async function HF(t,e,n){const r=ne(t);await Of(!1,r,"phone");const i=await Mf(r.auth,e,ne(n));return new uw(i,s=>Px(r,s))}async function KF(t,e,n){const r=ne(t),i=await Mf(r.auth,e,ne(n));return new uw(i,s=>Lx(r,s))}async function Mf(t,e,n){var r;const i=await n.verify();try{$(typeof i=="string",t,"argument-error"),$(n.type===Wx,t,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const o=s.session;if("phoneNumber"in s)return $(o.type==="enroll",t,"internal-error"),(await hF(t,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{$(o.type==="signin",t,"internal-error");const a=((r=s.multiFactorHint)===null||r===void 0?void 0:r.uid)||s.multiFactorUid;return $(a,t,"missing-multi-factor-info"),(await AF(t,{mfaPendingCredential:o.credential,mfaEnrollmentId:a,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await N2(t,{phoneNumber:s.phoneNumber,recaptchaToken:i});return o}}finally{n._reset()}}async function GF(t,e){await nw(ne(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Js=class Bd{constructor(e){this.providerId=Bd.PROVIDER_ID,this.auth=rt(e)}verifyPhoneNumber(e,n){return Mf(this.auth,e,ne(n))}static credential(e,n){return Vs._fromVerification(e,n)}static credentialFromResult(e){const n=e;return Bd.credentialFromTaggedObject(n)}static credentialFromError(e){return Bd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?Vs._fromTokenResponse(n,r):null}};Js.PROVIDER_ID="phone";Js.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mo(t,e){return e?wn(e):($(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw extends Ya{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Vr(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Vr(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Vr(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function QF(t){return Ox(t.auth,new cw(t),t.bypassAuthState)}function YF(t){const{auth:e,user:n}=t;return $(n,e,"internal-error"),Dx(n,new cw(t),t.bypassAuthState)}async function XF(t){const{auth:e,user:n}=t;return $(n,e,"internal-error"),nw(n,new cw(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return QF;case"linkViaPopup":case"linkViaRedirect":return XF;case"reauthViaPopup":case"reauthViaRedirect":return YF;default:Pt(this.auth,"internal-error")}}resolve(e){Yn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Yn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JF=new gc(2e3,1e4);async function ZF(t,e,n){const r=rt(t);Ga(t,e,ei);const i=mo(r,n);return new Pr(r,"signInViaPopup",e,i).executeNotNull()}async function eU(t,e,n){const r=ne(t);Ga(r.auth,e,ei);const i=mo(r.auth,n);return new Pr(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function tU(t,e,n){const r=ne(t);Ga(r.auth,e,ei);const i=mo(r.auth,n);return new Pr(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class Pr extends Hx{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Pr.currentPopupAction&&Pr.currentPopupAction.cancel(),Pr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return $(e,this.auth,"internal-error"),e}async onExecution(){Yn(this.filter.length===1,"Popup operations only handle one event");const e=wc();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Rt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Rt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Pr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Rt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,JF.get())};e()}}Pr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nU="pendingRedirect",eu=new Map;class rU extends Hx{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=eu.get(this.auth._key());if(!e){try{const r=await iU(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}eu.set(this.auth._key(),e)}return this.bypassAuthState||eu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function iU(t,e){const n=Gx(e),r=Kx(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function dw(t,e){return Kx(t)._set(Gx(e),"true")}function sU(){eu.clear()}function hw(t,e){eu.set(t._key(),e)}function Kx(t){return wn(t._redirectPersistence)}function Gx(t){return Us(nU,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oU(t,e,n){return aU(t,e,n)}async function aU(t,e,n){const r=rt(t);Ga(t,e,ei),await r._initializationPromise;const i=mo(r,n);return await dw(i,r),i._openRedirect(r,e,"signInViaRedirect")}function lU(t,e,n){return uU(t,e,n)}async function uU(t,e,n){const r=ne(t);Ga(r.auth,e,ei),await r.auth._initializationPromise;const i=mo(r.auth,n);await dw(i,r.auth);const s=await Qx(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)}function cU(t,e,n){return dU(t,e,n)}async function dU(t,e,n){const r=ne(t);Ga(r.auth,e,ei),await r.auth._initializationPromise;const i=mo(r.auth,n);await Of(!1,r,e.providerId),await dw(i,r.auth);const s=await Qx(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function hU(t,e){return await rt(t)._initializationPromise,Ff(t,e,!1)}async function Ff(t,e,n=!1){const r=rt(t),i=mo(r,e),o=await new rU(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function Qx(t){const e=wc(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fU=10*60*1e3;class Yx{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!pU(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Xx(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Rt(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=fU&&this.cachedEventUids.clear(),this.cachedEventUids.has(GI(e))}saveEventToCache(e){this.cachedEventUids.add(GI(e)),this.lastProcessedEventTime=Date.now()}}function GI(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Xx({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function pU(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Xx(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jx(t,e={}){return pt(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gU=/^https?/;async function vU(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Jx(t);for(const n of e)try{if(yU(n))return}catch{}Pt(t,"unauthorized-domain")}function yU(t){const e=Pu(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!gU.test(n))return!1;if(mU.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wU=new gc(3e4,6e4);function QI(){const t=st().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function EU(t){return new Promise((e,n)=>{var r,i,s;function o(){QI(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{QI(),n(Rt(t,"network-request-failed"))},timeout:wU.get()})}if(!((i=(r=st().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=st().gapi)===null||s===void 0)&&s.load)o();else{const a=Cx("iframefcb");return st()[a]=()=>{gapi.load?o():n(Rt(t,"network-request-failed"))},tw(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw zd=null,e})}let zd=null;function IU(t){return zd=zd||EU(t),zd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _U=new gc(5e3,15e3),SU="__/auth/iframe",TU="emulator/auth/iframe",CU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kU(t){const e=t.config;$(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Zy(e,TU):`https://${t.config.authDomain}/${SU}`,r={apiKey:e.apiKey,appName:t.name,v:is},i=xU.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Ka(r).slice(1)}`}async function bU(t){const e=await IU(t),n=st().gapi;return $(n,t,"internal-error"),e.open({where:document.body,url:kU(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:CU,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Rt(t,"network-request-failed"),a=st().setTimeout(()=>{s(o)},_U.get());function l(){st().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},AU=500,RU=600,DU="_blank",OU="http://localhost";class YI{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function PU(t,e,n,r=AU,i=RU){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},NU),{width:r.toString(),height:i.toString(),top:s,left:o}),u=Ke().toLowerCase();n&&(a=vx(u)?DU:n),gx(u)&&(e=e||OU,l.scrollbars="yes");const c=Object.entries(l).reduce((h,[f,m])=>`${h}${f}=${m},`,"");if(u2(u)&&a!=="_self")return LU(e||"",a),new YI(null);const d=window.open(e||"",a,c);$(d,t,"popup-blocked");try{d.focus()}catch{}return new YI(d)}function LU(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $U="__/auth/handler",MU="emulator/auth/handler",FU=encodeURIComponent("fac");async function Bg(t,e,n,r,i,s){$(t.config.authDomain,t,"auth-domain-config-required"),$(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:is,eventId:i};if(e instanceof ei){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",E$(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,d]of Object.entries(s||{}))o[c]=d}if(e instanceof Xa){const c=e.getScopes().filter(d=>d!=="");c.length>0&&(o.scopes=c.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const l=await t._getAppCheckToken(),u=l?`#${FU}=${encodeURIComponent(l)}`:"";return`${UU(t)}?${Ka(a).slice(1)}${u}`}function UU({config:t}){return t.emulator?Zy(t,MU):`https://${t.authDomain}/${$U}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fm="webStorageSupport";class VU{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Xs,this._completeRedirectFn=Ff,this._overrideRedirectResult=hw}async _openPopup(e,n,r,i){var s;Yn((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Bg(e,n,r,Pu(),i);return PU(e,o,wc())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Bg(e,n,r,Pu(),i);return IF(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Yn(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await bU(e),r=new Yx(e);return n.register("authEvent",i=>($(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(fm,{type:fm},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[fm];o!==void 0&&n(!!o),Pt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=vU(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Ix()||ew()||Qa()}}const jU=VU;class BU{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return lr("unexpected MultiFactorSessionType")}}}class fw extends BU{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new fw(e)}_finalizeEnroll(e,n,r){return fF(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return RF(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class Zx{constructor(){}static assertion(e){return fw._fromCredential(e)}}Zx.FACTOR_ID="phone";var XI="@firebase/auth",JI="0.23.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zU{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){$(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qU(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function WU(t){Bi(new Ir("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;$(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_x(t)},u=new y2(r,i,s,l);return w2(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Bi(new Ir("auth-internal",e=>{const n=rt(e.getProvider("auth").getImmediate());return(r=>new zU(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),gr(XI,JI,qU(t)),gr(XI,JI,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HU=5*60;c$("authIdTokenMaxAge");WU("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zs(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KU=2e3;async function GU(t,e,n){var r;const{BuildInfo:i}=Zs();Yn(e.sessionId,"AuthEvent did not contain a session ID");const s=await ZU(e.sessionId),o={};return Qa()?o.ibi=i.packageName:vc()?o.apn=i.packageName:Pt(t,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,Bg(t,n,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,o)}async function QU(t){const{BuildInfo:e}=Zs(),n={};Qa()?n.iosBundleId=e.packageName:vc()?n.androidPackageName=e.packageName:Pt(t,"operation-not-supported-in-this-environment"),await Jx(t,n)}function YU(t){const{cordova:e}=Zs();return new Promise(n=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(t):i=e.InAppBrowser.open(t,l2()?"_blank":"_system","location=yes"),n(i)})})}async function XU(t,e,n){const{cordova:r}=Zs();let i=()=>{};try{await new Promise((s,o)=>{let a=null;function l(){var d;s();const h=(d=r.plugins.browsertab)===null||d===void 0?void 0:d.close;typeof h=="function"&&h(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function u(){a||(a=window.setTimeout(()=>{o(Rt(t,"redirect-cancelled-by-user"))},KU))}function c(){(document==null?void 0:document.visibilityState)==="visible"&&u()}e.addPassiveListener(l),document.addEventListener("resume",u,!1),vc()&&document.addEventListener("visibilitychange",c,!1),i=()=>{e.removePassiveListener(l),document.removeEventListener("resume",u,!1),document.removeEventListener("visibilitychange",c,!1),a&&window.clearTimeout(a)}})}finally{i()}}function JU(t){var e,n,r,i,s,o,a,l,u,c;const d=Zs();$(typeof((e=d==null?void 0:d.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),$(typeof((n=d==null?void 0:d.BuildInfo)===null||n===void 0?void 0:n.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),$(typeof((s=(i=(r=d==null?void 0:d.cordova)===null||r===void 0?void 0:r.plugins)===null||i===void 0?void 0:i.browsertab)===null||s===void 0?void 0:s.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),$(typeof((l=(a=(o=d==null?void 0:d.cordova)===null||o===void 0?void 0:o.plugins)===null||a===void 0?void 0:a.browsertab)===null||l===void 0?void 0:l.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),$(typeof((c=(u=d==null?void 0:d.cordova)===null||u===void 0?void 0:u.InAppBrowser)===null||c===void 0?void 0:c.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function ZU(t){const e=eV(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}function eV(t){if(Yn(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tV=20;class nV extends Yx{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function rV(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:oV(),postBody:null,tenantId:t.tenantId,error:Rt(t,"no-auth-event")}}function iV(t,e){return zg()._set(qg(t),e)}async function ZI(t){const e=await zg()._get(qg(t));return e&&await zg()._remove(qg(t)),e}function sV(t,e){var n,r;const i=lV(e);if(i.includes("/__/auth/callback")){const s=qd(i),o=s.firebaseError?aV(decodeURIComponent(s.firebaseError)):null,a=(r=(n=o==null?void 0:o.code)===null||n===void 0?void 0:n.split("auth/"))===null||r===void 0?void 0:r[1],l=a?Rt(a):null;return l?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:l,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:i,postBody:null}}return null}function oV(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<tV;n++){const r=Math.floor(Math.random()*e.length);t.push(e.charAt(r))}return t.join("")}function zg(){return wn(aw)}function qg(t){return Us("authEvent",t.config.apiKey,t.name)}function aV(t){try{return JSON.parse(t)}catch{return null}}function lV(t){const e=qd(t),n=e.link?decodeURIComponent(e.link):void 0,r=qd(n).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return qd(i).link||i||r||n||t}function qd(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return Xo(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uV=500;class cV{constructor(){this._redirectPersistence=Xs,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Ff,this._overrideRedirectResult=hw}async _initialize(e){const n=e._key();let r=this.eventManagers.get(n);return r||(r=new nV(e),this.eventManagers.set(n,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){Pt(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,r,i){JU(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),sU(),await this._originValidation(e);const o=rV(e,r,i);await iV(e,o);const a=await GU(e,o,n),l=await YU(a);return XU(e,s,l)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=QU(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:r,handleOpenURL:i,BuildInfo:s}=Zs(),o=setTimeout(async()=>{await ZI(e),n.onEvent(e1())},uV),a=async c=>{clearTimeout(o);const d=await ZI(e);let h=null;d&&(c!=null&&c.url)&&(h=sV(d,c.url)),n.onEvent(h||e1())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,a);const l=i,u=`${s.packageName.toLowerCase()}://`;Zs().handleOpenURL=async c=>{if(c.toLowerCase().startsWith(u)&&a({url:c}),typeof l=="function")try{l(c)}catch(d){console.error(d)}}}}const dV=cV;function e1(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Rt("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hV(t,e){rt(t)._logFramework(e)}var fV="@firebase/auth-compat",pV="0.4.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mV=1e3;function tu(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function gV(){return tu()==="http:"||tu()==="https:"}function ek(t=Ke()){return!!((tu()==="file:"||tu()==="ionic:"||tu()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function vV(){return Hy()||Wy()}function yV(){return QC()&&(document==null?void 0:document.documentMode)===11}function wV(t=Ke()){return/Edge\/\d+/.test(t)}function EV(t=Ke()){return yV()||wV(t)}function tk(){try{const t=self.localStorage,e=wc();if(t)return t.setItem(e,"1"),t.removeItem(e),EV()?Ru():!0}catch{return pw()&&Ru()}return!1}function pw(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function pm(){return(gV()||GC()||ek())&&!vV()&&tk()&&!pw()}function nk(){return ek()&&typeof document<"u"}async function IV(){return nk()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},mV);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function _V(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vn={LOCAL:"local",NONE:"none",SESSION:"session"},wl=$,rk="persistence";function SV(t,e){if(wl(Object.values(vn).includes(e),t,"invalid-persistence-type"),Hy()){wl(e!==vn.SESSION,t,"unsupported-persistence-type");return}if(Wy()){wl(e===vn.NONE,t,"unsupported-persistence-type");return}if(pw()){wl(e===vn.NONE||e===vn.LOCAL&&Ru(),t,"unsupported-persistence-type");return}wl(e===vn.NONE||tk(),t,"unsupported-persistence-type")}async function Wg(t){await t._initializationPromise;const e=ik(),n=Us(rk,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function TV(t,e){const n=ik();if(!n)return[];const r=Us(rk,t,e);switch(n.getItem(r)){case vn.NONE:return[Sa];case vn.LOCAL:return[Fu,Xs];case vn.SESSION:return[Xs];default:return[]}}function ik(){var t;try{return((t=_V())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CV=$;class Si{constructor(){this.browserResolver=wn(jU),this.cordovaResolver=wn(dV),this.underlyingResolver=null,this._redirectPersistence=Xs,this._completeRedirectFn=Ff,this._overrideRedirectResult=hw}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,r,i)}async _openRedirect(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,r,i)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return nk()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return CV(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await IV();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sk(t){return t.unwrap()}function xV(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kV(t){return ok(t)}function bV(t,e){var n;const r=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new NV(t,dF(t,e))}else if(r){const i=ok(e),s=e;i&&(s.credential=i,s.tenantId=r.tenantId||void 0,s.email=r.email||void 0,s.phoneNumber=r.phoneNumber||void 0)}}function ok(t){const{_tokenResponse:e}=t instanceof Jt?t.customData:t;if(!e)return null;if(!(t instanceof Jt)&&"temporaryProof"in e&&"phoneNumber"in e)return Js.credentialFromResult(t);const n=e.providerId;if(!n||n===yl.PASSWORD)return null;let r;switch(n){case yl.GOOGLE:r=ir;break;case yl.FACEBOOK:r=rr;break;case yl.GITHUB:r=sr;break;case yl.TWITTER:r=or;break;default:const{oauthIdToken:i,oauthAccessToken:s,oauthTokenSecret:o,pendingToken:a,nonce:l}=e;return!s&&!o&&!i&&!a?null:a?n.startsWith("saml.")?Ta._create(n,a):_r._fromParams({providerId:n,signInMethod:n,pendingToken:a,idToken:i,accessToken:s}):new la(n).credential({idToken:i,accessToken:s,rawNonce:l})}return t instanceof Jt?r.credentialFromError(t):r.credentialFromResult(t)}function nn(t,e){return e.catch(n=>{throw n instanceof Jt&&bV(t,n),n}).then(n=>{const r=n.operationType,i=n.user;return{operationType:r,credential:kV(n),additionalUserInfo:cF(n),user:Lr.getOrCreate(i)}})}async function Hg(t,e){const n=await e;return{verificationId:n.verificationId,confirm:r=>nn(t,n.confirm(r))}}class NV{constructor(e,n){this.resolver=n,this.auth=xV(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return nn(sk(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e){this._delegate=e,this.multiFactor=mF(e)}static getOrCreate(e){return Lr.USER_MAP.has(e)||Lr.USER_MAP.set(e,new Lr(e)),Lr.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return nn(this.auth,Px(this._delegate,e))}async linkWithPhoneNumber(e,n){return Hg(this.auth,HF(this._delegate,e,n))}async linkWithPopup(e){return nn(this.auth,tU(this._delegate,e,Si))}async linkWithRedirect(e){return await Wg(rt(this.auth)),cU(this._delegate,e,Si)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return nn(this.auth,Lx(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return Hg(this.auth,KF(this._delegate,e,n))}reauthenticateWithPopup(e){return nn(this.auth,eU(this._delegate,e,Si))}async reauthenticateWithRedirect(e){return await Wg(rt(this.auth)),lU(this._delegate,e,Si)}sendEmailVerification(e){return Z2(this._delegate,e)}async unlink(e){return await U2(this._delegate,e),this}updateEmail(e){return rF(this._delegate,e)}updatePassword(e){return iF(this._delegate,e)}updatePhoneNumber(e){return GF(this._delegate,e)}updateProfile(e){return nF(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return eF(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Lr.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const El=$;class Kg{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;El(r,"invalid-api-key",{appName:e.name}),El(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?Si:void 0;this._delegate=n.initialize({options:{persistence:AV(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(zM),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Lr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){E2(this._delegate,e,n)}applyActionCode(e){return q2(this._delegate,e)}checkActionCode(e){return $x(this._delegate,e)}confirmPasswordReset(e,n){return z2(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return nn(this._delegate,H2(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return J2(this._delegate,e)}isSignInWithEmailLink(e){return Q2(this._delegate,e)}async getRedirectResult(){El(pm(),this._delegate,"operation-not-supported-in-this-environment");const e=await hU(this._delegate,Si);return e?nn(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){hV(this._delegate,e)}onAuthStateChanged(e,n,r){const{next:i,error:s,complete:o}=t1(e,n,r);return this._delegate.onAuthStateChanged(i,s,o)}onIdTokenChanged(e,n,r){const{next:i,error:s,complete:o}=t1(e,n,r);return this._delegate.onIdTokenChanged(i,s,o)}sendSignInLinkToEmail(e,n){return G2(this._delegate,e,n)}sendPasswordResetEmail(e,n){return B2(this._delegate,e,n||void 0)}async setPersistence(e){SV(this._delegate,e);let n;switch(e){case vn.SESSION:n=Xs;break;case vn.LOCAL:n=await wn(Fu)._isAvailable()?Fu:aw;break;case vn.NONE:n=Sa;break;default:return Pt("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return nn(this._delegate,F2(this._delegate))}signInWithCredential(e){return nn(this._delegate,Pf(this._delegate,e))}signInWithCustomToken(e){return nn(this._delegate,j2(this._delegate,e))}signInWithEmailAndPassword(e,n){return nn(this._delegate,K2(this._delegate,e,n))}signInWithEmailLink(e,n){return nn(this._delegate,Y2(this._delegate,e,n))}signInWithPhoneNumber(e,n){return Hg(this._delegate,WF(this._delegate,e,n))}async signInWithPopup(e){return El(pm(),this._delegate,"operation-not-supported-in-this-environment"),nn(this._delegate,ZF(this._delegate,e,Si))}async signInWithRedirect(e){return El(pm(),this._delegate,"operation-not-supported-in-this-environment"),await Wg(this._delegate),oU(this._delegate,e,Si)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return W2(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}Kg.Persistence=vn;function t1(t,e,n){let r=t;typeof t!="function"&&({next:r,error:e,complete:n}=t);const i=r;return{next:o=>i(o&&Lr.getOrCreate(o)),error:e,complete:n}}function AV(t,e){const n=TV(t,e);if(typeof self<"u"&&!n.includes(Fu)&&n.push(Fu),typeof window<"u")for(const r of[aw,Xs])n.includes(r)||n.push(r);return n.includes(Sa)||n.push(Sa),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(){this.providerId="phone",this._delegate=new Js(sk(qt.auth()))}static credential(e,n){return Js.credential(e,n)}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}mw.PHONE_SIGN_IN_METHOD=Js.PHONE_SIGN_IN_METHOD;mw.PROVIDER_ID=Js.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RV=$;class DV{constructor(e,n,r=qt.app()){var i;RV((i=r.options)===null||i===void 0?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new zF(e,n,r.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OV="auth-compat";function PV(t){t.INTERNAL.registerComponent(new Ir(OV,e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new Kg(n,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ko.EMAIL_SIGNIN,PASSWORD_RESET:ko.PASSWORD_RESET,RECOVER_EMAIL:ko.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:ko.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:ko.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:ko.VERIFY_EMAIL}},EmailAuthProvider:ss,FacebookAuthProvider:rr,GithubAuthProvider:sr,GoogleAuthProvider:ir,OAuthProvider:la,SAMLAuthProvider:Ah,PhoneAuthProvider:mw,PhoneMultiFactorGenerator:Zx,RecaptchaVerifier:DV,TwitterAuthProvider:or,Auth:Kg,AuthCredential:Ya,Error:Jt}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(fV,pV)}PV(qt);var LV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},z,gw=gw||{},ie=LV||self;function Uf(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Ic(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function $V(t){return Object.prototype.hasOwnProperty.call(t,mm)&&t[mm]||(t[mm]=++MV)}var mm="closure_uid_"+(1e9*Math.random()>>>0),MV=0;function FV(t,e,n){return t.call.apply(t.bind,arguments)}function UV(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function jt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?jt=FV:jt=UV,jt.apply(null,arguments)}function fd(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function _t(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function os(){this.s=this.s,this.o=this.o}var VV=0;os.prototype.s=!1;os.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),VV!=0)&&$V(this)};os.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ak=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function vw(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function n1(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Uf(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function Bt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Bt.prototype.h=function(){this.defaultPrevented=!0};var jV=function(){if(!ie.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{ie.addEventListener("test",()=>{},e),ie.removeEventListener("test",()=>{},e)}catch{}return t}();function Uu(t){return/^[\s\xa0]*$/.test(t)}function Vf(){var t=ie.navigator;return t&&(t=t.userAgent)?t:""}function ar(t){return Vf().indexOf(t)!=-1}function yw(t){return yw[" "](t),t}yw[" "]=function(){};function BV(t,e){var n=Pj;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var zV=ar("Opera"),Ca=ar("Trident")||ar("MSIE"),lk=ar("Edge"),Gg=lk||Ca,uk=ar("Gecko")&&!(Vf().toLowerCase().indexOf("webkit")!=-1&&!ar("Edge"))&&!(ar("Trident")||ar("MSIE"))&&!ar("Edge"),qV=Vf().toLowerCase().indexOf("webkit")!=-1&&!ar("Edge");function ck(){var t=ie.document;return t?t.documentMode:void 0}var Qg;e:{var gm="",vm=function(){var t=Vf();if(uk)return/rv:([^\);]+)(\)|;)/.exec(t);if(lk)return/Edge\/([\d\.]+)/.exec(t);if(Ca)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(qV)return/WebKit\/(\S+)/.exec(t);if(zV)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(vm&&(gm=vm?vm[1]:""),Ca){var ym=ck();if(ym!=null&&ym>parseFloat(gm)){Qg=String(ym);break e}}Qg=gm}var Yg;if(ie.document&&Ca){var r1=ck();Yg=r1||parseInt(Qg,10)||void 0}else Yg=void 0;var WV=Yg;function Vu(t,e){if(Bt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(uk){e:{try{yw(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:HV[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Vu.$.h.call(this)}}_t(Vu,Bt);var HV={2:"touch",3:"pen",4:"mouse"};Vu.prototype.h=function(){Vu.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var _c="closure_listenable_"+(1e6*Math.random()|0),KV=0;function GV(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++KV,this.fa=this.ia=!1}function jf(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function ww(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function QV(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function dk(t){const e={};for(const n in t)e[n]=t[n];return e}const i1="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function hk(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<i1.length;s++)n=i1[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Bf(t){this.src=t,this.g={},this.h=0}Bf.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=Jg(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new GV(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function Xg(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=ak(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(jf(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Jg(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var Ew="closure_lm_"+(1e6*Math.random()|0),wm={};function fk(t,e,n,r,i){if(r&&r.once)return mk(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)fk(t,e[s],n,r,i);return null}return n=Sw(n),t&&t[_c]?t.O(e,n,Ic(r)?!!r.capture:!!r,i):pk(t,e,n,!1,r,i)}function pk(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Ic(i)?!!i.capture:!!i,a=_w(t);if(a||(t[Ew]=a=new Bf(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=YV(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)jV||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(vk(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function YV(){function t(n){return e.call(t.src,t.listener,n)}const e=XV;return t}function mk(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)mk(t,e[s],n,r,i);return null}return n=Sw(n),t&&t[_c]?t.P(e,n,Ic(r)?!!r.capture:!!r,i):pk(t,e,n,!0,r,i)}function gk(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)gk(t,e[s],n,r,i);else r=Ic(r)?!!r.capture:!!r,n=Sw(n),t&&t[_c]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=Jg(s,n,r,i),-1<n&&(jf(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=_w(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Jg(e,n,r,i)),(n=-1<t?e[t]:null)&&Iw(n))}function Iw(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[_c])Xg(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(vk(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=_w(e))?(Xg(n,t),n.h==0&&(n.src=null,e[Ew]=null)):jf(t)}}}function vk(t){return t in wm?wm[t]:wm[t]="on"+t}function XV(t,e){if(t.fa)t=!0;else{e=new Vu(e,this);var n=t.listener,r=t.la||t.src;t.ia&&Iw(t),t=n.call(r,e)}return t}function _w(t){return t=t[Ew],t instanceof Bf?t:null}var Em="__closure_events_fn_"+(1e9*Math.random()>>>0);function Sw(t){return typeof t=="function"?t:(t[Em]||(t[Em]=function(e){return t.handleEvent(e)}),t[Em])}function It(){os.call(this),this.i=new Bf(this),this.S=this,this.J=null}_t(It,os);It.prototype[_c]=!0;It.prototype.removeEventListener=function(t,e,n,r){gk(this,t,e,n,r)};function Dt(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Bt(e,t);else if(e instanceof Bt)e.target=e.target||t;else{var i=e;e=new Bt(r,t),hk(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=pd(o,r,!0,e)&&i}if(o=e.g=t,i=pd(o,r,!0,e)&&i,i=pd(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=pd(o,r,!1,e)&&i}It.prototype.N=function(){if(It.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)jf(n[r]);delete t.g[e],t.h--}}this.J=null};It.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};It.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function pd(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&Xg(t.i,o),i=a.call(l,r)!==!1&&i}}return i&&!r.defaultPrevented}var Tw=ie.JSON.stringify;class JV{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function ZV(){var t=Cw;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class ej{constructor(){this.h=this.g=null}add(e,n){const r=yk.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var yk=new JV(()=>new tj,t=>t.reset());class tj{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function nj(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function rj(t){ie.setTimeout(()=>{throw t},0)}let ju,Bu=!1,Cw=new ej,wk=()=>{const t=ie.Promise.resolve(void 0);ju=()=>{t.then(ij)}};var ij=()=>{for(var t;t=ZV();){try{t.h.call(t.g)}catch(n){rj(n)}var e=yk;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Bu=!1};function zf(t,e){It.call(this),this.h=t||1,this.g=e||ie,this.j=jt(this.qb,this),this.l=Date.now()}_t(zf,It);z=zf.prototype;z.ga=!1;z.T=null;z.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Dt(this,"tick"),this.ga&&(xw(this),this.start()))}};z.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function xw(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}z.N=function(){zf.$.N.call(this),xw(this),delete this.g};function kw(t,e,n){if(typeof t=="function")n&&(t=jt(t,n));else if(t&&typeof t.handleEvent=="function")t=jt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:ie.setTimeout(t,e||0)}function Ek(t){t.g=kw(()=>{t.g=null,t.i&&(t.i=!1,Ek(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class sj extends os{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ek(this)}N(){super.N(),this.g&&(ie.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zu(t){os.call(this),this.h=t,this.g={}}_t(zu,os);var s1=[];function Ik(t,e,n,r){Array.isArray(n)||(n&&(s1[0]=n.toString()),n=s1);for(var i=0;i<n.length;i++){var s=fk(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function _k(t){ww(t.g,function(e,n){this.g.hasOwnProperty(n)&&Iw(e)},t),t.g={}}zu.prototype.N=function(){zu.$.N.call(this),_k(this)};zu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function qf(){this.g=!0}qf.prototype.Ea=function(){this.g=!1};function oj(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var d=c.split("_");o=2<=d.length&&d[1]=="type"?o+(c+"="+u+"&"):o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function aj(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function Jo(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+uj(t,n)+(r?" "+r:"")})}function lj(t,e){t.info(function(){return"TIMEOUT: "+e})}qf.prototype.info=function(){};function uj(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return Tw(n)}catch{return e}}var go={},o1=null;function Wf(){return o1=o1||new It}go.Ta="serverreachability";function Sk(t){Bt.call(this,go.Ta,t)}_t(Sk,Bt);function qu(t){const e=Wf();Dt(e,new Sk(e))}go.STAT_EVENT="statevent";function Tk(t,e){Bt.call(this,go.STAT_EVENT,t),this.stat=e}_t(Tk,Bt);function Yt(t){const e=Wf();Dt(e,new Tk(e,t))}go.Ua="timingevent";function Ck(t,e){Bt.call(this,go.Ua,t),this.size=e}_t(Ck,Bt);function Sc(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return ie.setTimeout(function(){t()},e)}var Hf={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},xk={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function bw(){}bw.prototype.h=null;function a1(t){return t.h||(t.h=t.i())}function kk(){}var Tc={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Nw(){Bt.call(this,"d")}_t(Nw,Bt);function Aw(){Bt.call(this,"c")}_t(Aw,Bt);var Zg;function Kf(){}_t(Kf,bw);Kf.prototype.g=function(){return new XMLHttpRequest};Kf.prototype.i=function(){return{}};Zg=new Kf;function Cc(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new zu(this),this.P=cj,t=Gg?125:void 0,this.V=new zf(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new bk}function bk(){this.i=null,this.g="",this.h=!1}var cj=45e3,ev={},Ph={};z=Cc.prototype;z.setTimeout=function(t){this.P=t};function tv(t,e,n){t.L=1,t.v=Qf(Gr(e)),t.s=n,t.S=!0,Nk(t,null)}function Nk(t,e){t.G=Date.now(),xc(t),t.A=Gr(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),Mk(n.i,"t",r),t.C=0,n=t.l.J,t.h=new bk,t.g=ib(t.l,n?e:null,!t.s),0<t.O&&(t.M=new sj(jt(t.Pa,t,t.g),t.O)),Ik(t.U,t.g,"readystatechange",t.nb),e=t.I?dk(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),qu(),oj(t.j,t.u,t.A,t.m,t.W,t.s)}z.nb=function(t){t=t.target;const e=this.M;e&&ur(t)==3?e.l():this.Pa(t)};z.Pa=function(t){try{if(t==this.g)e:{const c=ur(this.g);var e=this.g.Ia();const d=this.g.da();if(!(3>c)&&(c!=3||Gg||this.g&&(this.h.h||this.g.ja()||d1(this.g)))){this.J||c!=4||e==7||(e==8||0>=d?qu(3):qu(2)),Gf(this);var n=this.g.da();this.ca=n;t:if(Ak(this)){var r=d1(this.g);t="";var i=r.length,s=ur(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Rs(this),nu(this);var o="";break t}this.h.i=new ie.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,aj(this.j,this.u,this.A,this.m,this.W,c,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Uu(a)){var u=a;break t}}u=null}if(n=u)Jo(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,nv(this,n);else{this.i=!1,this.o=3,Yt(12),Rs(this),nu(this);break e}}this.S?(Rk(this,c,o),Gg&&this.i&&c==3&&(Ik(this.U,this.V,"tick",this.mb),this.V.start())):(Jo(this.j,this.m,o,null),nv(this,o)),c==4&&Rs(this),this.i&&!this.J&&(c==4?eb(this.l,this):(this.i=!1,xc(this)))}else Rj(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,Yt(12)):(this.o=0,Yt(13)),Rs(this),nu(this)}}}catch{}finally{}};function Ak(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function Rk(t,e,n){let r=!0,i;for(;!t.J&&t.C<n.length;)if(i=dj(t,n),i==Ph){e==4&&(t.o=4,Yt(14),r=!1),Jo(t.j,t.m,null,"[Incomplete Response]");break}else if(i==ev){t.o=4,Yt(15),Jo(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Jo(t.j,t.m,i,null),nv(t,i);Ak(t)&&i!=Ph&&i!=ev&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,Yt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),$w(e),e.M=!0,Yt(11))):(Jo(t.j,t.m,n,"[Invalid Chunked Response]"),Rs(t),nu(t))}z.mb=function(){if(this.g){var t=ur(this.g),e=this.g.ja();this.C<e.length&&(Gf(this),Rk(this,t,e),this.i&&t!=4&&xc(this))}};function dj(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?Ph:(n=Number(e.substring(n,r)),isNaN(n)?ev:(r+=1,r+n>e.length?Ph:(e=e.slice(r,r+n),t.C=r+n,e)))}z.cancel=function(){this.J=!0,Rs(this)};function xc(t){t.Y=Date.now()+t.P,Dk(t,t.P)}function Dk(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=Sc(jt(t.lb,t),e)}function Gf(t){t.B&&(ie.clearTimeout(t.B),t.B=null)}z.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(lj(this.j,this.A),this.L!=2&&(qu(),Yt(17)),Rs(this),this.o=2,nu(this)):Dk(this,this.Y-t)};function nu(t){t.l.H==0||t.J||eb(t.l,t)}function Rs(t){Gf(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,xw(t.V),_k(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function nv(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||rv(n.i,t))){if(!t.K&&rv(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Mh(n),Jf(n);else break e;Lw(n),Yt(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=Sc(jt(n.ib,n),6e3));if(1>=Vk(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Ds(n,11)}else if((t.K||n.g==t)&&Mh(n),!Uu(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(n.V=u[0],u=u[1],n.H==2)if(u[0]=="c"){n.K=u[1],n.pa=u[2];const c=u[3];c!=null&&(n.ra=c,n.l.info("VER="+n.ra));const d=u[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));const h=u[5];h!=null&&typeof h=="number"&&0<h&&(r=1.5*h,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const m=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(m){var s=r.i;s.g||m.indexOf("spdy")==-1&&m.indexOf("quic")==-1&&m.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(Rw(s,s.h),s.h=null))}if(r.F){const w=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;w&&(r.Da=w,Re(r.I,r.F,w))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=rb(r,r.J?r.pa:null,r.Y),o.K){jk(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.B&&(Gf(a),xc(a)),r.g=o}else Jk(r);0<n.j.length&&Zf(n)}else u[0]!="stop"&&u[0]!="close"||Ds(n,7);else n.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?Ds(n,7):Pw(n):u[0]!="noop"&&n.h&&n.h.Aa(u),n.A=0)}}qu(4)}catch{}}function hj(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Uf(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function fj(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Uf(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function Ok(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Uf(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=fj(t),r=hj(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var Pk=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pj(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function js(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof js){this.h=t.h,Lh(this,t.j),this.s=t.s,this.g=t.g,$h(this,t.m),this.l=t.l;var e=t.i,n=new Wu;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),l1(this,n),this.o=t.o}else t&&(e=String(t).match(Pk))?(this.h=!1,Lh(this,e[1]||"",!0),this.s=Fl(e[2]||""),this.g=Fl(e[3]||"",!0),$h(this,e[4]),this.l=Fl(e[5]||"",!0),l1(this,e[6]||"",!0),this.o=Fl(e[7]||"")):(this.h=!1,this.i=new Wu(null,this.h))}js.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Ul(e,u1,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Ul(e,u1,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Ul(n,n.charAt(0)=="/"?vj:gj,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Ul(n,wj)),t.join("")};function Gr(t){return new js(t)}function Lh(t,e,n){t.j=n?Fl(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function $h(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function l1(t,e,n){e instanceof Wu?(t.i=e,Ej(t.i,t.h)):(n||(e=Ul(e,yj)),t.i=new Wu(e,t.h))}function Re(t,e,n){t.i.set(e,n)}function Qf(t){return Re(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Fl(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ul(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,mj),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function mj(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var u1=/[#\/\?@]/g,gj=/[#\?:]/g,vj=/[#\?]/g,yj=/[#\?@]/g,wj=/#/g;function Wu(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function as(t){t.g||(t.g=new Map,t.h=0,t.i&&pj(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}z=Wu.prototype;z.add=function(t,e){as(this),this.i=null,t=Ja(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function Lk(t,e){as(t),e=Ja(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function $k(t,e){return as(t),e=Ja(t,e),t.g.has(e)}z.forEach=function(t,e){as(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};z.ta=function(){as(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};z.Z=function(t){as(this);let e=[];if(typeof t=="string")$k(this,t)&&(e=e.concat(this.g.get(Ja(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};z.set=function(t,e){return as(this),this.i=null,t=Ja(this,t),$k(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};z.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function Mk(t,e,n){Lk(t,e),0<n.length&&(t.i=null,t.g.set(Ja(t,e),vw(n)),t.h+=n.length)}z.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function Ja(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Ej(t,e){e&&!t.j&&(as(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(Lk(this,r),Mk(this,i,n))},t)),t.j=e}var Ij=class{constructor(t,e){this.g=t,this.map=e}};function Fk(t){this.l=t||_j,ie.PerformanceNavigationTiming?(t=ie.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(ie.g&&ie.g.Ka&&ie.g.Ka()&&ie.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var _j=10;function Uk(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function Vk(t){return t.h?1:t.g?t.g.size:0}function rv(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Rw(t,e){t.g?t.g.add(e):t.h=e}function jk(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}Fk.prototype.cancel=function(){if(this.i=Bk(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function Bk(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return vw(t.i)}var Sj=class{stringify(t){return ie.JSON.stringify(t,void 0)}parse(t){return ie.JSON.parse(t,void 0)}};function Tj(){this.g=new Sj}function Cj(t,e,n){const r=n||"";try{Ok(t,function(i,s){let o=i;Ic(i)&&(o=Tw(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function xj(t,e){const n=new qf;if(ie.Image){const r=new Image;r.onload=fd(md,n,r,"TestLoadImage: loaded",!0,e),r.onerror=fd(md,n,r,"TestLoadImage: error",!1,e),r.onabort=fd(md,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=fd(md,n,r,"TestLoadImage: timeout",!1,e),ie.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function md(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function kc(t){this.l=t.fc||null,this.j=t.ob||!1}_t(kc,bw);kc.prototype.g=function(){return new Yf(this.l,this.j)};kc.prototype.i=function(t){return function(){return t}}({});function Yf(t,e){It.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Dw,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}_t(Yf,It);var Dw=0;z=Yf.prototype;z.open=function(t,e){if(this.readyState!=Dw)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Hu(this)};z.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||ie).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};z.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,bc(this)),this.readyState=Dw};z.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Hu(this)),this.g&&(this.readyState=3,Hu(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof ie.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;zk(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function zk(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}z.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?bc(this):Hu(this),this.readyState==3&&zk(this)}};z.Za=function(t){this.g&&(this.response=this.responseText=t,bc(this))};z.Ya=function(t){this.g&&(this.response=t,bc(this))};z.ka=function(){this.g&&bc(this)};function bc(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Hu(t)}z.setRequestHeader=function(t,e){this.v.append(t,e)};z.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};z.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Hu(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Yf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var kj=ie.JSON.parse;function Ye(t){It.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=qk,this.L=this.M=!1}_t(Ye,It);var qk="",bj=/^https?$/i,Nj=["POST","PUT"];z=Ye.prototype;z.Oa=function(t){this.M=t};z.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Zg.g(),this.C=this.u?a1(this.u):a1(Zg),this.g.onreadystatechange=jt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){c1(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=ie.FormData&&t instanceof ie.FormData,!(0<=ak(Nj,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Kk(this),0<this.B&&((this.L=Aj(this.g))?(this.g.timeout=this.B,this.g.ontimeout=jt(this.ua,this)):this.A=kw(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){c1(this,s)}};function Aj(t){return Ca&&typeof t.timeout=="number"&&t.ontimeout!==void 0}z.ua=function(){typeof gw<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Dt(this,"timeout"),this.abort(8))};function c1(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Wk(t),Xf(t)}function Wk(t){t.F||(t.F=!0,Dt(t,"complete"),Dt(t,"error"))}z.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Dt(this,"complete"),Dt(this,"abort"),Xf(this))};z.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Xf(this,!0)),Ye.$.N.call(this)};z.La=function(){this.s||(this.G||this.v||this.l?Hk(this):this.kb())};z.kb=function(){Hk(this)};function Hk(t){if(t.h&&typeof gw<"u"&&(!t.C[1]||ur(t)!=4||t.da()!=2)){if(t.v&&ur(t)==4)kw(t.La,0,t);else if(Dt(t,"readystatechange"),ur(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(Pk)[1]||null;!i&&ie.self&&ie.self.location&&(i=ie.self.location.protocol.slice(0,-1)),r=!bj.test(i?i.toLowerCase():"")}n=r}if(n)Dt(t,"complete"),Dt(t,"success");else{t.m=6;try{var s=2<ur(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",Wk(t)}}finally{Xf(t)}}}}function Xf(t,e){if(t.g){Kk(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Dt(t,"ready");try{n.onreadystatechange=r}catch{}}}function Kk(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(ie.clearTimeout(t.A),t.A=null)}z.isActive=function(){return!!this.g};function ur(t){return t.g?t.g.readyState:0}z.da=function(){try{return 2<ur(this)?this.g.status:-1}catch{return-1}};z.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};z.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),kj(e)}};function d1(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case qk:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function Rj(t){const e={};t=(t.g&&2<=ur(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Uu(t[r]))continue;var n=nj(t[r]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}QV(e,function(r){return r.join(", ")})}z.Ia=function(){return this.m};z.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function Gk(t){let e="";return ww(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Ow(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Gk(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Re(t,e,n))}function Il(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Qk(t){this.Ga=0,this.j=[],this.l=new qf,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Il("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Il("baseRetryDelayMs",5e3,t),this.hb=Il("retryDelaySeedMs",1e4,t),this.eb=Il("forwardChannelMaxRetries",2,t),this.xa=Il("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new Fk(t&&t.concurrentRequestLimit),this.Ja=new Tj,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}z=Qk.prototype;z.ra=8;z.H=1;function Pw(t){if(Yk(t),t.H==3){var e=t.W++,n=Gr(t.I);if(Re(n,"SID",t.K),Re(n,"RID",e),Re(n,"TYPE","terminate"),Nc(t,n),e=new Cc(t,t.l,e),e.L=2,e.v=Qf(Gr(n)),n=!1,ie.navigator&&ie.navigator.sendBeacon)try{n=ie.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&ie.Image&&(new Image().src=e.v,n=!0),n||(e.g=ib(e.l,null),e.g.ha(e.v)),e.G=Date.now(),xc(e)}nb(t)}function Jf(t){t.g&&($w(t),t.g.cancel(),t.g=null)}function Yk(t){Jf(t),t.u&&(ie.clearTimeout(t.u),t.u=null),Mh(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&ie.clearTimeout(t.m),t.m=null)}function Zf(t){if(!Uk(t.i)&&!t.m){t.m=!0;var e=t.Na;ju||wk(),Bu||(ju(),Bu=!0),Cw.add(e,t),t.C=0}}function Dj(t,e){return Vk(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Sc(jt(t.Na,t,e),tb(t,t.C)),t.C++,!0)}z.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new Cc(this,this.l,t);let s=this.s;if(this.U&&(s?(s=dk(s),hk(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Xk(this,i,e),n=Gr(this.I),Re(n,"RID",t),Re(n,"CVER",22),this.F&&Re(n,"X-HTTP-Session-Id",this.F),Nc(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(Gk(s)))+"&"+e:this.o&&Ow(n,this.o,s)),Rw(this.i,i),this.bb&&Re(n,"TYPE","init"),this.P?(Re(n,"$req",e),Re(n,"SID","null"),i.aa=!0,tv(i,n,null)):tv(i,n,e),this.H=2}}else this.H==3&&(t?h1(this,t):this.j.length==0||Uk(this.i)||h1(this))};function h1(t,e){var n;e?n=e.m:n=t.W++;const r=Gr(t.I);Re(r,"SID",t.K),Re(r,"RID",n),Re(r,"AID",t.V),Nc(t,r),t.o&&t.s&&Ow(r,t.o,t.s),n=new Cc(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=Xk(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Rw(t.i,n),tv(n,r,e)}function Nc(t,e){t.na&&ww(t.na,function(n,r){Re(e,r,n)}),t.h&&Ok({},function(n,r){Re(e,r,n)})}function Xk(t,e,n){n=Math.min(t.j.length,n);var r=t.h?jt(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<n;l++){let u=i[l].g;const c=i[l].map;if(u-=s,0>u)s=Math.max(0,i[l].g-100),a=!1;else try{Cj(c,o,"req"+u+"_")}catch{r&&r(c)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function Jk(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;ju||wk(),Bu||(ju(),Bu=!0),Cw.add(e,t),t.A=0}}function Lw(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Sc(jt(t.Ma,t),tb(t,t.A)),t.A++,!0)}z.Ma=function(){if(this.u=null,Zk(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Sc(jt(this.jb,this),t)}};z.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Yt(10),Jf(this),Zk(this))};function $w(t){t.B!=null&&(ie.clearTimeout(t.B),t.B=null)}function Zk(t){t.g=new Cc(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Gr(t.wa);Re(e,"RID","rpc"),Re(e,"SID",t.K),Re(e,"AID",t.V),Re(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Re(e,"TO",t.qa),Re(e,"TYPE","xmlhttp"),Nc(t,e),t.o&&t.s&&Ow(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=Qf(Gr(e)),n.s=null,n.S=!0,Nk(n,t)}z.ib=function(){this.v!=null&&(this.v=null,Jf(this),Lw(this),Yt(19))};function Mh(t){t.v!=null&&(ie.clearTimeout(t.v),t.v=null)}function eb(t,e){var n=null;if(t.g==e){Mh(t),$w(t),t.g=null;var r=2}else if(rv(t.i,e))n=e.F,jk(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var i=t.C;r=Wf(),Dt(r,new Ck(r,n)),Zf(t)}else Jk(t);else if(i=e.o,i==3||i==0&&0<e.ca||!(r==1&&Dj(t,e)||r==2&&Lw(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Ds(t,5);break;case 4:Ds(t,10);break;case 3:Ds(t,6);break;default:Ds(t,2)}}}function tb(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Ds(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=jt(t.pb,t);n||(n=new js("//www.google.com/images/cleardot.gif"),ie.location&&ie.location.protocol=="http"||Lh(n,"https"),Qf(n)),xj(n.toString(),r)}else Yt(2);t.H=0,t.h&&t.h.za(e),nb(t),Yk(t)}z.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Yt(2)):(this.l.info("Failed to ping google.com"),Yt(1))};function nb(t){if(t.H=0,t.ma=[],t.h){const e=Bk(t.i);(e.length!=0||t.j.length!=0)&&(n1(t.ma,e),n1(t.ma,t.j),t.i.i.length=0,vw(t.j),t.j.length=0),t.h.ya()}}function rb(t,e,n){var r=n instanceof js?Gr(n):new js(n);if(r.g!="")e&&(r.g=e+"."+r.g),$h(r,r.m);else{var i=ie.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new js(null);r&&Lh(s,r),e&&(s.g=e),i&&$h(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&Re(r,n,e),Re(r,"VER",t.ra),Nc(t,r),r}function ib(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new Ye(new kc({ob:!0})):new Ye(t.va),e.Oa(t.J),e}z.isActive=function(){return!!this.h&&this.h.isActive(this)};function sb(){}z=sb.prototype;z.Ba=function(){};z.Aa=function(){};z.za=function(){};z.ya=function(){};z.isActive=function(){return!0};z.Va=function(){};function Fh(){if(Ca&&!(10<=Number(WV)))throw Error("Environmental error: no available transport.")}Fh.prototype.g=function(t,e){return new _n(t,e)};function _n(t,e){It.call(this),this.g=new Qk(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Uu(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Uu(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Za(this)}_t(_n,It);_n.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Yt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=rb(t,null,t.Y),Zf(t)};_n.prototype.close=function(){Pw(this.g)};_n.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Tw(t),t=n);e.j.push(new Ij(e.fb++,t)),e.H==3&&Zf(e)};_n.prototype.N=function(){this.g.h=null,delete this.j,Pw(this.g),delete this.g,_n.$.N.call(this)};function ob(t){Nw.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}_t(ob,Nw);function ab(){Aw.call(this),this.status=1}_t(ab,Aw);function Za(t){this.g=t}_t(Za,sb);Za.prototype.Ba=function(){Dt(this.g,"a")};Za.prototype.Aa=function(t){Dt(this.g,new ob(t))};Za.prototype.za=function(t){Dt(this.g,new ab)};Za.prototype.ya=function(){Dt(this.g,"b")};function Oj(){this.blockSize=-1}function Xn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}_t(Xn,Oj);Xn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Im(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}Xn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)Im(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){Im(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){Im(this,r),i=0;break}}this.h=i,this.i+=e};Xn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function Te(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var Pj={};function Mw(t){return-128<=t&&128>t?BV(t,function(e){return new Te([e|0],0>e?-1:0)}):new Te([t|0],0>t?-1:0)}function cr(t){if(isNaN(t)||!isFinite(t))return da;if(0>t)return bt(cr(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=iv;return new Te(e,0)}function lb(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return bt(lb(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=cr(Math.pow(e,8)),r=da,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=cr(Math.pow(e,s)),r=r.R(s).add(cr(o))):(r=r.R(n),r=r.add(cr(o)))}return r}var iv=4294967296,da=Mw(0),sv=Mw(1),f1=Mw(16777216);z=Te.prototype;z.ea=function(){if(Rn(this))return-bt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:iv+r)*e,e*=iv}return t};z.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if($r(this))return"0";if(Rn(this))return"-"+bt(this).toString(t);for(var e=cr(Math.pow(t,6)),n=this,r="";;){var i=Vh(n,e).g;n=Uh(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,$r(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};z.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function $r(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Rn(t){return t.h==-1}z.X=function(t){return t=Uh(this,t),Rn(t)?-1:$r(t)?0:1};function bt(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Te(n,~t.h).add(sv)}z.abs=function(){return Rn(this)?bt(this):this};z.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Te(n,n[n.length-1]&-2147483648?-1:0)};function Uh(t,e){return t.add(bt(e))}z.R=function(t){if($r(this)||$r(t))return da;if(Rn(this))return Rn(t)?bt(this).R(bt(t)):bt(bt(this).R(t));if(Rn(t))return bt(this.R(bt(t)));if(0>this.X(f1)&&0>t.X(f1))return cr(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,l=t.D(i)&65535;n[2*r+2*i]+=o*l,gd(n,2*r+2*i),n[2*r+2*i+1]+=s*l,gd(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,gd(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,gd(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Te(n,0)};function gd(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function _l(t,e){this.g=t,this.h=e}function Vh(t,e){if($r(e))throw Error("division by zero");if($r(t))return new _l(da,da);if(Rn(t))return e=Vh(bt(t),e),new _l(bt(e.g),bt(e.h));if(Rn(e))return e=Vh(t,bt(e)),new _l(bt(e.g),e.h);if(30<t.g.length){if(Rn(t)||Rn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=sv,r=e;0>=r.X(t);)n=p1(n),r=p1(r);var i=bo(n,1),s=bo(r,1);for(r=bo(r,2),n=bo(n,2);!$r(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=bo(r,1),n=bo(n,1)}return e=Uh(t,i.R(e)),new _l(i,e)}for(i=da;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=cr(n),o=s.R(e);Rn(o)||0<o.X(t);)n-=r,s=cr(n),o=s.R(e);$r(s)&&(s=sv),i=i.add(s),t=Uh(t,o)}return new _l(i,t)}z.gb=function(t){return Vh(this,t).h};z.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Te(n,this.h&t.h)};z.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Te(n,this.h|t.h)};z.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Te(n,this.h^t.h)};function p1(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Te(n,t.h)}function bo(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Te(i,t.h)}Fh.prototype.createWebChannel=Fh.prototype.g;_n.prototype.send=_n.prototype.u;_n.prototype.open=_n.prototype.m;_n.prototype.close=_n.prototype.close;Hf.NO_ERROR=0;Hf.TIMEOUT=8;Hf.HTTP_ERROR=6;xk.COMPLETE="complete";kk.EventType=Tc;Tc.OPEN="a";Tc.CLOSE="b";Tc.ERROR="c";Tc.MESSAGE="d";It.prototype.listen=It.prototype.O;Ye.prototype.listenOnce=Ye.prototype.P;Ye.prototype.getLastError=Ye.prototype.Sa;Ye.prototype.getLastErrorCode=Ye.prototype.Ia;Ye.prototype.getStatus=Ye.prototype.da;Ye.prototype.getResponseJson=Ye.prototype.Wa;Ye.prototype.getResponseText=Ye.prototype.ja;Ye.prototype.send=Ye.prototype.ha;Ye.prototype.setWithCredentials=Ye.prototype.Oa;Xn.prototype.digest=Xn.prototype.l;Xn.prototype.reset=Xn.prototype.reset;Xn.prototype.update=Xn.prototype.j;Te.prototype.add=Te.prototype.add;Te.prototype.multiply=Te.prototype.R;Te.prototype.modulo=Te.prototype.gb;Te.prototype.compare=Te.prototype.X;Te.prototype.toNumber=Te.prototype.ea;Te.prototype.toString=Te.prototype.toString;Te.prototype.getBits=Te.prototype.D;Te.fromNumber=cr;Te.fromString=lb;var Lj=function(){return new Fh},$j=function(){return Wf()},_m=Hf,Mj=xk,Fj=go,m1={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Uj=kc,vd=kk,Vj=Ye,jj=Xn,ha=Te;const g1="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yt.UNAUTHENTICATED=new yt(null),yt.GOOGLE_CREDENTIALS=new yt("google-credentials-uid"),yt.FIRST_PARTY=new yt("first-party-uid"),yt.MOCK_USER=new yt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let el="9.23.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qi=new Nf("@firebase/firestore");function ov(){return qi.logLevel}function Bj(t){qi.setLogLevel(t)}function O(t,...e){if(qi.logLevel<=me.DEBUG){const n=e.map(Fw);qi.debug(`Firestore (${el}): ${t}`,...n)}}function Ze(t,...e){if(qi.logLevel<=me.ERROR){const n=e.map(Fw);qi.error(`Firestore (${el}): ${t}`,...n)}}function Jn(t,...e){if(qi.logLevel<=me.WARN){const n=e.map(Fw);qi.warn(`Firestore (${el}): ${t}`,...n)}}function Fw(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H(t="Unexpected state"){const e=`FIRESTORE (${el}) INTERNAL ASSERTION FAILED: `+t;throw Ze(e),new Error(e)}function ee(t,e){t||H()}function zj(t,e){t||H()}function B(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class D extends Jt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(yt.UNAUTHENTICATED))}shutdown(){}}class Wj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Hj{constructor(e){this.t=e,this.currentUser=yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Et;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Et,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{O("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(O("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Et)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(O("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ee(typeof r.accessToken=="string"),new ub(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ee(e===null||typeof e=="string"),new yt(e)}}class Kj{constructor(e,n,r){this.h=e,this.l=n,this.m=r,this.type="FirstParty",this.user=yt.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Gj{constructor(e,n,r){this.h=e,this.l=n,this.m=r}getToken(){return Promise.resolve(new Kj(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Qj{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Yj{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,n){const r=s=>{s.error!=null&&O("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.T;return this.T=s.token,O("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{O("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.I.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.I.getImmediate({optional:!0});s?i(s):O("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ee(typeof n.token=="string"),this.T=n.token,new Qj(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xj(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=Xj(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function se(t,e){return t<e?-1:t>e?1:0}function xa(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function db(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new D(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new D(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new D(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new D(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return je.fromMillis(Date.now())}static fromDate(e){return je.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new je(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?se(this.nanoseconds,e.nanoseconds):se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Z(e)}static min(){return new Z(new je(0,0))}static max(){return new Z(new je(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,n,r){n===void 0?n=0:n>e.length&&H(),r===void 0?r=e.length-n:r>e.length-n&&H(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ku.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ku?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ge extends Ku{construct(e,n,r){return new ge(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new D(k.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ge(n)}static emptyPath(){return new ge([])}}const Jj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class et extends Ku{construct(e,n,r){return new et(e,n,r)}static isValidIdentifier(e){return Jj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),et.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new et(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new D(k.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new D(k.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new D(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new D(k.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new et(n)}static emptyPath(){return new et([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.path=e}static fromPath(e){return new F(ge.fromString(e))}static fromName(e){return new F(ge.fromString(e).popFirst(5))}static empty(){return new F(ge.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ge.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ge.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new F(new ge(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function av(t){return t.fields.find(e=>e.kind===2)}function Is(t){return t.fields.filter(e=>e.kind!==2)}hb.UNKNOWN_ID=-1;class Zj{constructor(e,n){this.fieldPath=e,this.kind=n}}class jh{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new jh(0,Sn.min())}}function fb(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Z.fromTimestamp(r===1e9?new je(n+1,0):new je(n,r));return new Sn(i,F.empty(),e)}function pb(t){return new Sn(t.readTime,t.key,-1)}class Sn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Sn(Z.min(),F.empty(),-1)}static max(){return new Sn(Z.max(),F.empty(),-1)}}function Uw(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=F.comparator(t.documentKey,e.documentKey),n!==0?n:se(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ls(t){if(t.code!==k.FAILED_PRECONDITION||t.message!==mb)throw t;O("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&H(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new x((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof x?n:x.resolve(n)}catch(n){return x.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):x.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):x.reject(n)}static resolve(e){return new x((n,r)=>{n(e)})}static reject(e){return new x((n,r)=>{r(e)})}static waitFor(e){return new x((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=x.resolve(!1);for(const r of e)n=n.next(i=>i?x.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new x((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(c=>{o[u]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(e,n){return new x((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.v=new Et,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{n.error?this.v.reject(new ru(e,n.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=Vw(r.target.error);this.v.reject(new ru(e,i))}}static open(e,n,r,i){try{return new ep(n,e.transaction(i,r))}catch(s){throw new ru(n,s)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(O("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new tB(n)}}class Hn{constructor(e,n,r){this.name=e,this.version=n,this.V=r,Hn.S(Ke())===12.2&&Ze("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return O("SimpleDb","Removing database:",e),_s(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Ru())return!1;if(Hn.C())return!0;const e=Ke(),n=Hn.S(e),r=0<n&&n<10,i=Hn.N(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&((e=process.env)===null||e===void 0?void 0:e.k)==="YES"}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async $(e){return this.db||(O("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new ru(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new D(k.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new D(k.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new ru(e,o))},i.onupgradeneeded=s=>{O("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.V.O(o,i.transaction,s.oldVersion,this.version).next(()=>{O("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.F&&(this.db.onversionchange=n=>this.F(n)),this.db}B(e){this.F=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.$(e);const a=ep.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(u=>(a.P(),u)).catch(u=>(a.abort(u),x.reject(u))).toPromise();return l.catch(()=>{}),await a.R,l}catch(a){const l=a,u=l.name!=="FirebaseError"&&o<3;if(O("SimpleDb","Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}class eB{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return _s(this.L.delete())}}class ru extends D{constructor(e,n){super(k.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function us(t){return t.name==="IndexedDbTransactionError"}class tB{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(O("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(O("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),_s(r)}add(e){return O("SimpleDb","ADD",this.store.name,e,e),_s(this.store.add(e))}get(e){return _s(this.store.get(e)).next(n=>(n===void 0&&(n=null),O("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return O("SimpleDb","DELETE",this.store.name,e),_s(this.store.delete(e))}count(){return O("SimpleDb","COUNT",this.store.name),_s(this.store.count())}j(e,n){const r=this.options(e,n);if(r.index||typeof this.store.getAll!="function"){const i=this.cursor(r),s=[];return this.W(i,(o,a)=>{s.push(a)}).next(()=>s)}{const i=this.store.getAll(r.range);return new x((s,o)=>{i.onerror=a=>{o(a.target.error)},i.onsuccess=a=>{s(a.target.result)}})}}H(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new x((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}J(e,n){O("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.Y=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}X(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.W(i,n)}Z(e){const n=this.cursor({});return new x((r,i)=>{n.onerror=s=>{const o=Vw(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,n){const r=[];return new x((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new eB(a),u=n(a.primaryKey,a.value,l);if(u instanceof x){const c=u.catch(d=>(l.done(),x.reject(d)));r.push(c)}l.isDone?i():l.K===null?a.continue():a.continue(l.K)}}).next(()=>x.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function _s(t){return new x((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=Vw(r.target.error);n(i)}})}let v1=!1;function Vw(t){const e=Hn.S(Ke());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new D("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return v1||(v1=!0,setTimeout(()=>{throw r},0)),r}}return t}class nB{constructor(e,n){this.asyncQueue=e,this.tt=n,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}et(e){O("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{O("IndexBackiller",`Documents written: ${await this.tt.nt()}`)}catch(n){us(n)?O("IndexBackiller","Ignoring IndexedDB error during index backfill: ",n):await ls(n)}await this.et(6e4)})}}class rB{constructor(e,n){this.localStore=e,this.persistence=n}async nt(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.st(n,e))}st(e,n){const r=new Set;let i=n,s=!0;return x.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return O("IndexBackiller",`Processing collection: ${o}`),this.it(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}it(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.rt(i,s)).next(a=>(O("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}rt(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=pb(s);Uw(o,r)>0&&(r=o)}),new Sn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ot(r),this.ut=r=>n.writeSequenceNumber(r))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}an.ct=-1;function Ac(t){return t==null}function Gu(t){return t===0&&1/t==-1/0}function vb(t){return typeof t=="number"&&Number.isInteger(t)&&!Gu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=y1(e)),e=iB(t.get(n),e);return y1(e)}function iB(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function y1(t){return t+""}function dr(t){const e=t.length;if(ee(e>=2),e===2)return ee(t.charAt(0)===""&&t.charAt(1)===""),ge.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>n)&&H(),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:H()}s=o+2}return new ge(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wd(t,e){return[t,Zt(e)]}function yb(t,e,n){return[t,Zt(e),n]}const sB={},oB=["prefixPath","collectionGroup","readTime","documentId"],aB=["prefixPath","collectionGroup","documentId"],lB=["collectionGroup","readTime","prefixPath","documentId"],uB=["canonicalId","targetId"],cB=["targetId","path"],dB=["path","targetId"],hB=["collectionId","parent"],fB=["indexId","uid"],pB=["uid","sequenceNumber"],mB=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],gB=["indexId","uid","orderedDocumentKey"],vB=["userId","collectionPath","documentId"],yB=["userId","collectionPath","largestBatchId"],wB=["userId","collectionGroup","largestBatchId"],wb=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],EB=[...wb,"documentOverlays"],Eb=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ib=Eb,IB=[...Ib,"indexConfiguration","indexState","indexEntries"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv extends gb{constructor(e,n){super(),this.ht=e,this.currentSequenceNumber=n}}function St(t,e){const n=B(t);return Hn.M(n.ht,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E1(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function vo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function _b(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e,n){this.comparator=e,this.root=n||kt.EMPTY}insert(e,n){return new ke(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,kt.BLACK,null,null))}remove(e){return new ke(this.comparator,this.root.remove(e,this.comparator).copy(null,null,kt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new yd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new yd(this.root,e,this.comparator,!1)}getReverseIterator(){return new yd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new yd(this.root,e,this.comparator,!0)}}class yd{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class kt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??kt.RED,this.left=i??kt.EMPTY,this.right=s??kt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new kt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return kt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return kt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw H();const e=this.left.check();if(e!==this.right.check())throw H();return e+(this.isRed()?0:1)}}kt.EMPTY=null,kt.RED=!0,kt.BLACK=!1;kt.EMPTY=new class{constructor(){this.size=0}get key(){throw H()}get value(){throw H()}get color(){throw H()}get left(){throw H()}get right(){throw H()}copy(t,e,n,r,i){return this}insert(t,e,n){return new kt(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e){this.comparator=e,this.data=new ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new I1(this.data.getIterator())}getIteratorFrom(e){return new I1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Le)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Le(this.comparator);return n.data=e,n}}class I1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function No(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.fields=e,e.sort(et.comparator)}static empty(){return new ln([])}unionWith(e){let n=new Le(et.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ln(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return xa(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _B(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Sb("Invalid base64 string: "+i):i}}(e);return new ht(n)}static fromUint8Array(e){const n=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new ht(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ht.EMPTY_BYTE_STRING=new ht("");const SB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wi(t){if(ee(!!t),typeof t=="string"){let e=0;const n=SB.exec(t);if(ee(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Qe(t.seconds),nanos:Qe(t.nanos)}}function Qe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Hi(t){return typeof t=="string"?ht.fromBase64String(t):ht.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function jw(t){const e=t.mapValue.fields.__previous_value__;return tp(e)?jw(e):e}function Qu(t){const e=Wi(t.mapValue.fields.__local_write_time__.timestampValue);return new je(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TB{constructor(e,n,r,i,s,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class Ki{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ki("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ki&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ti={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Hd={nullValue:"NULL_VALUE"};function eo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?tp(t)?4:Tb(t)?9007199254740991:10:H()}function Sr(t,e){if(t===e)return!0;const n=eo(t);if(n!==eo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Qu(t).isEqual(Qu(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=Wi(r.timestampValue),o=Wi(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return Hi(r.bytesValue).isEqual(Hi(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return Qe(r.geoPointValue.latitude)===Qe(i.geoPointValue.latitude)&&Qe(r.geoPointValue.longitude)===Qe(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Qe(r.integerValue)===Qe(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=Qe(r.doubleValue),o=Qe(i.doubleValue);return s===o?Gu(s)===Gu(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return xa(t.arrayValue.values||[],e.arrayValue.values||[],Sr);case 10:return function(r,i){const s=r.mapValue.fields||{},o=i.mapValue.fields||{};if(E1(s)!==E1(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(o[a]===void 0||!Sr(s[a],o[a])))return!1;return!0}(t,e);default:return H()}}function Yu(t,e){return(t.values||[]).find(n=>Sr(n,e))!==void 0}function Gi(t,e){if(t===e)return 0;const n=eo(t),r=eo(e);if(n!==r)return se(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return se(t.booleanValue,e.booleanValue);case 2:return function(i,s){const o=Qe(i.integerValue||i.doubleValue),a=Qe(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return _1(t.timestampValue,e.timestampValue);case 4:return _1(Qu(t),Qu(e));case 5:return se(t.stringValue,e.stringValue);case 6:return function(i,s){const o=Hi(i),a=Hi(s);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(i,s){const o=i.split("/"),a=s.split("/");for(let l=0;l<o.length&&l<a.length;l++){const u=se(o[l],a[l]);if(u!==0)return u}return se(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,s){const o=se(Qe(i.latitude),Qe(s.latitude));return o!==0?o:se(Qe(i.longitude),Qe(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,s){const o=i.values||[],a=s.values||[];for(let l=0;l<o.length&&l<a.length;++l){const u=Gi(o[l],a[l]);if(u)return u}return se(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===Ti.mapValue&&s===Ti.mapValue)return 0;if(i===Ti.mapValue)return 1;if(s===Ti.mapValue)return-1;const o=i.fields||{},a=Object.keys(o),l=s.fields||{},u=Object.keys(l);a.sort(),u.sort();for(let c=0;c<a.length&&c<u.length;++c){const d=se(a[c],u[c]);if(d!==0)return d;const h=Gi(o[a[c]],l[u[c]]);if(h!==0)return h}return se(a.length,u.length)}(t.mapValue,e.mapValue);default:throw H()}}function _1(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return se(t,e);const n=Wi(t),r=Wi(e),i=se(n.seconds,r.seconds);return i!==0?i:se(n.nanos,r.nanos)}function ka(t){return uv(t)}function uv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const i=Wi(r);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Hi(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,F.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let i="[",s=!0;for(const o of r.values||[])s?s=!1:i+=",",i+=uv(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const a of i)o?o=!1:s+=",",s+=`${a}:${uv(r.fields[a])}`;return s+"}"}(t.mapValue):H();var e,n}function to(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function cv(t){return!!t&&"integerValue"in t}function Xu(t){return!!t&&"arrayValue"in t}function S1(t){return!!t&&"nullValue"in t}function T1(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Kd(t){return!!t&&"mapValue"in t}function iu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return vo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=iu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=iu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Tb(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function CB(t){return"nullValue"in t?Hd:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?to(Ki.empty(),F.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:H()}function xB(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?to(Ki.empty(),F.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Ti:H()}function C1(t,e){const n=Gi(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function x1(t,e){const n=Gi(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.value=e}static empty(){return new Nt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Kd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=iu(n)}setAll(e){let n=et.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=iu(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Kd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Sr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Kd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){vo(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Nt(iu(this.value))}}function Cb(t){const e=[];return vo(t.fields,(n,r)=>{const i=new et([n]);if(Kd(r)){const s=Cb(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new ln(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new De(e,0,Z.min(),Z.min(),Z.min(),Nt.empty(),0)}static newFoundDocument(e,n,r,i){return new De(e,1,n,Z.min(),r,i,0)}static newNoDocument(e,n){return new De(e,2,n,Z.min(),Z.min(),Nt.empty(),0)}static newUnknownDocument(e,n){return new De(e,3,n,Z.min(),Z.min(),Nt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof De&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new De(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e,n){this.position=e,this.inclusive=n}}function k1(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=F.comparator(F.fromName(o.referenceValue),n.key):r=Gi(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function b1(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Sr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e,n="asc"){this.field=e,this.dir=n}}function kB(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{}class he extends xb{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new bB(e,n,r):n==="array-contains"?new RB(e,r):n==="in"?new Db(e,r):n==="not-in"?new DB(e,r):n==="array-contains-any"?new OB(e,r):new he(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new NB(e,r):new AB(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Gi(n,this.value)):n!==null&&eo(this.value)===eo(n)&&this.matchesComparison(Gi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return H()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class _e extends xb{constructor(e,n){super(),this.filters=e,this.op=n,this.lt=null}static create(e,n){return new _e(e,n)}matches(e){return ba(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.lt!==null||(this.lt=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(n=>n.isInequality());return e!==null?e.field:null}ft(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function ba(t){return t.op==="and"}function dv(t){return t.op==="or"}function Bw(t){return kb(t)&&ba(t)}function kb(t){for(const e of t.filters)if(e instanceof _e)return!1;return!0}function hv(t){if(t instanceof he)return t.field.canonicalString()+t.op.toString()+ka(t.value);if(Bw(t))return t.filters.map(e=>hv(e)).join(",");{const e=t.filters.map(n=>hv(n)).join(",");return`${t.op}(${e})`}}function bb(t,e){return t instanceof he?function(n,r){return r instanceof he&&n.op===r.op&&n.field.isEqual(r.field)&&Sr(n.value,r.value)}(t,e):t instanceof _e?function(n,r){return r instanceof _e&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce((i,s,o)=>i&&bb(s,r.filters[o]),!0):!1}(t,e):void H()}function Nb(t,e){const n=t.filters.concat(e);return _e.create(n,t.op)}function Ab(t){return t instanceof he?function(e){return`${e.field.canonicalString()} ${e.op} ${ka(e.value)}`}(t):t instanceof _e?function(e){return e.op.toString()+" {"+e.getFilters().map(Ab).join(" ,")+"}"}(t):"Filter"}class bB extends he{constructor(e,n,r){super(e,n,r),this.key=F.fromName(r.referenceValue)}matches(e){const n=F.comparator(e.key,this.key);return this.matchesComparison(n)}}class NB extends he{constructor(e,n){super(e,"in",n),this.keys=Rb("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class AB extends he{constructor(e,n){super(e,"not-in",n),this.keys=Rb("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Rb(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>F.fromName(r.referenceValue))}class RB extends he{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Xu(n)&&Yu(n.arrayValue,this.value)}}class Db extends he{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Yu(this.value.arrayValue,n)}}class DB extends he{constructor(e,n){super(e,"not-in",n)}matches(e){if(Yu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Yu(this.value.arrayValue,n)}}class OB extends he{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Xu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Yu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PB{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.dt=null}}function fv(t,e=null,n=[],r=[],i=null,s=null,o=null){return new PB(t,e,n,r,i,s,o)}function no(t){const e=B(t);if(e.dt===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>hv(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Ac(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ka(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ka(r)).join(",")),e.dt=n}return e.dt}function Rc(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!kB(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!bb(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!b1(t.startAt,e.startAt)&&b1(t.endAt,e.endAt)}function Bh(t){return F.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function zh(t,e){return t.filters.filter(n=>n instanceof he&&n.field.isEqual(e))}function N1(t,e,n){let r=Hd,i=!0;for(const s of zh(t,e)){let o=Hd,a=!0;switch(s.op){case"<":case"<=":o=CB(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Hd}C1({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];C1({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function A1(t,e,n){let r=Ti,i=!0;for(const s of zh(t,e)){let o=Ti,a=!0;switch(s.op){case">=":case">":o=xB(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Ti}x1({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];x1({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.wt=null,this._t=null,this.startAt,this.endAt}}function Ob(t,e,n,r,i,s,o,a){return new ti(t,e,n,r,i,s,o,a)}function tl(t){return new ti(t)}function R1(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function zw(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function np(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function qw(t){return t.collectionGroup!==null}function Bs(t){const e=B(t);if(e.wt===null){e.wt=[];const n=np(e),r=zw(e);if(n!==null&&r===null)n.isKeyField()||e.wt.push(new fa(n)),e.wt.push(new fa(et.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.wt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new fa(et.keyField(),s))}}}return e.wt}function mn(t){const e=B(t);if(!e._t)if(e.limitType==="F")e._t=fv(e.path,e.collectionGroup,Bs(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const s of Bs(e)){const o=s.dir==="desc"?"asc":"desc";n.push(new fa(s.field,o))}const r=e.endAt?new Qi(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Qi(e.startAt.position,e.startAt.inclusive):null;e._t=fv(e.path,e.collectionGroup,n,e.filters,e.limit,r,i)}return e._t}function pv(t,e){e.getFirstInequalityField(),np(t);const n=t.filters.concat([e]);return new ti(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function qh(t,e,n){return new ti(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Dc(t,e){return Rc(mn(t),mn(e))&&t.limitType===e.limitType}function Pb(t){return`${no(mn(t))}|lt:${t.limitType}`}function mv(t){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(r=>Ab(r)).join(", ")}]`),Ac(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(r=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(r)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ka(r)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ka(r)).join(",")),`Target(${n})`}(mn(t))}; limitType=${t.limitType})`}function Oc(t,e){return e.isFoundDocument()&&function(n,r){const i=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):F.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,r){for(const i of Bs(n))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,r){for(const i of n.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!function(i,s,o){const a=k1(i,s,o);return i.inclusive?a<=0:a<0}(n.startAt,Bs(n),r)||n.endAt&&!function(i,s,o){const a=k1(i,s,o);return i.inclusive?a>=0:a>0}(n.endAt,Bs(n),r))}(t,e)}function Lb(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function $b(t){return(e,n)=>{let r=!1;for(const i of Bs(t)){const s=LB(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function LB(t,e,n){const r=t.field.isKeyField()?F.comparator(e.key,n.key):function(i,s,o){const a=s.data.field(i),l=o.data.field(i);return a!==null&&l!==null?Gi(a,l):H()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return H()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){vo(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return _b(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $B=new ke(F.comparator);function un(){return $B}const Mb=new ke(F.comparator);function Vl(...t){let e=Mb;for(const n of t)e=e.insert(n.key,n);return e}function Fb(t){let e=Mb;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function hr(){return su()}function Ub(){return su()}function su(){return new cs(t=>t.toString(),(t,e)=>t.isEqual(e))}const MB=new ke(F.comparator),FB=new Le(F.comparator);function ae(...t){let e=FB;for(const n of t)e=e.add(n);return e}const UB=new Le(se);function Ww(){return UB}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gu(e)?"-0":e}}function jb(t){return{integerValue:""+t}}function Bb(t,e){return vb(e)?jb(e):Vb(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(){this._=void 0}}function VB(t,e,n){return t instanceof Na?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&tp(i)&&(i=jw(i)),i&&(s.fields.__previous_value__=i),{mapValue:s}}(n,e):t instanceof ro?qb(t,e):t instanceof io?Wb(t,e):function(r,i){const s=zb(r,i),o=D1(s)+D1(r.gt);return cv(s)&&cv(r.gt)?jb(o):Vb(r.serializer,o)}(t,e)}function jB(t,e,n){return t instanceof ro?qb(t,e):t instanceof io?Wb(t,e):n}function zb(t,e){return t instanceof Aa?cv(n=e)||function(r){return!!r&&"doubleValue"in r}(n)?e:{integerValue:0}:null;var n}class Na extends rp{}class ro extends rp{constructor(e){super(),this.elements=e}}function qb(t,e){const n=Hb(e);for(const r of t.elements)n.some(i=>Sr(i,r))||n.push(r);return{arrayValue:{values:n}}}class io extends rp{constructor(e){super(),this.elements=e}}function Wb(t,e){let n=Hb(e);for(const r of t.elements)n=n.filter(i=>!Sr(i,r));return{arrayValue:{values:n}}}class Aa extends rp{constructor(e,n){super(),this.serializer=e,this.gt=n}}function D1(t){return Qe(t.integerValue||t.doubleValue)}function Hb(t){return Xu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e,n){this.field=e,this.transform=n}}function BB(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof ro&&r instanceof ro||n instanceof io&&r instanceof io?xa(n.elements,r.elements,Sr):n instanceof Aa&&r instanceof Aa?Sr(n.gt,r.gt):n instanceof Na&&r instanceof Na}(t.transform,e.transform)}class zB{constructor(e,n){this.version=e,this.transformResults=n}}class Ve{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ve}static exists(e){return new Ve(void 0,e)}static updateTime(e){return new Ve(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ip{}function Kb(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new rl(t.key,Ve.none()):new nl(t.key,t.data,Ve.none());{const n=t.data,r=Nt.empty();let i=new Le(et.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new ni(t.key,r,new ln(i.toArray()),Ve.none())}}function qB(t,e,n){t instanceof nl?function(r,i,s){const o=r.value.clone(),a=P1(r.fieldTransforms,i,s.transformResults);o.setAll(a),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof ni?function(r,i,s){if(!Gd(r.precondition,i))return void i.convertToUnknownDocument(s.version);const o=P1(r.fieldTransforms,i,s.transformResults),a=i.data;a.setAll(Gb(r)),a.setAll(o),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):function(r,i,s){i.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function ou(t,e,n,r){return t instanceof nl?function(i,s,o,a){if(!Gd(i.precondition,s))return o;const l=i.value.clone(),u=L1(i.fieldTransforms,a,s);return l.setAll(u),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof ni?function(i,s,o,a){if(!Gd(i.precondition,s))return o;const l=L1(i.fieldTransforms,a,s),u=s.data;return u.setAll(Gb(i)),u.setAll(l),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),o===null?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(c=>c.field))}(t,e,n,r):function(i,s,o){return Gd(i.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o}(t,e,n)}function WB(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=zb(r.transform,i||null);s!=null&&(n===null&&(n=Nt.empty()),n.set(r.field,s))}return n||null}function O1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&xa(n,r,(i,s)=>BB(i,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class nl extends ip{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ni extends ip{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Gb(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function P1(t,e,n){const r=new Map;ee(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,jB(o,a,n[i]))}return r}function L1(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,VB(s,o,e))}return r}class rl extends ip{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Hw extends ip{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&qB(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ou(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ou(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Ub();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=Kb(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Z.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ae())}isEqual(e){return this.batchId===e.batchId&&xa(this.mutations,e.mutations,(n,r)=>O1(n,r))&&xa(this.baseMutations,e.baseMutations,(n,r)=>O1(n,r))}}class Gw{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ee(e.mutations.length===r.length);let i=MB;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Gw(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HB{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var it,pe;function Qb(t){switch(t){default:return H();case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0}}function Yb(t){if(t===void 0)return Ze("GRPC error has no .code"),k.UNKNOWN;switch(t){case it.OK:return k.OK;case it.CANCELLED:return k.CANCELLED;case it.UNKNOWN:return k.UNKNOWN;case it.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case it.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case it.INTERNAL:return k.INTERNAL;case it.UNAVAILABLE:return k.UNAVAILABLE;case it.UNAUTHENTICATED:return k.UNAUTHENTICATED;case it.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case it.NOT_FOUND:return k.NOT_FOUND;case it.ALREADY_EXISTS:return k.ALREADY_EXISTS;case it.PERMISSION_DENIED:return k.PERMISSION_DENIED;case it.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case it.ABORTED:return k.ABORTED;case it.OUT_OF_RANGE:return k.OUT_OF_RANGE;case it.UNIMPLEMENTED:return k.UNIMPLEMENTED;case it.DATA_LOSS:return k.DATA_LOSS;default:return H()}}(pe=it||(it={}))[pe.OK=0]="OK",pe[pe.CANCELLED=1]="CANCELLED",pe[pe.UNKNOWN=2]="UNKNOWN",pe[pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pe[pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pe[pe.NOT_FOUND=5]="NOT_FOUND",pe[pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",pe[pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",pe[pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",pe[pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pe[pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pe[pe.ABORTED=10]="ABORTED",pe[pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",pe[pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",pe[pe.INTERNAL=13]="INTERNAL",pe[pe.UNAVAILABLE=14]="UNAVAILABLE",pe[pe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return wd}static getOrCreateInstance(){return wd===null&&(wd=new Yw),wd}onExistenceFilterMismatch(e){const n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),()=>this.onExistenceFilterMismatchCallbacks.delete(n)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(n=>n(e))}}let wd=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xb(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KB=new ha([4294967295,4294967295],0);function $1(t){const e=Xb().encode(t),n=new jj;return n.update(e),new Uint8Array(n.digest())}function M1(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ha([n,r],0),new ha([i,s],0)]}class Xw{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new jl(`Invalid padding: ${n}`);if(r<0)throw new jl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new jl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new jl(`Invalid padding when bitmap length is 0: ${n}`);this.It=8*e.length-n,this.Tt=ha.fromNumber(this.It)}Et(e,n,r){let i=e.add(n.multiply(ha.fromNumber(r)));return i.compare(KB)===1&&(i=new ha([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}vt(e){if(this.It===0)return!1;const n=$1(e),[r,i]=M1(n);for(let s=0;s<this.hashCount;s++){const o=this.Et(r,i,s);if(!this.At(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Xw(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.It===0)return;const n=$1(e),[r,i]=M1(n);for(let s=0;s<this.hashCount;s++){const o=this.Et(r,i,s);this.Rt(o)}}Rt(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class jl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,$c.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Lc(Z.min(),i,new ke(se),un(),ae())}}class $c{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new $c(r,n,ae(),ae(),ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e,n,r,i){this.Pt=e,this.removedTargetIds=n,this.key=r,this.bt=i}}class Jb{constructor(e,n){this.targetId=e,this.Vt=n}}class Zb{constructor(e,n,r=ht.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class F1{constructor(){this.St=0,this.Dt=V1(),this.Ct=ht.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return this.St!==0}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=ae(),n=ae(),r=ae();return this.Dt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:H()}}),new $c(this.Ct,this.xt,e,n,r)}Ft(){this.Nt=!1,this.Dt=V1()}Bt(e,n){this.Nt=!0,this.Dt=this.Dt.insert(e,n)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class GB{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=un(),this.zt=U1(),this.Wt=new ke(se)}Ht(e){for(const n of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(n,e.bt):this.Yt(n,e.key,e.bt);for(const n of e.removedTargetIds)this.Yt(n,e.key,e.bt)}Xt(e){this.forEachTarget(e,n=>{const r=this.Zt(n);switch(e.state){case 0:this.te(n)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(n);break;case 3:this.te(n)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(n)&&(this.ee(n),r.$t(e.resumeToken));break;default:H()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Qt.forEach((r,i)=>{this.te(i)&&n(i)})}ne(e){var n;const r=e.targetId,i=e.Vt.count,s=this.se(r);if(s){const o=s.target;if(Bh(o))if(i===0){const a=new F(o.path);this.Yt(r,a,De.newNoDocument(a,Z.min()))}else ee(i===1);else{const a=this.ie(r);if(a!==i){const l=this.re(e,a);if(l!==0){this.ee(r);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(r,u)}(n=Yw.instance)===null||n===void 0||n.notifyOnExistenceFilterMismatch(function(u,c,d){var h,f,m,w,I,y;const p={localCacheCount:c,existenceFilterCount:d.count},g=d.unchangedNames;return g&&(p.bloomFilter={applied:u===0,hashCount:(h=g==null?void 0:g.hashCount)!==null&&h!==void 0?h:0,bitmapLength:(w=(m=(f=g==null?void 0:g.bits)===null||f===void 0?void 0:f.bitmap)===null||m===void 0?void 0:m.length)!==null&&w!==void 0?w:0,padding:(y=(I=g==null?void 0:g.bits)===null||I===void 0?void 0:I.padding)!==null&&y!==void 0?y:0}),p}(l,a,e.Vt))}}}}re(e,n){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:s="",padding:o=0},hashCount:a=0}=r;let l,u;try{l=Hi(s).toUint8Array()}catch(c){if(c instanceof Sb)return Jn("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw c}try{u=new Xw(l,o,a)}catch(c){return Jn(c instanceof jl?"BloomFilter error: ":"Applying bloom filter failed: ",c),1}return u.It===0?1:i!==n-this.oe(e.targetId,u)?2:0}oe(e,n){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(s=>{const o=this.Gt.ue(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;n.vt(a)||(this.Yt(e,s,null),i++)}),i}ce(e){const n=new Map;this.Qt.forEach((s,o)=>{const a=this.se(o);if(a){if(s.current&&Bh(a.target)){const l=new F(a.target.path);this.jt.get(l)!==null||this.ae(o,l)||this.Yt(o,l,De.newNoDocument(l,e))}s.Mt&&(n.set(o,s.Ot()),s.Ft())}});let r=ae();this.zt.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.se(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.jt.forEach((s,o)=>o.setReadTime(e));const i=new Lc(e,n,this.Wt,this.jt,r);return this.jt=un(),this.zt=U1(),this.Wt=new ke(se),i}Jt(e,n){if(!this.te(e))return;const r=this.ae(e,n.key)?2:0;this.Zt(e).Bt(n.key,r),this.jt=this.jt.insert(n.key,n),this.zt=this.zt.insert(n.key,this.he(n.key).add(e))}Yt(e,n,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,n)?i.Bt(n,1):i.Lt(n),this.zt=this.zt.insert(n,this.he(n).delete(e)),r&&(this.jt=this.jt.insert(n,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const n=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let n=this.Qt.get(e);return n||(n=new F1,this.Qt.set(e,n)),n}he(e){let n=this.zt.get(e);return n||(n=new Le(se),this.zt=this.zt.insert(e,n)),n}te(e){const n=this.se(e)!==null;return n||O("WatchChangeAggregator","Detected inactive target",e),n}se(e){const n=this.Qt.get(e);return n&&n.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new F1),this.Gt.getRemoteKeysForTarget(e).forEach(n=>{this.Yt(e,n,null)})}ae(e,n){return this.Gt.getRemoteKeysForTarget(e).has(n)}}function U1(){return new ke(F.comparator)}function V1(){return new ke(F.comparator)}const QB=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),YB=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),XB=(()=>({and:"AND",or:"OR"}))();class JB{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function gv(t,e){return t.useProto3Json||Ac(e)?e:{value:e}}function Ra(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function eN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function ZB(t,e){return Ra(t,e.toTimestamp())}function nt(t){return ee(!!t),Z.fromTimestamp(function(e){const n=Wi(e);return new je(n.seconds,n.nanos)}(t))}function Jw(t,e){return function(n){return new ge(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function tN(t){const e=ge.fromString(t);return ee(cN(e)),e}function Ju(t,e){return Jw(t.databaseId,e.path)}function vr(t,e){const n=tN(e);if(n.get(1)!==t.databaseId.projectId)throw new D(k.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new D(k.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new F(rN(n))}function vv(t,e){return Jw(t.databaseId,e)}function nN(t){const e=tN(t);return e.length===4?ge.emptyPath():rN(e)}function Zu(t){return new ge(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function rN(t){return ee(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function j1(t,e,n){return{name:Ju(t,e),fields:n.value.mapValue.fields}}function iN(t,e,n){const r=vr(t,e.name),i=nt(e.updateTime),s=e.createTime?nt(e.createTime):Z.min(),o=new Nt({mapValue:{fields:e.fields}}),a=De.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function e4(t,e){return"found"in e?function(n,r){ee(!!r.found),r.found.name,r.found.updateTime;const i=vr(n,r.found.name),s=nt(r.found.updateTime),o=r.found.createTime?nt(r.found.createTime):Z.min(),a=new Nt({mapValue:{fields:r.found.fields}});return De.newFoundDocument(i,s,o,a)}(t,e):"missing"in e?function(n,r){ee(!!r.missing),ee(!!r.readTime);const i=vr(n,r.missing),s=nt(r.readTime);return De.newNoDocument(i,s)}(t,e):H()}function t4(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:H()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,u){return l.useProto3Json?(ee(u===void 0||typeof u=="string"),ht.fromBase64String(u||"")):(ee(u===void 0||u instanceof Uint8Array),ht.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const u=l.code===void 0?k.UNKNOWN:Yb(l.code);return new D(u,l.message||"")}(o);n=new Zb(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=vr(t,r.document.name),s=nt(r.document.updateTime),o=r.document.createTime?nt(r.document.createTime):Z.min(),a=new Nt({mapValue:{fields:r.document.fields}}),l=De.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new Qd(u,c,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=vr(t,r.document),s=r.readTime?nt(r.readTime):Z.min(),o=De.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Qd([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=vr(t,r.document),s=r.removedTargetIds||[];n=new Qd([],s,i,null)}else{if(!("filter"in e))return H();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new HB(i,s),a=r.targetId;n=new Jb(a,o)}}return n}function ec(t,e){let n;if(e instanceof nl)n={update:j1(t,e.key,e.value)};else if(e instanceof rl)n={delete:Ju(t,e.key)};else if(e instanceof ni)n={update:j1(t,e.key,e.data),updateMask:a4(e.fieldMask)};else{if(!(e instanceof Hw))return H();n={verify:Ju(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const o=s.transform;if(o instanceof Na)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof ro)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof io)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Aa)return{fieldPath:s.field.canonicalString(),increment:o.gt};throw H()}(0,r))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:ZB(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:H()}(t,e.precondition)),n}function yv(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?Ve.updateTime(nt(i.updateTime)):i.exists!==void 0?Ve.exists(i.exists):Ve.none()}(e.currentDocument):Ve.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,o){let a=null;if("setToServerValue"in o)ee(o.setToServerValue==="REQUEST_TIME"),a=new Na;else if("appendMissingElements"in o){const u=o.appendMissingElements.values||[];a=new ro(u)}else if("removeAllFromArray"in o){const u=o.removeAllFromArray.values||[];a=new io(u)}else"increment"in o?a=new Aa(s,o.increment):H();const l=et.fromServerFormat(o.fieldPath);return new Pc(l,a)}(t,i)):[];if(e.update){e.update.name;const i=vr(t,e.update.name),s=new Nt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(a){const l=a.fieldPaths||[];return new ln(l.map(u=>et.fromServerFormat(u)))}(e.updateMask);return new ni(i,s,o,n,r)}return new nl(i,s,n,r)}if(e.delete){const i=vr(t,e.delete);return new rl(i,n)}if(e.verify){const i=vr(t,e.verify);return new Hw(i,n)}return H()}function n4(t,e){return t&&t.length>0?(ee(e!==void 0),t.map(n=>function(r,i){let s=r.updateTime?nt(r.updateTime):nt(i);return s.isEqual(Z.min())&&(s=nt(i)),new zB(s,r.transformResults||[])}(n,e))):[]}function sN(t,e){return{documents:[vv(t,e.path)]}}function oN(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=vv(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=vv(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(l){if(l.length!==0)return uN(_e.create(l,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(l){if(l.length!==0)return l.map(u=>function(c){return{field:Lo(c.field),direction:i4(c.dir)}}(u))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=gv(t,e.limit);var a;return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function aN(t){let e=nN(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ee(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let s=[];n.where&&(s=function(c){const d=lN(c);return d instanceof _e&&Bw(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(c=>function(d){return new fa($o(d.field),function(h){switch(h){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(d.direction))}(c)));let a=null;n.limit&&(a=function(c){let d;return d=typeof c=="object"?c.value:c,Ac(d)?null:d}(n.limit));let l=null;n.startAt&&(l=function(c){const d=!!c.before,h=c.values||[];return new Qi(h,d)}(n.startAt));let u=null;return n.endAt&&(u=function(c){const d=!c.before,h=c.values||[];return new Qi(h,d)}(n.endAt)),Ob(e,i,o,s,a,"F",l,u)}function r4(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return H()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function lN(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=$o(e.unaryFilter.field);return he.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=$o(e.unaryFilter.field);return he.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=$o(e.unaryFilter.field);return he.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=$o(e.unaryFilter.field);return he.create(s,"!=",{nullValue:"NULL_VALUE"});default:return H()}}(t):t.fieldFilter!==void 0?function(e){return he.create($o(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return H()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return _e.create(e.compositeFilter.filters.map(n=>lN(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return H()}}(e.compositeFilter.op))}(t):H()}function i4(t){return QB[t]}function s4(t){return YB[t]}function o4(t){return XB[t]}function Lo(t){return{fieldPath:t.canonicalString()}}function $o(t){return et.fromServerFormat(t.fieldPath)}function uN(t){return t instanceof he?function(e){if(e.op==="=="){if(T1(e.value))return{unaryFilter:{field:Lo(e.field),op:"IS_NAN"}};if(S1(e.value))return{unaryFilter:{field:Lo(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(T1(e.value))return{unaryFilter:{field:Lo(e.field),op:"IS_NOT_NAN"}};if(S1(e.value))return{unaryFilter:{field:Lo(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Lo(e.field),op:s4(e.op),value:e.value}}}(t):t instanceof _e?function(e){const n=e.getFilters().map(r=>uN(r));return n.length===1?n[0]:{compositeFilter:{op:o4(e.op),filters:n}}}(t):H()}function a4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function cN(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e,n,r,i,s=Z.min(),o=Z.min(),a=ht.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Mr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Mr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Mr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Mr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(e){this.fe=e}}function l4(t,e){let n;if(e.document)n=iN(t.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=F.fromSegments(e.noDocument.path),i=oo(e.noDocument.readTime);n=De.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return H();{const r=F.fromSegments(e.unknownDocument.path),i=oo(e.unknownDocument.version);n=De.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(r){const i=new je(r[0],r[1]);return Z.fromTimestamp(i)}(e.readTime)),n}function B1(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Wh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,s){return{name:Ju(i,s.key),fields:s.data.value.mapValue.fields,updateTime:Ra(i,s.version.toTimestamp()),createTime:Ra(i,s.createTime.toTimestamp())}}(t.fe,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:so(e.version)};else{if(!e.isUnknownDocument())return H();r.unknownDocument={path:n.path.toArray(),version:so(e.version)}}return r}function Wh(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function so(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function oo(t){const e=new je(t.seconds,t.nanoseconds);return Z.fromTimestamp(e)}function Ss(t,e){const n=(e.baseMutations||[]).map(s=>yv(t.fe,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>yv(t.fe,s)),i=je.fromMillis(e.localWriteTimeMs);return new Kw(e.batchId,i,n,r)}function Bl(t){const e=oo(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?oo(t.lastLimboFreeSnapshotVersion):Z.min();let r;var i;return t.query.documents!==void 0?(ee((i=t.query).documents.length===1),r=mn(tl(nN(i.documents[0])))):r=function(s){return mn(aN(s))}(t.query),new Mr(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,ht.fromBase64String(t.resumeToken))}function hN(t,e){const n=so(e.snapshotVersion),r=so(e.lastLimboFreeSnapshotVersion);let i;i=Bh(e.target)?sN(t.fe,e.target):oN(t.fe,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:no(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Zw(t){const e=aN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?qh(e,e.limit,"L"):e}function Sm(t,e){return new Qw(e.largestBatchId,yv(t.fe,e.overlayMutation))}function z1(t,e){const n=e.path.lastSegment();return[t,Zt(e.path.popLast()),n]}function q1(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:so(r.readTime),documentKey:Zt(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{getBundleMetadata(e,n){return W1(e).get(n).next(r=>{if(r)return{id:(i=r).bundleId,createTime:oo(i.createTime),version:i.version};var i})}saveBundleMetadata(e,n){return W1(e).put({bundleId:(r=n).id,createTime:so(nt(r.createTime)),version:r.version});var r}getNamedQuery(e,n){return H1(e).get(n).next(r=>{if(r)return{name:(i=r).name,query:Zw(i.bundledQuery),readTime:oo(i.readTime)};var i})}saveNamedQuery(e,n){return H1(e).put(function(r){return{name:r.name,readTime:so(nt(r.readTime)),bundledQuery:r.bundledQuery}}(n))}}function W1(t){return St(t,"bundles")}function H1(t){return St(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(e,n){this.serializer=e,this.userId=n}static de(e,n){const r=n.uid||"";return new sp(e,r)}getOverlay(e,n){return Sl(e).get(z1(this.userId,n)).next(r=>r?Sm(this.serializer,r):null)}getOverlays(e,n){const r=hr();return x.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new Qw(n,o);i.push(this.we(e,a))}),x.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(Zt(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Sl(e).J("collectionPathOverlayIndex",a))}),x.waitFor(s)}getOverlaysForCollection(e,n,r){const i=hr(),s=Zt(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Sl(e).j("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const u=Sm(this.serializer,l);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=hr();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Sl(e).X({index:"collectionGroupOverlayIndex",range:a},(l,u,c)=>{const d=Sm(this.serializer,u);s.size()<i||d.largestBatchId===o?(s.set(d.getKey(),d),o=d.largestBatchId):c.done()}).next(()=>s)}we(e,n){return Sl(e).put(function(r,i,s){const[o,a,l]=z1(i,s.mutation.key);return{userId:i,collectionPath:a,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:ec(r.fe,s.mutation)}}(this.serializer,this.userId,n))}}function Sl(t){return St(t,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(){}_e(e,n){this.me(e,n),n.ge()}me(e,n){if("nullValue"in e)this.ye(n,5);else if("booleanValue"in e)this.ye(n,10),n.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(n,15),n.pe(Qe(e.integerValue));else if("doubleValue"in e){const r=Qe(e.doubleValue);isNaN(r)?this.ye(n,13):(this.ye(n,15),Gu(r)?n.pe(0):n.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(n,20),typeof r=="string"?n.Ie(r):(n.Ie(`${r.seconds||""}`),n.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,n),this.Ee(n);else if("bytesValue"in e)this.ye(n,30),n.Ae(Hi(e.bytesValue)),this.Ee(n);else if("referenceValue"in e)this.ve(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(n,45),n.pe(r.latitude||0),n.pe(r.longitude||0)}else"mapValue"in e?Tb(e)?this.ye(n,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,n),this.Ee(n)):"arrayValue"in e?(this.Pe(e.arrayValue,n),this.Ee(n)):H()}Te(e,n){this.ye(n,25),this.be(e,n)}be(e,n){n.Ie(e)}Re(e,n){const r=e.fields||{};this.ye(n,55);for(const i of Object.keys(r))this.Te(i,n),this.me(r[i],n)}Pe(e,n){const r=e.values||[];this.ye(n,50);for(const i of r)this.me(i,n)}ve(e,n){this.ye(n,37),F.fromName(e).path.forEach(r=>{this.ye(n,60),this.be(r,n)})}ye(e,n){e.pe(n)}Ee(e){e.pe(2)}}Ts.Ve=new Ts;function c4(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function K1(t){const e=64-function(n){let r=0;for(let i=0;i<8;++i){const s=c4(255&n[i]);if(r+=s,s!==8)break}return r}(t);return Math.ceil(e/8)}class d4{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.De(r.value),r=n.next();this.Ce()}xe(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ne(r.value),r=n.next();this.ke()}Me(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const i=n.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const i=n.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const n=this.Fe(e),r=K1(n);this.Be(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}Le(e){const n=this.Fe(e),r=K1(n);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const n=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}De(e){const n=255&e;n===0?(this.Ue(0),this.Ue(255)):n===255?(this.Ue(255),this.Ue(0)):this.Ue(n)}Ne(e){const n=255&e;n===0?(this.Ge(0),this.Ge(255)):n===255?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class h4{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class f4{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class Tl{constructor(){this.je=new d4,this.ze=new h4(this.je),this.We=new f4(this.je)}seed(e){this.je.seed(e)}He(e){return e===0?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Je(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Cs(this.indexId,this.documentKey,this.arrayValue,r)}}function li(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=G1(t.arrayValue,e.arrayValue),n!==0?n:(n=G1(t.directionalValue,e.directionalValue),n!==0?n:F.comparator(t.documentKey,e.documentKey)))}function G1(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4{constructor(e){this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const n of e.filters){const r=n;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){ee(e.collectionGroup===this.collectionId);const n=av(e);if(n!==void 0&&!this.en(n))return!1;const r=Is(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.en(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Ze!==void 0){if(!i.has(this.Ze.field.canonicalString())){const a=r[s];if(!this.nn(this.Ze,a)||!this.sn(this.Ye[o++],a))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.Ye.length||!this.sn(this.Ye[o++],a))return!1}return!0}en(e){for(const n of this.Xe)if(this.nn(n,e))return!0;return!1}nn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fN(t){var e,n;if(ee(t instanceof he||t instanceof _e),t instanceof he){if(t instanceof Db){const i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>he.create(t.field,"==",s)))||[];return _e.create(i,"or")}return t}const r=t.filters.map(i=>fN(i));return _e.create(r,t.op)}function m4(t){if(t.getFilters().length===0)return[];const e=Iv(fN(t));return ee(pN(e)),wv(e)||Ev(e)?[e]:e.getFilters()}function wv(t){return t instanceof he}function Ev(t){return t instanceof _e&&Bw(t)}function pN(t){return wv(t)||Ev(t)||function(e){if(e instanceof _e&&dv(e)){for(const n of e.getFilters())if(!wv(n)&&!Ev(n))return!1;return!0}return!1}(t)}function Iv(t){if(ee(t instanceof he||t instanceof _e),t instanceof he)return t;if(t.filters.length===1)return Iv(t.filters[0]);const e=t.filters.map(r=>Iv(r));let n=_e.create(e,t.op);return n=Hh(n),pN(n)?n:(ee(n instanceof _e),ee(ba(n)),ee(n.filters.length>1),n.filters.reduce((r,i)=>e0(r,i)))}function e0(t,e){let n;return ee(t instanceof he||t instanceof _e),ee(e instanceof he||e instanceof _e),n=t instanceof he?e instanceof he?function(r,i){return _e.create([r,i],"and")}(t,e):Q1(t,e):e instanceof he?Q1(e,t):function(r,i){if(ee(r.filters.length>0&&i.filters.length>0),ba(r)&&ba(i))return Nb(r,i.getFilters());const s=dv(r)?r:i,o=dv(r)?i:r,a=s.filters.map(l=>e0(l,o));return _e.create(a,"or")}(t,e),Hh(n)}function Q1(t,e){if(ba(e))return Nb(e,t.getFilters());{const n=e.filters.map(r=>e0(t,r));return _e.create(n,"or")}}function Hh(t){if(ee(t instanceof he||t instanceof _e),t instanceof he)return t;const e=t.getFilters();if(e.length===1)return Hh(e[0]);if(kb(t))return t;const n=e.map(i=>Hh(i)),r=[];return n.forEach(i=>{i instanceof he?r.push(i):i instanceof _e&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:_e.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{constructor(){this.rn=new t0}addToCollectionParentIndex(e,n){return this.rn.add(n),x.resolve()}getCollectionParents(e,n){return x.resolve(this.rn.getEntries(n))}addFieldIndex(e,n){return x.resolve()}deleteFieldIndex(e,n){return x.resolve()}getDocumentsMatchingTarget(e,n){return x.resolve(null)}getIndexType(e,n){return x.resolve(0)}getFieldIndexes(e,n){return x.resolve([])}getNextCollectionGroupToUpdate(e){return x.resolve(null)}getMinOffset(e,n){return x.resolve(Sn.min())}getMinOffsetFromCollectionGroup(e,n){return x.resolve(Sn.min())}updateCollectionGroup(e,n,r){return x.resolve()}updateIndexEntries(e,n){return x.resolve()}}class t0{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Le(ge.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Le(ge.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ed=new Uint8Array(0);class v4{constructor(e,n){this.user=e,this.databaseId=n,this.on=new t0,this.un=new cs(r=>no(r),(r,i)=>Rc(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.on.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.on.add(n)});const s={collectionId:r,parent:Zt(i)};return Y1(e).put(s)}return x.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[db(n),""],!1,!0);return Y1(e).j(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(dr(o.parent))}return r})}addFieldIndex(e,n){const r=Id(e),i=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(a=>[a.fieldPath.canonicalString(),a.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=xl(e);return s.next(a=>{o.put(q1(a,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=Id(e),i=xl(e),s=Cl(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,n){const r=Cl(e);let i=!0;const s=new Map;return x.forEach(this.cn(n),o=>this.an(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=ae();const a=[];return x.forEach(s,(l,u)=>{var c;O("IndexedDbIndexManager",`Using index ${c=l,`id=${c.indexId}|cg=${c.collectionGroup}|f=${c.fields.map(g=>`${g.fieldPath}:${g.kind}`).join(",")}`} to execute ${no(n)}`);const d=function(g,_){const T=av(_);if(T===void 0)return null;for(const C of zh(g,T.fieldPath))switch(C.op){case"array-contains-any":return C.value.arrayValue.values||[];case"array-contains":return[C.value]}return null}(u,l),h=function(g,_){const T=new Map;for(const C of Is(_))for(const b of zh(g,C.fieldPath))switch(b.op){case"==":case"in":T.set(C.fieldPath.canonicalString(),b.value);break;case"not-in":case"!=":return T.set(C.fieldPath.canonicalString(),b.value),Array.from(T.values())}return null}(u,l),f=function(g,_){const T=[];let C=!0;for(const b of Is(_)){const A=b.kind===0?N1(g,b.fieldPath,g.startAt):A1(g,b.fieldPath,g.startAt);T.push(A.value),C&&(C=A.inclusive)}return new Qi(T,C)}(u,l),m=function(g,_){const T=[];let C=!0;for(const b of Is(_)){const A=b.kind===0?A1(g,b.fieldPath,g.endAt):N1(g,b.fieldPath,g.endAt);T.push(A.value),C&&(C=A.inclusive)}return new Qi(T,C)}(u,l),w=this.hn(l,u,f),I=this.hn(l,u,m),y=this.ln(l,u,h),p=this.fn(l.indexId,d,w,f.inclusive,I,m.inclusive,y);return x.forEach(p,g=>r.H(g,n.limit).next(_=>{_.forEach(T=>{const C=F.fromSegments(T.documentKey);o.has(C)||(o=o.add(C),a.push(C))})}))}).next(()=>a)}return x.resolve(null)})}cn(e){let n=this.un.get(e);return n||(e.filters.length===0?n=[e]:n=m4(_e.create(e.filters,"and")).map(r=>fv(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}fn(e,n,r,i,s,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,s.length),u=l/(n!=null?n.length:1),c=[];for(let d=0;d<l;++d){const h=n?this.dn(n[d/u]):Ed,f=this.wn(e,h,r[d%u],i),m=this._n(e,h,s[d%u],o),w=a.map(I=>this.wn(e,h,I,!0));c.push(...this.createRange(f,m,w))}return c}wn(e,n,r,i){const s=new Cs(e,F.empty(),n,r);return i?s:s.Je()}_n(e,n,r,i){const s=new Cs(e,F.empty(),n,r);return i?s.Je():s}an(e,n){const r=new p4(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.tn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.cn(n);return x.forEach(i,s=>this.an(e,s).next(o=>{o?r!==0&&o.fields.length<function(a){let l=new Le(et.comparator),u=!1;for(const c of a.filters)for(const d of c.getFlattenedFilters())d.field.isKeyField()||(d.op==="array-contains"||d.op==="array-contains-any"?u=!0:l=l.add(d.field));for(const c of a.orderBy)c.field.isKeyField()||(l=l.add(c.field));return l.size+(u?1:0)}(s)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(n)&&i.length>1&&r===2?1:r)}mn(e,n){const r=new Tl;for(const i of Is(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.He(i.kind);Ts.Ve._e(s,o)}return r.Qe()}dn(e){const n=new Tl;return Ts.Ve._e(e,n.He(0)),n.Qe()}gn(e,n){const r=new Tl;return Ts.Ve._e(to(this.databaseId,n),r.He(function(i){const s=Is(i);return s.length===0?0:s[s.length-1].kind}(e))),r.Qe()}ln(e,n,r){if(r===null)return[];let i=[];i.push(new Tl);let s=0;for(const o of Is(e)){const a=r[s++];for(const l of i)if(this.yn(n,o.fieldPath)&&Xu(a))i=this.pn(i,o,a);else{const u=l.He(o.kind);Ts.Ve._e(a,u)}}return this.In(i)}hn(e,n,r){return this.ln(e,n,r.position)}In(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Qe();return n}pn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new Tl;l.seed(a.Qe()),Ts.Ve._e(o,l.He(n.kind)),s.push(l)}return s}yn(e,n){return!!e.filters.find(r=>r instanceof he&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Id(e),i=xl(e);return(n?r.j("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.j()).next(s=>{const o=[];return x.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(u,c){const d=c?new jh(c.sequenceNumber,new Sn(oo(c.readTime),new F(dr(c.documentKey)),c.largestBatchId)):jh.empty(),h=u.fields.map(([f,m])=>new Zj(et.fromServerFormat(f),m));return new hb(u.indexId,u.collectionGroup,h,d)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:se(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Id(e),s=xl(e);return this.Tn(e).next(o=>i.j("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>x.forEach(a,l=>s.put(q1(l.indexId,this.user,o,r)))))}updateIndexEntries(e,n){const r=new Map;return x.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?x.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),x.forEach(a,l=>this.En(e,i,l).next(u=>{const c=this.An(s,l);return u.isEqual(c)?x.resolve():this.vn(e,s,l,u,c)}))))})}Rn(e,n,r,i){return Cl(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,n.key),documentKey:n.key.path.toArray()})}Pn(e,n,r,i){return Cl(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,n.key),n.key.path.toArray()])}En(e,n,r){const i=Cl(e);let s=new Le(li);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,n)])},(o,a)=>{s=s.add(new Cs(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}An(e,n){let r=new Le(li);const i=this.mn(n,e);if(i==null)return r;const s=av(n);if(s!=null){const o=e.data.field(s.fieldPath);if(Xu(o))for(const a of o.arrayValue.values||[])r=r.add(new Cs(n.indexId,e.key,this.dn(a),i))}else r=r.add(new Cs(n.indexId,e.key,Ed,i));return r}vn(e,n,r,i,s){O("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(a,l,u,c,d){const h=a.getIterator(),f=l.getIterator();let m=No(h),w=No(f);for(;m||w;){let I=!1,y=!1;if(m&&w){const p=u(m,w);p<0?y=!0:p>0&&(I=!0)}else m!=null?y=!0:I=!0;I?(c(w),w=No(f)):y?(d(m),m=No(h)):(m=No(h),w=No(f))}}(i,s,li,a=>{o.push(this.Rn(e,n,r,a))},a=>{o.push(this.Pn(e,n,r,a))}),x.waitFor(o)}Tn(e){let n=1;return xl(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>li(o,a)).filter((o,a,l)=>!a||li(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=li(o,e),l=li(o,n);if(a===0)i[0]=e.Je();else if(a>0&&l<0)i.push(o),i.push(o.Je());else if(l>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.bn(i[o],i[o+1]))return[];const a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,Ed,[]],l=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,Ed,[]];s.push(IDBKeyRange.bound(a,l))}return s}bn(e,n){return li(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(X1)}getMinOffset(e,n){return x.mapArray(this.cn(n),r=>this.an(e,r).next(i=>i||H())).next(X1)}}function Y1(t){return St(t,"collectionParents")}function Cl(t){return St(t,"indexEntries")}function Id(t){return St(t,"indexConfiguration")}function xl(t){return St(t,"indexState")}function X1(t){ee(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;Uw(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Sn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class rn{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new rn(e,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mN(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.X({range:o},(c,d,h)=>(a++,h.delete()));s.push(l.next(()=>{ee(a===1)}));const u=[];for(const c of n.mutations){const d=yb(e,c.key.path,n.batchId);s.push(i.delete(d)),u.push(c.key)}return x.waitFor(s).next(()=>u)}function Kh(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw H();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rn.DEFAULT_COLLECTION_PERCENTILE=10,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rn.DEFAULT=new rn(41943040,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rn.DISABLED=new rn(-1,0,0);class op{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}static de(e,n,r,i){ee(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new op(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ui(e).X({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=Mo(e),o=ui(e);return o.add({}).next(a=>{ee(typeof a=="number");const l=new Kw(a,n,r,i),u=function(h,f,m){const w=m.baseMutations.map(y=>ec(h.fe,y)),I=m.mutations.map(y=>ec(h.fe,y));return{userId:f,batchId:m.batchId,localWriteTimeMs:m.localWriteTime.toMillis(),baseMutations:w,mutations:I}}(this.serializer,this.userId,l),c=[];let d=new Le((h,f)=>se(h.canonicalString(),f.canonicalString()));for(const h of i){const f=yb(this.userId,h.key.path,a);d=d.add(h.key.path.popLast()),c.push(o.put(u)),c.push(s.put(f,sB))}return d.forEach(h=>{c.push(this.indexManager.addToCollectionParentIndex(e,h))}),e.addOnCommittedListener(()=>{this.Vn[a]=l.keys()}),x.waitFor(c).next(()=>l)})}lookupMutationBatch(e,n){return ui(e).get(n).next(r=>r?(ee(r.userId===this.userId),Ss(this.serializer,r)):null)}Sn(e,n){return this.Vn[n]?x.resolve(this.Vn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Vn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return ui(e).X({index:"userMutationsIndex",range:i},(o,a,l)=>{a.userId===this.userId&&(ee(a.batchId>=r),s=Ss(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ui(e).X({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ui(e).j("userMutationsIndex",n).next(r=>r.map(i=>Ss(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Wd(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return Mo(e).X({range:i},(o,a,l)=>{const[u,c,d]=o,h=dr(c);if(u===this.userId&&n.path.isEqual(h))return ui(e).get(d).next(f=>{if(!f)throw H();ee(f.userId===this.userId),s.push(Ss(this.serializer,f))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Le(se);const i=[];return n.forEach(s=>{const o=Wd(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=Mo(e).X({range:a},(u,c,d)=>{const[h,f,m]=u,w=dr(f);h===this.userId&&s.path.isEqual(w)?r=r.add(m):d.done()});i.push(l)}),x.waitFor(i).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=Wd(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Le(se);return Mo(e).X({range:o},(l,u,c)=>{const[d,h,f]=l,m=dr(h);d===this.userId&&r.isPrefixOf(m)?m.length===i&&(a=a.add(f)):c.done()}).next(()=>this.Dn(e,a))}Dn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(ui(e).get(s).next(o=>{if(o===null)throw H();ee(o.userId===this.userId),r.push(Ss(this.serializer,o))}))}),x.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return mN(e.ht,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Cn(n.batchId)}),x.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return x.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Mo(e).X({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=dr(s[1]);i.push(l)}else a.done()}).next(()=>{ee(i.length===0)})})}containsKey(e,n){return gN(e,this.userId,n)}xn(e){return vN(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function gN(t,e,n){const r=Wd(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Mo(t).X({range:s,Y:!0},(a,l,u)=>{const[c,d,h]=a;c===e&&d===i&&(o=!0),u.done()}).next(()=>o)}function ui(t){return St(t,"mutations")}function Mo(t){return St(t,"documentMutations")}function vN(t){return St(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new ao(0)}static Mn(){return new ao(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.$n(e).next(n=>{const r=new ao(n.highestTargetId);return n.highestTargetId=r.next(),this.On(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(n=>Z.fromTimestamp(new je(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.$n(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.On(e,i)))}addTargetData(e,n){return this.Fn(e,n).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(n,r),this.On(e,r))))}updateTargetData(e,n){return this.Fn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Ao(e).delete(n.targetId)).next(()=>this.$n(e)).next(r=>(ee(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return Ao(e).X((o,a)=>{const l=Bl(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>x.waitFor(s)).next(()=>i)}forEachTarget(e,n){return Ao(e).X((r,i)=>{const s=Bl(i);n(s)})}$n(e){return Z1(e).get("targetGlobalKey").next(n=>(ee(n!==null),n))}On(e,n){return Z1(e).put("targetGlobalKey",n)}Fn(e,n){return Ao(e).put(hN(this.serializer,n))}Bn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(n=>n.targetCount)}getTargetData(e,n){const r=no(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Ao(e).X({range:i,index:"queryTargetsIndex"},(o,a,l)=>{const u=Bl(a);Rc(n,u.target)&&(s=u,l.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=yi(e);return n.forEach(o=>{const a=Zt(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),x.waitFor(i)}removeMatchingKeys(e,n,r){const i=yi(e);return x.forEach(n,s=>{const o=Zt(s.path);return x.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=yi(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=yi(e);let s=ae();return i.X({range:r,Y:!0},(o,a,l)=>{const u=dr(o[1]),c=new F(u);s=s.add(c)}).next(()=>s)}containsKey(e,n){const r=Zt(n.path),i=IDBKeyRange.bound([r],[db(r)],!1,!0);let s=0;return yi(e).X({index:"documentTargetsIndex",Y:!0,range:i},([o,a],l,u)=>{o!==0&&(s++,u.done())}).next(()=>s>0)}le(e,n){return Ao(e).get(n).next(r=>r?Bl(r):null)}}function Ao(t){return St(t,"targets")}function Z1(t){return St(t,"targetGlobal")}function yi(t){return St(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e_([t,e],[n,r]){const i=se(t,n);return i===0?se(e,r):i}class w4{constructor(e){this.Ln=e,this.buffer=new Le(e_),this.qn=0}Un(){return++this.qn}Kn(e){const n=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();e_(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class E4{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}Qn(e){O("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){us(n)?O("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await ls(n)}await this.Qn(3e5)})}}class I4{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.zn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return x.resolve(an.ct);const r=new w4(n);return this.jn.forEachTarget(e,i=>r.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>r.Kn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(O("LruGarbageCollector","Garbage collection skipped; disabled"),x.resolve(J1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(O("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),J1):this.Hn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,n){let r,i,s,o,a,l,u;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(O("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(u=Date.now(),ov()<=me.DEBUG&&O("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-c}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(u-l)+`ms
Total Duration: ${u-c}ms`),x.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}function _4(t,e){return new I4(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4{constructor(e,n){this.db=e,this.garbageCollector=_4(this,n)}zn(e){const n=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Jn(e){let n=0;return this.Wn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Wn(e,n){return this.Yn(e,(r,i)=>n(i))}addReference(e,n,r){return _d(e,r)}removeReference(e,n,r){return _d(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return _d(e,n)}Xn(e,n){return function(r,i){let s=!1;return vN(r).Z(o=>gN(r,o,i).next(a=>(a&&(s=!0),x.resolve(!a)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Yn(e,(o,a)=>{if(a<=n){const l=this.Xn(e,o).next(u=>{if(!u)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Z.min()),yi(e).delete([0,Zt(o.path)])))});i.push(l)}}).next(()=>x.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return _d(e,n)}Yn(e,n){const r=yi(e);let i,s=an.ct;return r.X({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:u})=>{o===0?(s!==an.ct&&n(new F(dr(i)),s),s=u,i=l):s=an.ct}).next(()=>{s!==an.ct&&n(new F(dr(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function _d(t,e){return yi(t).put(function(n,r){return{targetId:0,path:Zt(n.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(){this.changes=new cs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,De.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?x.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T4{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return vs(e).put(r)}removeEntry(e,n,r){return vs(e).delete(function(i,s){const o=i.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],Wh(s),o[o.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Zn(e,r)))}getEntry(e,n){let r=De.newInvalidDocument(n);return vs(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(kl(n))},(i,s)=>{r=this.ts(n,s)}).next(()=>r)}es(e,n){let r={size:0,document:De.newInvalidDocument(n)};return vs(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(kl(n))},(i,s)=>{r={document:this.ts(n,s),size:Kh(s)}}).next(()=>r)}getEntries(e,n){let r=un();return this.ns(e,n,(i,s)=>{const o=this.ts(i,s);r=r.insert(i,o)}).next(()=>r)}ss(e,n){let r=un(),i=new ke(F.comparator);return this.ns(e,n,(s,o)=>{const a=this.ts(s,o);r=r.insert(s,a),i=i.insert(s,Kh(o))}).next(()=>({documents:r,rs:i}))}ns(e,n,r){if(n.isEmpty())return x.resolve();let i=new Le(r_);n.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(kl(i.first()),kl(i.last())),o=i.getIterator();let a=o.getNext();return vs(e).X({index:"documentKeyIndex",range:s},(l,u,c)=>{const d=F.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&r_(a,d)<0;)r(a,null),a=o.getNext();a&&a.isEqual(d)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?c.G(kl(a)):c.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i){const s=n.path,o=[s.popLast().toArray(),s.lastSegment(),Wh(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return vs(e).j(IDBKeyRange.bound(o,a,!0)).next(l=>{let u=un();for(const c of l){const d=this.ts(F.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);d.isFoundDocument()&&(Oc(n,d)||i.has(d.key))&&(u=u.insert(d.key,d))}return u})}getAllFromCollectionGroup(e,n,r,i){let s=un();const o=n_(n,r),a=n_(n,Sn.max());return vs(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,u,c)=>{const d=this.ts(F.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(d.key,d),s.size===i&&c.done()}).next(()=>s)}newChangeBuffer(e){return new C4(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return t_(e).get("remoteDocumentGlobalKey").next(n=>(ee(!!n),n))}Zn(e,n){return t_(e).put("remoteDocumentGlobalKey",n)}ts(e,n){if(n){const r=l4(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(Z.min())))return r}return De.newInvalidDocument(e)}}function wN(t){return new T4(t)}class C4 extends yN{constructor(e,n){super(),this.os=e,this.trackRemovals=n,this.us=new cs(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Le((s,o)=>se(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.us.get(s);if(n.push(this.os.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=B1(this.os.serializer,o);i=i.add(s.path.popLast());const u=Kh(l);r+=u-a.size,n.push(this.os.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=B1(this.os.serializer,o.convertToNoDocument(Z.min()));n.push(this.os.addEntry(e,s,l))}}),i.forEach(s=>{n.push(this.os.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.os.updateMetadata(e,r)),x.waitFor(n)}getFromCache(e,n){return this.os.es(e,n).next(r=>(this.us.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.os.ss(e,n).next(({documents:r,rs:i})=>(i.forEach((s,o)=>{this.us.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function t_(t){return St(t,"remoteDocumentGlobal")}function vs(t){return St(t,"remoteDocumentsV14")}function kl(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function n_(t,e){const n=e.documentKey.path.toArray();return[t,Wh(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function r_(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=se(n[s],r[s]),i)return i;return i=se(n.length,r.length),i||(i=se(n[n.length-2],r[r.length-2]),i||se(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ou(r.mutation,i,ln.empty(),je.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ae()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ae()){const i=hr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Vl();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=hr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ae()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=un();const o=su(),a=su();return n.forEach((l,u)=>{const c=r.get(u.key);i.has(u.key)&&(c===void 0||c.mutation instanceof ni)?s=s.insert(u.key,u):c!==void 0?(o.set(u.key,c.mutation.getFieldMask()),ou(c.mutation,u,c.mutation.getFieldMask(),je.now())):o.set(u.key,ln.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,c)=>o.set(u,c)),n.forEach((u,c)=>{var d;return a.set(u,new x4(c,(d=o.get(u))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=su();let i=new ke((o,a)=>o-a),s=ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let c=r.get(l)||ln.empty();c=a.applyToLocalView(u,c),r.set(l,c);const d=(i.get(a.batchId)||ae()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,d=Ub();c.forEach(h=>{if(!s.has(h)){const f=Kb(n.get(h),r.get(h));f!==null&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return x.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(i){return F.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):qw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):x.resolve(hr());let a=-1,l=s;return o.next(u=>x.forEach(u,(c,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(c)?x.resolve():this.remoteDocumentCache.getEntry(e,c).next(h=>{l=l.insert(c,h)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,ae())).next(c=>({batchId:a,changes:Fb(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new F(n)).next(r=>{let i=Vl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const i=n.collectionGroup;let s=Vl();return this.indexManager.getCollectionParents(e,i).next(o=>x.forEach(o,a=>{const l=function(u,c){return new ti(c,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(n,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,l,r).next(u=>{u.forEach((c,d)=>{s=s.insert(c,d)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i))).next(s=>{i.forEach((a,l)=>{const u=l.getKey();s.get(u)===null&&(s=s.insert(u,De.newInvalidDocument(u)))});let o=Vl();return s.forEach((a,l)=>{const u=i.get(a);u!==void 0&&ou(u.mutation,l,ln.empty(),je.now()),Oc(n,l)&&(o=o.insert(a,l))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,n){return x.resolve(this.cs.get(n))}saveBundleMetadata(e,n){var r;return this.cs.set(n.id,{id:(r=n).id,version:r.version,createTime:nt(r.createTime)}),x.resolve()}getNamedQuery(e,n){return x.resolve(this.hs.get(n))}saveNamedQuery(e,n){return this.hs.set(n.name,function(r){return{name:r.name,query:Zw(r.bundledQuery),readTime:nt(r.readTime)}}(n)),x.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(){this.overlays=new ke(F.comparator),this.ls=new Map}getOverlay(e,n){return x.resolve(this.overlays.get(n))}getOverlays(e,n){const r=hr();return x.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.we(e,n,s)}),x.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.ls.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.ls.delete(r)),x.resolve()}getOverlaysForCollection(e,n,r){const i=hr(),s=n.length+1,o=new F(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return x.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new ke((u,c)=>u-c);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let c=s.get(u.largestBatchId);c===null&&(c=hr(),s=s.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=hr(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>a.set(u,c)),!(a.size()>=i)););return x.resolve(a)}we(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Qw(n,r));let s=this.ls.get(n);s===void 0&&(s=ae(),this.ls.set(n,s)),this.ls.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(){this.fs=new Le(gt.ds),this.ws=new Le(gt._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,n){const r=new gt(e,n);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.ys(new gt(e,n))}ps(e,n){e.forEach(r=>this.removeReference(r,n))}Is(e){const n=new F(new ge([])),r=new gt(n,e),i=new gt(n,e+1),s=[];return this.ws.forEachInRange([r,i],o=>{this.ys(o),s.push(o.key)}),s}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const n=new F(new ge([])),r=new gt(n,e),i=new gt(n,e+1);let s=ae();return this.ws.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new gt(e,0),r=this.fs.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class gt{constructor(e,n){this.key=e,this.As=n}static ds(e,n){return F.comparator(e.key,n.key)||se(e.As,n.As)}static _s(e,n){return se(e.As,n.As)||F.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new Le(gt.ds)}checkEmpty(e){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Kw(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Rs=this.Rs.add(new gt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return x.resolve(o)}lookupMutationBatch(e,n){return x.resolve(this.Ps(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.bs(r),s=i<0?0:i;return x.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?-1:this.vs-1)}getAllMutationBatches(e){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new gt(n,0),i=new gt(n,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([r,i],o=>{const a=this.Ps(o.As);s.push(a)}),x.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Le(se);return n.forEach(i=>{const s=new gt(i,0),o=new gt(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([s,o],a=>{r=r.add(a.As)})}),x.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;F.isDocumentKey(s)||(s=s.child(""));const o=new gt(new F(s),0);let a=new Le(se);return this.Rs.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.As)),!0)},o),x.resolve(this.Vs(a))}Vs(e){const n=[];return e.forEach(r=>{const i=this.Ps(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ee(this.Ss(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Rs;return x.forEach(n.mutations,i=>{const s=new gt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,n){const r=new gt(n,0),i=this.Rs.firstAfterOrEqual(r);return x.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,x.resolve()}Ss(e,n){return this.bs(e)}bs(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Ps(e){const n=this.bs(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A4{constructor(e){this.Ds=e,this.docs=new ke(F.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Ds(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return x.resolve(r?r.document.mutableCopy():De.newInvalidDocument(n))}getEntries(e,n){let r=un();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():De.newInvalidDocument(i))}),x.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=un();const o=n.path,a=new F(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:c}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||Uw(pb(c),r)<=0||(i.has(c.key)||Oc(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return x.resolve(s)}getAllFromCollectionGroup(e,n,r,i){H()}Cs(e,n){return x.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new R4(this)}getSize(e){return x.resolve(this.size)}}class R4 extends yN{constructor(e){super(),this.os=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),x.waitFor(n)}getFromCache(e,n){return this.os.getEntry(e,n)}getAllFromCache(e,n){return this.os.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(e){this.persistence=e,this.xs=new cs(n=>no(n),Rc),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.Ns=0,this.ks=new n0,this.targetCount=0,this.Ms=ao.kn()}forEachTarget(e,n){return this.xs.forEach((r,i)=>n(i)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Ns&&(this.Ns=n),x.resolve()}Fn(e){this.xs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ms=new ao(n),this.highestTargetId=n),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,n){return this.Fn(n),this.targetCount+=1,x.resolve()}updateTargetData(e,n){return this.Fn(n),x.resolve()}removeTargetData(e,n){return this.xs.delete(n.target),this.ks.Is(n.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.xs.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.xs.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),x.waitFor(s).next(()=>i)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,n){const r=this.xs.get(n)||null;return x.resolve(r)}addMatchingKeys(e,n,r){return this.ks.gs(n,r),x.resolve()}removeMatchingKeys(e,n,r){this.ks.ps(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),x.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.ks.Is(n),x.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ks.Es(n);return x.resolve(r)}containsKey(e,n){return x.resolve(this.ks.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e,n){this.$s={},this.overlays={},this.Os=new an(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new D4(this),this.indexManager=new g4,this.remoteDocumentCache=function(r){return new A4(r)}(r=>this.referenceDelegate.Ls(r)),this.serializer=new dN(n),this.qs=new k4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new b4,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.$s[e.toKey()];return r||(r=new N4(n,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,n,r){O("MemoryPersistence","Starting transaction:",e);const i=new O4(this.Os.next());return this.referenceDelegate.Us(),r(i).next(s=>this.referenceDelegate.Ks(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gs(e,n){return x.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,n)))}}class O4 extends gb{constructor(e){super(),this.currentSequenceNumber=e}}class ap{constructor(e){this.persistence=e,this.Qs=new n0,this.js=null}static zs(e){return new ap(e)}get Ws(){if(this.js)return this.js;throw H()}addReference(e,n,r){return this.Qs.addReference(r,n),this.Ws.delete(r.toString()),x.resolve()}removeReference(e,n,r){return this.Qs.removeReference(r,n),this.Ws.add(r.toString()),x.resolve()}markPotentiallyOrphaned(e,n){return this.Ws.add(n.toString()),x.resolve()}removeTarget(e,n){this.Qs.Is(n.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Ws.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Us(){this.js=new Set}Ks(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.Ws,r=>{const i=F.fromPath(r);return this.Hs(e,i).next(s=>{s||n.removeEntry(i,Z.min())})}).next(()=>(this.js=null,n.apply(e)))}updateLimboDocument(e,n){return this.Hs(e,n).next(r=>{r?this.Ws.delete(n.toString()):this.Ws.add(n.toString())})}Ls(e){return 0}Hs(e,n){return x.or([()=>x.resolve(this.Qs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gs(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(e){this.serializer=e}O(e,n,r,i){const s=new ep("createOrUpgrade",n);r<1&&i>=1&&(function(a){a.createObjectStore("owner")}(e),function(a){a.createObjectStore("mutationQueues",{keyPath:"userId"}),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",w1,{unique:!0}),a.createObjectStore("documentMutations")}(e),i_(e),function(a){a.createObjectStore("remoteDocuments")}(e));let o=x.resolve();return r<3&&i>=3&&(r!==0&&(function(a){a.deleteObjectStore("targetDocuments"),a.deleteObjectStore("targets"),a.deleteObjectStore("targetGlobal")}(e),i_(e)),o=o.next(()=>function(a){const l=a.store("targetGlobal"),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Z.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",u)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(a,l){return l.store("mutations").j().next(u=>{a.deleteObjectStore("mutations"),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",w1,{unique:!0});const c=l.store("mutations"),d=u.map(h=>c.put(h));return x.waitFor(d)})}(e,s))),o=o.next(()=>{(function(a){a.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.Ys(s))),r<6&&i>=6&&(o=o.next(()=>(function(a){a.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(s)))),r<7&&i>=7&&(o=o.next(()=>this.Zs(s))),r<8&&i>=8&&(o=o.next(()=>this.ti(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(a){a.objectStoreNames.contains("remoteDocumentChanges")&&a.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.ei(s))),r<11&&i>=11&&(o=o.next(()=>{(function(a){a.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(a){a.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(a){const l=a.createObjectStore("documentOverlays",{keyPath:vB});l.createIndex("collectionPathOverlayIndex",yB,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",wB,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(a){const l=a.createObjectStore("remoteDocumentsV14",{keyPath:oB});l.createIndex("documentKeyIndex",aB),l.createIndex("collectionGroupIndex",lB)}(e)).next(()=>this.ni(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.si(e,s))),r<15&&i>=15&&(o=o.next(()=>function(a){a.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),a.createObjectStore("indexState",{keyPath:fB}).createIndex("sequenceNumberIndex",pB,{unique:!1}),a.createObjectStore("indexEntries",{keyPath:mB}).createIndex("documentKeyIndex",gB,{unique:!1})}(e))),o}Xs(e){let n=0;return e.store("remoteDocuments").X((r,i)=>{n+=Kh(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.j().next(i=>x.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",o).next(a=>x.forEach(a,l=>{ee(l.userId===s.userId);const u=Ss(this.serializer,l);return mN(e,s.userId,u).next(()=>{})}))}))}Zs(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.X((o,a)=>{const l=new ge(o),u=function(c){return[0,Zt(c)]}(l);s.push(n.get(u).next(c=>c?x.resolve():(d=>n.put({targetId:0,path:Zt(d),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>x.waitFor(s))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:hB});const r=n.store("collectionParents"),i=new t0,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:Zt(l)})}};return n.store("remoteDocuments").X({Y:!0},(o,a)=>{const l=new ge(o);return s(l.popLast())}).next(()=>n.store("documentMutations").X({Y:!0},([o,a,l],u)=>{const c=dr(a);return s(c.popLast())}))}ei(e){const n=e.store("targets");return n.X((r,i)=>{const s=Bl(i),o=hN(this.serializer,s);return n.put(o)})}ni(e,n){const r=n.store("remoteDocuments"),i=[];return r.X((s,o)=>{const a=n.store("remoteDocumentsV14"),l=(u=o,u.document?new F(ge.fromString(u.document.name).popFirst(5)):u.noDocument?F.fromSegments(u.noDocument.path):u.unknownDocument?F.fromSegments(u.unknownDocument.path):H()).path.toArray();var u;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(c))}).next(()=>x.waitFor(i))}si(e,n){const r=n.store("mutations"),i=wN(this.serializer),s=new IN(ap.zs,this.serializer.fe);return r.j().next(o=>{const a=new Map;return o.forEach(l=>{var u;let c=(u=a.get(l.userId))!==null&&u!==void 0?u:ae();Ss(this.serializer,l).keys().forEach(d=>c=c.add(d)),a.set(l.userId,c)}),x.forEach(a,(l,u)=>{const c=new yt(u),d=sp.de(this.serializer,c),h=s.getIndexManager(c),f=op.de(c,this.serializer,h,s.referenceDelegate);return new EN(i,f,d,h).recalculateAndSaveOverlaysForDocumentKeys(new lv(n,an.ct),l).next()})})}}function i_(t){t.createObjectStore("targetDocuments",{keyPath:cB}).createIndex("documentTargetsIndex",dB,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",uB,{unique:!0}),t.createObjectStore("targetGlobal")}const Tm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class r0{constructor(e,n,r,i,s,o,a,l,u,c,d=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ii=s,this.window=o,this.document=a,this.ri=u,this.oi=c,this.ui=d,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=h=>Promise.resolve(),!r0.D())throw new D(k.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new S4(this,i),this.di=n+"main",this.serializer=new dN(l),this.wi=new Hn(this.di,this.ui,new P4(this.serializer)),this.Bs=new y4(this.referenceDelegate,this.serializer),this.remoteDocumentCache=wN(this.serializer),this.qs=new u4,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,c===!1&&Ze("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new D(k.FAILED_PRECONDITION,Tm);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new an(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){return this.fi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Sd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(n=>{n||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(n=>this.isPrimary&&!n?this.Ai(e).next(()=>!1):!!n&&this.vi(e).next(()=>!0))).catch(e=>{if(us(e))return O("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return O("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return bl(e).get("owner").next(n=>x.resolve(this.Ri(n)))}Pi(e){return Sd(e).delete(this.clientId)}async bi(){if(this.isPrimary&&!this.Vi(this.li,18e5)){this.li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=St(n,"clientMetadata");return r.j().next(i=>{const s=this.Si(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return x.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this._i)for(const n of e)this._i.removeItem(this.Di(n.clientId))}}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?x.resolve(!0):bl(e).get("owner").next(n=>{if(n!==null&&this.Vi(n.leaseTimestampMs,5e3)&&!this.Ci(n.ownerId)){if(this.Ri(n)&&this.networkEnabled)return!0;if(!this.Ri(n)){if(!n.allowTabSynchronization)throw new D(k.FAILED_PRECONDITION,Tm);return!1}}return!(!this.networkEnabled||!this.inForeground)||Sd(e).j().next(r=>this.Si(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&O("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Fs=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Ni(),this.ki(),await this.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new lv(e,an.ct);return this.Ai(n).next(()=>this.Pi(n))}),this.wi.close(),this.Mi()}Si(e,n){return e.filter(r=>this.Vi(r.updateTimeMs,n)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>Sd(e).j().next(n=>this.Si(n,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,n){return op.de(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new v4(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return sp.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,n,r){O("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=(o=this.ui)===15?IB:o===14?Ib:o===13?Eb:o===12?EB:o===11?wb:void H();var o;let a;return this.wi.runTransaction(e,i,s,l=>(a=new lv(l,this.Os?this.Os.next():an.ct),n==="readwrite-primary"?this.Ti(a).next(u=>!!u||this.Ei(a)).next(u=>{if(!u)throw Ze(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new D(k.FAILED_PRECONDITION,mb);return r(a)}).next(u=>this.vi(a).next(()=>u)):this.Oi(a).next(()=>r(a)))).then(l=>(a.raiseOnCommittedEvent(),l))}Oi(e){return bl(e).get("owner").next(n=>{if(n!==null&&this.Vi(n.leaseTimestampMs,5e3)&&!this.Ci(n.ownerId)&&!this.Ri(n)&&!(this.oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new D(k.FAILED_PRECONDITION,Tm)})}vi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return bl(e).put("owner",n)}static D(){return Hn.D()}Ai(e){const n=bl(e);return n.get("owner").next(r=>this.Ri(r)?(O("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):x.resolve())}Vi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Ze(`Detected an update time that is in the future: ${e} > ${r}`),!1))}gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground=this.document.visibilityState==="visible")}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();const n=/(?:Version|Mobile)\/1[456]/;m$()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var n;try{const r=((n=this._i)===null||n===void 0?void 0:n.getItem(this.Di(e)))!==null;return O("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ze("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Ze("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function bl(t){return St(t,"owner")}function Sd(t){return St(t,"clientMetadata")}function i0(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Fi=r,this.Bi=i}static Li(e,n){let r=ae(),i=ae();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new s0(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(){this.qi=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.qi=!0}getDocumentsMatchingQuery(e,n,r,i){return this.Ki(e,n).next(s=>s||this.Gi(e,n,i,r)).next(s=>s||this.Qi(e,n))}Ki(e,n){if(R1(n))return x.resolve(null);let r=mn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=qh(n,null,"F"),r=mn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ae(...s);return this.Ui.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.ji(n,a);return this.zi(n,u,o,l.readTime)?this.Ki(e,qh(n,null,"F")):this.Wi(e,u,n,l)}))})))}Gi(e,n,r,i){return R1(n)||i.isEqual(Z.min())?this.Qi(e,n):this.Ui.getDocuments(e,r).next(s=>{const o=this.ji(n,s);return this.zi(n,o,r,i)?this.Qi(e,n):(ov()<=me.DEBUG&&O("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),mv(n)),this.Wi(e,o,n,fb(i,-1)))})}ji(e,n){let r=new Le($b(e));return n.forEach((i,s)=>{Oc(e,s)&&(r=r.add(s))}),r}zi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Qi(e,n){return ov()<=me.DEBUG&&O("QueryEngine","Using full collection scan to execute query:",mv(n)),this.Ui.getDocumentsMatchingQuery(e,n,Sn.min())}Wi(e,n,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{constructor(e,n,r,i){this.persistence=e,this.Hi=n,this.serializer=i,this.Ji=new ke(se),this.Yi=new cs(s=>no(s),Rc),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new EN(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ji))}}function SN(t,e,n,r){return new L4(t,e,n,r)}async function TN(t,e){const n=B(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.tr(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=ae();for(const u of i){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of s){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.localDocuments.getDocuments(r,l).next(u=>({er:u,removedBatchIds:o,addedBatchIds:a}))})})}function $4(t,e){const n=B(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Zi.newChangeBuffer({trackRemovals:!0});return function(o,a,l,u){const c=l.batch,d=c.keys();let h=x.resolve();return d.forEach(f=>{h=h.next(()=>u.getEntry(a,f)).next(m=>{const w=l.docVersions.get(f);ee(w!==null),m.version.compareTo(w)<0&&(c.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),u.addEntry(m)))})}),h.next(()=>o.mutationQueue.removeMutationBatch(a,c))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=ae();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(a=a.add(o.batch.mutations[l].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function CN(t){const e=B(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Bs.getLastRemoteSnapshotVersion(n))}function M4(t,e){const n=B(t),r=e.snapshotVersion;let i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;const a=[];e.targetChanges.forEach((c,d)=>{const h=i.get(d);if(!h)return;a.push(n.Bs.removeMatchingKeys(s,c.removedDocuments,d).next(()=>n.Bs.addMatchingKeys(s,c.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(ht.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):c.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(c.resumeToken,r)),i=i.insert(d,f),function(m,w,I){return m.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(h,f,c)&&a.push(n.Bs.updateTargetData(s,f))});let l=un(),u=ae();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(xN(s,o,e.documentUpdates).next(c=>{l=c.nr,u=c.sr})),!r.isEqual(Z.min())){const c=n.Bs.getLastRemoteSnapshotVersion(s).next(d=>n.Bs.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return x.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.Ji=i,s))}function xN(t,e,n){let r=ae(),i=ae();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=un();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Z.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):O("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{nr:o,sr:i}})}function F4(t,e){const n=B(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Da(t,e){const n=B(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Bs.getTargetData(r,e).next(s=>s?(i=s,x.resolve(i)):n.Bs.allocateTargetId(r).next(o=>(i=new Mr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ji.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(r.targetId,r),n.Yi.set(e,r.targetId)),r})}async function Oa(t,e,n){const r=B(t),i=r.Ji.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!us(o))throw o;O("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}function Gh(t,e,n){const r=B(t);let i=Z.min(),s=ae();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,l,u){const c=B(a),d=c.Yi.get(u);return d!==void 0?x.resolve(c.Ji.get(d)):c.Bs.getTargetData(l,u)}(r,o,mn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Hi.getDocumentsMatchingQuery(o,e,n?i:Z.min(),n?s:ae())).next(a=>(NN(r,Lb(e),a),{documents:a,ir:s})))}function kN(t,e){const n=B(t),r=B(n.Bs),i=n.Ji.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.le(s,e).next(o=>o?o.target:null))}function bN(t,e){const n=B(t),r=n.Xi.get(e)||Z.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.Zi.getAllFromCollectionGroup(i,e,fb(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(NN(n,e,i),i))}function NN(t,e,n){let r=t.Xi.get(e)||Z.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Xi.set(e,r)}async function U4(t,e,n,r){const i=B(t);let s=ae(),o=un();for(const u of n){const c=e.rr(u.metadata.name);u.document&&(s=s.add(c));const d=e.ur(u);d.setReadTime(e.cr(u.metadata.readTime)),o=o.insert(c,d)}const a=i.Zi.newChangeBuffer({trackRemovals:!0}),l=await Da(i,function(u){return mn(tl(ge.fromString(`__bundle__/docs/${u}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>xN(u,a,o).next(c=>(a.apply(u),c)).next(c=>i.Bs.removeMatchingKeysForTargetId(u,l.targetId).next(()=>i.Bs.addMatchingKeys(u,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,c.nr,c.sr)).next(()=>c.nr)))}async function V4(t,e,n=ae()){const r=await Da(t,mn(Zw(e.bundledQuery))),i=B(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=nt(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.qs.saveNamedQuery(s,e);const a=r.withResumeToken(ht.EMPTY_BYTE_STRING,o);return i.Ji=i.Ji.insert(a.targetId,a),i.Bs.updateTargetData(s,a).next(()=>i.Bs.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Bs.addMatchingKeys(s,n,r.targetId)).next(()=>i.qs.saveNamedQuery(s,e))})}function s_(t,e){return`firestore_clients_${t}_${e}`}function o_(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Cm(t,e){return`firestore_targets_${t}_${e}`}class Qh{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static ar(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new D(i.error.code,i.error.message))),o?new Qh(e,n,i.state,s):(Ze("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class au{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static ar(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new D(r.error.code,r.error.message))),s?new au(e,r.state,i):(Ze("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Yh{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static ar(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=Ww();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=vb(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new Yh(e,s):(Ze("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class o0{constructor(e,n){this.clientId=e,this.onlineState=n}static ar(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new o0(n.clientId,n.onlineState):(Ze("SharedClientState",`Failed to parse online state: ${e}`),null)}}class _v{constructor(){this.activeTargetIds=Ww()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class xm{constructor(e,n,r,i,s){this.window=e,this.ii=n,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new ke(se),this.started=!1,this.yr=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.pr=s_(this.persistenceKey,this.wr),this.Ir=function(a){return`firestore_sequence_number_${a}`}(this.persistenceKey),this.gr=this.gr.insert(this.wr,new _v),this.Tr=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vr=function(a){return`firestore_online_state_${a}`}(this.persistenceKey),this.Rr=function(a){return`firestore_bundle_loaded_v2_${a}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.$i();for(const r of e){if(r===this.wr)continue;const i=this.getItem(s_(this.persistenceKey,r));if(i){const s=Yh.ar(r,i);s&&(this.gr=this.gr.insert(s.clientId,s))}}this.Pr();const n=this.storage.getItem(this.vr);if(n){const r=this.br(n);r&&this.Vr(r)}for(const r of this.yr)this.mr(r);this.yr=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let n=!1;return this.gr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,n,r){this.Dr(e,n,r),this.Cr(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Cm(this.persistenceKey,e));if(r){const i=au.ar(e,r);i&&(n=i.state)}}return this.Nr.lr(e),this.Pr(),n}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Cm(this.persistenceKey,e))}updateQueryState(e,n,r){this.kr(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Cr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return O("SharedClientState","READ",e,n),n}setItem(e,n){O("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){O("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){const n=e;if(n.storageArea===this.storage){if(O("SharedClientState","EVENT",n.key,n.newValue),n.key===this.pr)return void Ze("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Tr.test(n.key)){if(n.newValue==null){const r=this.Or(n.key);return this.Fr(r,null)}{const r=this.Br(n.key,n.newValue);if(r)return this.Fr(r.clientId,r)}}else if(this.Er.test(n.key)){if(n.newValue!==null){const r=this.Lr(n.key,n.newValue);if(r)return this.qr(r)}}else if(this.Ar.test(n.key)){if(n.newValue!==null){const r=this.Ur(n.key,n.newValue);if(r)return this.Kr(r)}}else if(n.key===this.vr){if(n.newValue!==null){const r=this.br(n.newValue);if(r)return this.Vr(r)}}else if(n.key===this.Ir){const r=function(i){let s=an.ct;if(i!=null)try{const o=JSON.parse(i);ee(typeof o=="number"),s=o}catch(o){Ze("SharedClientState","Failed to read sequence number from WebStorage",o)}return s}(n.newValue);r!==an.ct&&this.sequenceNumberHandler(r)}else if(n.key===this.Rr){const r=this.Gr(n.newValue);await Promise.all(r.map(i=>this.syncEngine.Qr(i)))}}}else this.yr.push(n)})}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,n,r){const i=new Qh(this.currentUser,e,n,r),s=o_(this.persistenceKey,this.currentUser,e);this.setItem(s,i.hr())}Cr(e){const n=o_(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Mr(e){const n={clientId:this.wr,onlineState:e};this.storage.setItem(this.vr,JSON.stringify(n))}kr(e,n,r){const i=Cm(this.persistenceKey,e),s=new au(e,n,r);this.setItem(i,s.hr())}$r(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Rr,n)}Or(e){const n=this.Tr.exec(e);return n?n[1]:null}Br(e,n){const r=this.Or(e);return Yh.ar(r,n)}Lr(e,n){const r=this.Er.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return Qh.ar(new yt(s),i,n)}Ur(e,n){const r=this.Ar.exec(e),i=Number(r[1]);return au.ar(i,n)}br(e){return o0.ar(e)}Gr(e){return JSON.parse(e)}async qr(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.jr(e.batchId,e.state,e.error);O("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,n){const r=n?this.gr.insert(e,n):this.gr.remove(e),i=this.Sr(this.gr),s=this.Sr(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.Wr(o,a).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let n=Ww();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class AN{constructor(){this.Hr=new _v,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,n,r){this.Jr[e]=n}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new _v,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{Yr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){O("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){O("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Td=null;function km(){return Td===null?Td=268435456+Math.round(2147483648*Math.random()):Td++,"0x"+Td.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ut="WebChannelConnection";class q4 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.mo=n+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,n,r,i,s){const o=km(),a=this.To(e,n);O("RestConnection",`Sending RPC '${e}' ${o}:`,a,r);const l={};return this.Eo(l,i,s),this.Ao(e,a,l,r).then(u=>(O("RestConnection",`Received RPC '${e}' ${o}: `,u),u),u=>{throw Jn("RestConnection",`RPC '${e}' ${o} failed with error: `,u,"url: ",a,"request:",r),u})}vo(e,n,r,i,s,o){return this.Io(e,n,r,i,s)}Eo(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+el,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}To(e,n){const r=B4[e];return`${this.mo}/v1/${n}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,n,r,i){const s=km();return new Promise((o,a)=>{const l=new Vj;l.setWithCredentials(!0),l.listenOnce(Mj.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case _m.NO_ERROR:const c=l.getResponseJson();O(Ut,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(c)),o(c);break;case _m.TIMEOUT:O(Ut,`RPC '${e}' ${s} timed out`),a(new D(k.DEADLINE_EXCEEDED,"Request time out"));break;case _m.HTTP_ERROR:const d=l.getStatus();if(O(Ut,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let h=l.getResponseJson();Array.isArray(h)&&(h=h[0]);const f=h==null?void 0:h.error;if(f&&f.status&&f.message){const m=function(w){const I=w.toLowerCase().replace(/_/g,"-");return Object.values(k).indexOf(I)>=0?I:k.UNKNOWN}(f.status);a(new D(m,f.message))}else a(new D(k.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new D(k.UNAVAILABLE,"Connection failed."));break;default:H()}}finally{O(Ut,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);O(Ut,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",u,r,15)})}Ro(e,n,r){const i=km(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Lj(),a=$j(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.xmlHttpFactory=new Uj({})),this.Eo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const c=s.join("");O(Ut,`Creating RPC '${e}' stream ${i}: ${c}`,l);const d=o.createWebChannel(c,l);let h=!1,f=!1;const m=new z4({ro:I=>{f?O(Ut,`Not sending because RPC '${e}' stream ${i} is closed:`,I):(h||(O(Ut,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),O(Ut,`RPC '${e}' stream ${i} sending:`,I),d.send(I))},oo:()=>d.close()}),w=(I,y,p)=>{I.listen(y,g=>{try{p(g)}catch(_){setTimeout(()=>{throw _},0)}})};return w(d,vd.EventType.OPEN,()=>{f||O(Ut,`RPC '${e}' stream ${i} transport opened.`)}),w(d,vd.EventType.CLOSE,()=>{f||(f=!0,O(Ut,`RPC '${e}' stream ${i} transport closed`),m.wo())}),w(d,vd.EventType.ERROR,I=>{f||(f=!0,Jn(Ut,`RPC '${e}' stream ${i} transport errored:`,I),m.wo(new D(k.UNAVAILABLE,"The operation could not be completed")))}),w(d,vd.EventType.MESSAGE,I=>{var y;if(!f){const p=I.data[0];ee(!!p);const g=p,_=g.error||((y=g[0])===null||y===void 0?void 0:y.error);if(_){O(Ut,`RPC '${e}' stream ${i} received error:`,_);const T=_.status;let C=function(A){const W=it[A];if(W!==void 0)return Yb(W)}(T),b=_.message;C===void 0&&(C=k.INTERNAL,b="Unknown error status: "+T+" with message "+_.message),f=!0,m.wo(new D(C,b)),d.close()}else O(Ut,`RPC '${e}' stream ${i} received:`,p),m._o(p)}}),w(a,Fj.STAT_EVENT,I=>{I.stat===m1.PROXY?O(Ut,`RPC '${e}' stream ${i} detected buffering proxy`):I.stat===m1.NOPROXY&&O(Ut,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{m.fo()},0),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RN(){return typeof window<"u"?window:null}function Yd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mc(t){return new JB(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ii=e,this.timerId=n,this.Po=r,this.bo=i,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const n=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,n-r);i>0&&O("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){this.Do!==null&&(this.Do.skipDelay(),this.Do=null)}cancel(){this.Do!==null&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e,n,r,i,s,o,a,l){this.ii=e,this.$o=r,this.Oo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new a0(e,n)}Uo(){return this.state===1||this.state===5||this.Ko()}Ko(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&this.Bo===null&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,n){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,e!==4?this.qo.reset():n&&n.code===k.RESOURCE_EXHAUSTED?(Ze(n.toString()),Ze("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):n&&n.code===k.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(n)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===n&&this.Zo(r,i)},r=>{e(()=>{const i=new D(k.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,n){const r=this.Xo(this.Fo);this.stream=this.eu(e,n),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){this.state=5,this.qo.No(async()=>{this.state=0,this.start()})}tu(e){return O("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return n=>{this.ii.enqueueAndForget(()=>this.Fo===e?n():(O("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class W4 extends DN{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}eu(e,n){return this.connection.Ro("Listen",e,n)}onMessage(e){this.qo.reset();const n=t4(this.serializer,e),r=function(i){if(!("targetChange"in i))return Z.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?Z.min():s.readTime?nt(s.readTime):Z.min()}(e);return this.listener.nu(n,r)}su(e){const n={};n.database=Zu(this.serializer),n.addTarget=function(i,s){let o;const a=s.target;if(o=Bh(a)?{documents:sN(i,a)}:{query:oN(i,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=eN(i,s.resumeToken);const l=gv(i,s.expectedCount);l!==null&&(o.expectedCount=l)}else if(s.snapshotVersion.compareTo(Z.min())>0){o.readTime=Ra(i,s.snapshotVersion.toTimestamp());const l=gv(i,s.expectedCount);l!==null&&(o.expectedCount=l)}return o}(this.serializer,e);const r=r4(this.serializer,e);r&&(n.labels=r),this.Wo(n)}iu(e){const n={};n.database=Zu(this.serializer),n.removeTarget=e,this.Wo(n)}}class H4 extends DN{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,n){return this.connection.Ro("Write",e,n)}onMessage(e){if(ee(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const n=n4(e.writeResults,e.commitTime),r=nt(e.commitTime);return this.listener.cu(r,n)}return ee(!e.writeResults||e.writeResults.length===0),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Zu(this.serializer),this.Wo(e)}uu(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>ec(this.serializer,r))};this.Wo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4 extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new D(k.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Io(e,n,r,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new D(k.UNKNOWN,i.toString())})}vo(e,n,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.vo(e,n,r,s,o,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new D(k.UNKNOWN,s.toString())})}terminate(){this.lu=!0}}class G4{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){this.wu===0&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){this.state==="Online"?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,e==="Online"&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Ze(n),this.mu=!1):O("OnlineStateTracker",n)}Tu(){this._u!==null&&(this._u.cancel(),this._u=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q4{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr(o=>{r.enqueueAndForget(async()=>{ds(this)&&(O("RemoteStore","Restarting streams for network reachability change."),await async function(a){const l=B(a);l.vu.add(4),await il(l),l.bu.set("Unknown"),l.vu.delete(4),await Fc(l)}(this))})}),this.bu=new G4(r,i)}}async function Fc(t){if(ds(t))for(const e of t.Ru)await e(!0)}async function il(t){for(const e of t.Ru)await e(!1)}function lp(t,e){const n=B(t);n.Au.has(e.targetId)||(n.Au.set(e.targetId,e),c0(n)?u0(n):ol(n).Ko()&&l0(n,e))}function tc(t,e){const n=B(t),r=ol(n);n.Au.delete(e),r.Ko()&&ON(n,e),n.Au.size===0&&(r.Ko()?r.jo():ds(n)&&n.bu.set("Unknown"))}function l0(t,e){if(t.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Z.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ol(t).su(e)}function ON(t,e){t.Vu.qt(e),ol(t).iu(e)}function u0(t){t.Vu=new GB({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),le:e=>t.Au.get(e)||null,ue:()=>t.datastore.serializer.databaseId}),ol(t).start(),t.bu.gu()}function c0(t){return ds(t)&&!ol(t).Uo()&&t.Au.size>0}function ds(t){return B(t).vu.size===0}function PN(t){t.Vu=void 0}async function Y4(t){t.Au.forEach((e,n)=>{l0(t,e)})}async function X4(t,e){PN(t),c0(t)?(t.bu.Iu(e),u0(t)):t.bu.set("Unknown")}async function J4(t,e,n){if(t.bu.set("Online"),e instanceof Zb&&e.state===2&&e.cause)try{await async function(r,i){const s=i.cause;for(const o of i.targetIds)r.Au.has(o)&&(await r.remoteSyncer.rejectListen(o,s),r.Au.delete(o),r.Vu.removeTarget(o))}(t,e)}catch(r){O("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Xh(t,r)}else if(e instanceof Qd?t.Vu.Ht(e):e instanceof Jb?t.Vu.ne(e):t.Vu.Xt(e),!n.isEqual(Z.min()))try{const r=await CN(t.localStore);n.compareTo(r)>=0&&await function(i,s){const o=i.Vu.ce(s);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const u=i.Au.get(l);u&&i.Au.set(l,u.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach((a,l)=>{const u=i.Au.get(a);if(!u)return;i.Au.set(a,u.withResumeToken(ht.EMPTY_BYTE_STRING,u.snapshotVersion)),ON(i,a);const c=new Mr(u.target,a,l,u.sequenceNumber);l0(i,c)}),i.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){O("RemoteStore","Failed to raise snapshot:",r),await Xh(t,r)}}async function Xh(t,e,n){if(!us(e))throw e;t.vu.add(1),await il(t),t.bu.set("Offline"),n||(n=()=>CN(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{O("RemoteStore","Retrying IndexedDB access"),await n(),t.vu.delete(1),await Fc(t)})}function LN(t,e){return e().catch(n=>Xh(t,n,e))}async function sl(t){const e=B(t),n=Yi(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;Z4(e);)try{const i=await F4(e.localStore,r);if(i===null){e.Eu.length===0&&n.jo();break}r=i.batchId,ez(e,i)}catch(i){await Xh(e,i)}$N(e)&&MN(e)}function Z4(t){return ds(t)&&t.Eu.length<10}function ez(t,e){t.Eu.push(e);const n=Yi(t);n.Ko()&&n.ou&&n.uu(e.mutations)}function $N(t){return ds(t)&&!Yi(t).Uo()&&t.Eu.length>0}function MN(t){Yi(t).start()}async function tz(t){Yi(t).hu()}async function nz(t){const e=Yi(t);for(const n of t.Eu)e.uu(n.mutations)}async function rz(t,e,n){const r=t.Eu.shift(),i=Gw.from(r,e,n);await LN(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await sl(t)}async function iz(t,e){e&&Yi(t).ou&&await async function(n,r){if(i=r.code,Qb(i)&&i!==k.ABORTED){const s=n.Eu.shift();Yi(n).Qo(),await LN(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,r)),await sl(n)}var i}(t,e),$N(t)&&MN(t)}async function l_(t,e){const n=B(t);n.asyncQueue.verifyOperationInProgress(),O("RemoteStore","RemoteStore received new credentials");const r=ds(n);n.vu.add(3),await il(n),r&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.vu.delete(3),await Fc(n)}async function Sv(t,e){const n=B(t);e?(n.vu.delete(2),await Fc(n)):e||(n.vu.add(2),await il(n),n.bu.set("Unknown"))}function ol(t){return t.Su||(t.Su=function(e,n,r){const i=B(e);return i.fu(),new W4(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{uo:Y4.bind(null,t),ao:X4.bind(null,t),nu:J4.bind(null,t)}),t.Ru.push(async e=>{e?(t.Su.Qo(),c0(t)?u0(t):t.bu.set("Unknown")):(await t.Su.stop(),PN(t))})),t.Su}function Yi(t){return t.Du||(t.Du=function(e,n,r){const i=B(e);return i.fu(),new H4(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{uo:tz.bind(null,t),ao:iz.bind(null,t),au:nz.bind(null,t),cu:rz.bind(null,t)}),t.Ru.push(async e=>{e?(t.Du.Qo(),await sl(t)):(await t.Du.stop(),t.Eu.length>0&&(O("RemoteStore",`Stopping write stream with ${t.Eu.length} pending writes`),t.Eu=[]))})),t.Du}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Et,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new d0(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new D(k.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function al(t,e){if(Ze("AsyncQueue",`${e}: ${t}`),us(t))return new D(k.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e){this.comparator=e?(n,r)=>e(n,r)||F.comparator(n.key,r.key):(n,r)=>F.comparator(n.key,r.key),this.keyedMap=Vl(),this.sortedSet=new ke(this.comparator)}static emptySet(e){return new pa(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof pa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new pa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(){this.Cu=new ke(F.comparator)}track(e){const n=e.doc.key,r=this.Cu.get(n);r?e.type!==0&&r.type===3?this.Cu=this.Cu.insert(n,e):e.type===3&&r.type!==1?this.Cu=this.Cu.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Cu=this.Cu.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Cu=this.Cu.remove(n):e.type===1&&r.type===2?this.Cu=this.Cu.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):H():this.Cu=this.Cu.insert(n,e)}xu(){const e=[];return this.Cu.inorderTraversal((n,r)=>{e.push(r)}),e}}class Pa{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Pa(e,n,pa.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sz{constructor(){this.Nu=void 0,this.listeners=[]}}class oz{constructor(){this.queries=new cs(e=>Pb(e),Dc),this.onlineState="Unknown",this.ku=new Set}}async function h0(t,e){const n=B(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new sz),i)try{s.Nu=await n.onListen(r)}catch(o){const a=al(o,`Initialization of query '${mv(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.Mu(n.onlineState),s.Nu&&e.$u(s.Nu)&&p0(n)}async function f0(t,e){const n=B(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function az(t,e){const n=B(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.listeners)a.$u(i)&&(r=!0);o.Nu=i}}r&&p0(n)}function lz(t,e,n){const r=B(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function p0(t){t.ku.forEach(e=>{e.next()})}class m0{constructor(e,n,r){this.query=e,this.Ou=n,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Pa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),n=!0):this.qu(e,this.onlineState)&&(this.Uu(e),n=!0),this.Bu=e,n}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let n=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),n=!0),n}qu(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.Ku||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Lu(e){if(e.docChanges.length>0)return!0;const n=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Uu(e){e=Pa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uz{constructor(e,n){this.Gu=e,this.byteLength=n}Qu(){return"metadata"in this.Gu}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{constructor(e){this.serializer=e}rr(e){return vr(this.serializer,e)}ur(e){return e.metadata.exists?iN(this.serializer,e.document,!1):De.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return nt(e)}}class cz{constructor(e,n,r){this.ju=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=FN(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++n;const r=ge.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}Wu(e){const n=new Map,r=new c_(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.rr(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||ae()).add(s);n.set(o,a)}}return n}async complete(){const e=await U4(this.localStore,new c_(this.serializer),this.documents,this.ju.id),n=this.Wu(this.documents);for(const r of this.queries)await V4(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Hu:this.collectionGroups,Ju:e}}}function FN(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e){this.key=e}}class VN{constructor(e){this.key=e}}class jN{constructor(e,n){this.query=e,this.Yu=n,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=ae(),this.mutatedKeys=ae(),this.tc=$b(e),this.ec=new pa(this.tc)}get nc(){return this.Yu}sc(e,n){const r=n?n.ic:new u_,i=n?n.ec:this.ec;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,d)=>{const h=i.get(c),f=Oc(this.query,d)?d:null,m=!!h&&this.mutatedKeys.has(h.key),w=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let I=!1;h&&f?h.data.isEqual(f.data)?m!==w&&(r.track({type:3,doc:f}),I=!0):this.rc(h,f)||(r.track({type:2,doc:f}),I=!0,(l&&this.tc(f,l)>0||u&&this.tc(f,u)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),I=!0):h&&!f&&(r.track({type:1,doc:h}),I=!0,(l||u)&&(a=!0)),I&&(f?(o=o.add(f),s=w?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{ec:o,ic:r,zi:a,mutatedKeys:s}}rc(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const s=e.ic.xu();s.sort((u,c)=>function(d,h){const f=m=>{switch(m){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return H()}};return f(d)-f(h)}(u.type,c.type)||this.tc(u.doc,c.doc)),this.oc(r);const o=n?this.uc():[],a=this.Zu.size===0&&this.current?1:0,l=a!==this.Xu;return this.Xu=a,s.length!==0||l?{snapshot:new Pa(this.query,e.ec,i,s,e.mutatedKeys,a===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}Mu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ec:this.ec,ic:new u_,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(n=>this.Yu=this.Yu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Yu=this.Yu.delete(n)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=ae(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const n=[];return e.forEach(r=>{this.Zu.has(r)||n.push(new VN(r))}),this.Zu.forEach(r=>{e.has(r)||n.push(new UN(r))}),n}hc(e){this.Yu=e.ir,this.Zu=ae();const n=this.sc(e.documents);return this.applyChanges(n,!0)}lc(){return Pa.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,this.Xu===0,this.hasCachedResults)}}class dz{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class hz{constructor(e){this.key=e,this.fc=!1}}class fz{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new cs(a=>Pb(a),Dc),this._c=new Map,this.mc=new Set,this.gc=new ke(F.comparator),this.yc=new Map,this.Ic=new n0,this.Tc={},this.Ec=new Map,this.Ac=ao.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return this.vc===!0}}async function pz(t,e){const n=E0(t);let r,i;const s=n.wc.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.lc();else{const o=await Da(n.localStore,mn(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=await g0(n,e,r,a==="current",o.resumeToken),n.isPrimaryClient&&lp(n.remoteStore,o)}return i}async function g0(t,e,n,r,i){t.Rc=(d,h,f)=>async function(m,w,I,y){let p=w.view.sc(I);p.zi&&(p=await Gh(m.localStore,w.query,!1).then(({documents:T})=>w.view.sc(T,p)));const g=y&&y.targetChanges.get(w.targetId),_=w.view.applyChanges(p,m.isPrimaryClient,g);return Tv(m,w.targetId,_.cc),_.snapshot}(t,d,h,f);const s=await Gh(t.localStore,e,!0),o=new jN(e,s.ir),a=o.sc(s.documents),l=$c.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);Tv(t,n,u.cc);const c=new dz(e,n,o);return t.wc.set(e,c),t._c.has(n)?t._c.get(n).push(e):t._c.set(n,[e]),u.snapshot}async function mz(t,e){const n=B(t),r=n.wc.get(e),i=n._c.get(r.targetId);if(i.length>1)return n._c.set(r.targetId,i.filter(s=>!Dc(s,e))),void n.wc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Oa(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),tc(n.remoteStore,r.targetId),La(n,r.targetId)}).catch(ls)):(La(n,r.targetId),await Oa(n.localStore,r.targetId,!0))}async function gz(t,e,n){const r=I0(t);try{const i=await function(s,o){const a=B(s),l=je.now(),u=o.reduce((h,f)=>h.add(f.key),ae());let c,d;return a.persistence.runTransaction("Locally write mutations","readwrite",h=>{let f=un(),m=ae();return a.Zi.getEntries(h,u).next(w=>{f=w,f.forEach((I,y)=>{y.isValidDocument()||(m=m.add(I))})}).next(()=>a.localDocuments.getOverlayedDocuments(h,f)).next(w=>{c=w;const I=[];for(const y of o){const p=WB(y,c.get(y.key).overlayedDocument);p!=null&&I.push(new ni(y.key,p,Cb(p.value.mapValue),Ve.exists(!0)))}return a.mutationQueue.addMutationBatch(h,l,I,o)}).next(w=>{d=w;const I=w.applyToLocalDocumentSet(c,m);return a.documentOverlayCache.saveOverlays(h,w.batchId,I)})}).then(()=>({batchId:d.batchId,changes:Fb(c)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,a){let l=s.Tc[s.currentUser.toKey()];l||(l=new ke(se)),l=l.insert(o,a),s.Tc[s.currentUser.toKey()]=l}(r,i.batchId,n),await ri(r,i.changes),await sl(r.remoteStore)}catch(i){const s=al(i,"Failed to persist write");n.reject(s)}}async function BN(t,e){const n=B(t);try{const r=await M4(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.yc.get(s);o&&(ee(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.fc=!0:i.modifiedDocuments.size>0?ee(o.fc):i.removedDocuments.size>0&&(ee(o.fc),o.fc=!1))}),await ri(n,r,e)}catch(r){await ls(r)}}function d_(t,e,n){const r=B(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.wc.forEach((s,o)=>{const a=o.view.Mu(e);a.snapshot&&i.push(a.snapshot)}),function(s,o){const a=B(s);a.onlineState=o;let l=!1;a.queries.forEach((u,c)=>{for(const d of c.listeners)d.Mu(o)&&(l=!0)}),l&&p0(a)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function vz(t,e,n){const r=B(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.yc.get(e),s=i&&i.key;if(s){let o=new ke(F.comparator);o=o.insert(s,De.newNoDocument(s,Z.min()));const a=ae().add(s),l=new Lc(Z.min(),new Map,new ke(se),o,a);await BN(r,l),r.gc=r.gc.remove(s),r.yc.delete(e),w0(r)}else await Oa(r.localStore,e,!1).then(()=>La(r,e,n)).catch(ls)}async function yz(t,e){const n=B(t),r=e.batch.batchId;try{const i=await $4(n.localStore,e);y0(n,r,null),v0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ri(n,i)}catch(i){await ls(i)}}async function wz(t,e,n){const r=B(t);try{const i=await function(s,o){const a=B(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return a.mutationQueue.lookupMutationBatch(l,o).next(c=>(ee(c!==null),u=c.keys(),a.mutationQueue.removeMutationBatch(l,c))).next(()=>a.mutationQueue.performConsistencyCheck(l)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(l,u,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>a.localDocuments.getDocuments(l,u))})}(r.localStore,e);y0(r,e,n),v0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ri(r,i)}catch(i){await ls(i)}}async function Ez(t,e){const n=B(t);ds(n.remoteStore)||O("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(s){const o=B(s);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",a=>o.mutationQueue.getHighestUnacknowledgedBatchId(a))}(n.localStore);if(r===-1)return void e.resolve();const i=n.Ec.get(r)||[];i.push(e),n.Ec.set(r,i)}catch(r){const i=al(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function v0(t,e){(t.Ec.get(e)||[]).forEach(n=>{n.resolve()}),t.Ec.delete(e)}function y0(t,e,n){const r=B(t);let i=r.Tc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function La(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t._c.get(e))t.wc.delete(r),n&&t.dc.Pc(r,n);t._c.delete(e),t.isPrimaryClient&&t.Ic.Is(e).forEach(r=>{t.Ic.containsKey(r)||zN(t,r)})}function zN(t,e){t.mc.delete(e.path.canonicalString());const n=t.gc.get(e);n!==null&&(tc(t.remoteStore,n),t.gc=t.gc.remove(e),t.yc.delete(n),w0(t))}function Tv(t,e,n){for(const r of n)r instanceof UN?(t.Ic.addReference(r.key,e),Iz(t,r)):r instanceof VN?(O("SyncEngine","Document no longer in limbo: "+r.key),t.Ic.removeReference(r.key,e),t.Ic.containsKey(r.key)||zN(t,r.key)):H()}function Iz(t,e){const n=e.key,r=n.path.canonicalString();t.gc.get(n)||t.mc.has(r)||(O("SyncEngine","New document in limbo: "+n),t.mc.add(r),w0(t))}function w0(t){for(;t.mc.size>0&&t.gc.size<t.maxConcurrentLimboResolutions;){const e=t.mc.values().next().value;t.mc.delete(e);const n=new F(ge.fromString(e)),r=t.Ac.next();t.yc.set(r,new hz(n)),t.gc=t.gc.insert(n,r),lp(t.remoteStore,new Mr(mn(tl(n.path)),r,"TargetPurposeLimboResolution",an.ct))}}async function ri(t,e,n){const r=B(t),i=[],s=[],o=[];r.wc.isEmpty()||(r.wc.forEach((a,l)=>{o.push(r.Rc(l,e,n).then(u=>{if((u||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,u!=null&&u.fromCache?"not-current":"current"),u){i.push(u);const c=s0.Li(l.targetId,u);s.push(c)}}))}),await Promise.all(o),r.dc.nu(i),await async function(a,l){const u=B(a);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",c=>x.forEach(l,d=>x.forEach(d.Fi,h=>u.persistence.referenceDelegate.addReference(c,d.targetId,h)).next(()=>x.forEach(d.Bi,h=>u.persistence.referenceDelegate.removeReference(c,d.targetId,h)))))}catch(c){if(!us(c))throw c;O("LocalStore","Failed to update sequence numbers: "+c)}for(const c of l){const d=c.targetId;if(!c.fromCache){const h=u.Ji.get(d),f=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(f);u.Ji=u.Ji.insert(d,m)}}}(r.localStore,s))}async function _z(t,e){const n=B(t);if(!n.currentUser.isEqual(e)){O("SyncEngine","User change. New user:",e.toKey());const r=await TN(n.localStore,e);n.currentUser=e,function(i,s){i.Ec.forEach(o=>{o.forEach(a=>{a.reject(new D(k.CANCELLED,s))})}),i.Ec.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ri(n,r.er)}}function Sz(t,e){const n=B(t),r=n.yc.get(e);if(r&&r.fc)return ae().add(r.key);{let i=ae();const s=n._c.get(e);if(!s)return i;for(const o of s){const a=n.wc.get(o);i=i.unionWith(a.view.nc)}return i}}async function Tz(t,e){const n=B(t),r=await Gh(n.localStore,e.query,!0),i=e.view.hc(r);return n.isPrimaryClient&&Tv(n,e.targetId,i.cc),i}async function Cz(t,e){const n=B(t);return bN(n.localStore,e).then(r=>ri(n,r))}async function xz(t,e,n,r){const i=B(t),s=await function(o,a){const l=B(o),u=B(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",c=>u.Sn(c,a).next(d=>d?l.localDocuments.getDocuments(c,d):x.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await sl(i.remoteStore):n==="acknowledged"||n==="rejected"?(y0(i,e,r||null),v0(i,e),function(o,a){B(B(o).mutationQueue).Cn(a)}(i.localStore,e)):H(),await ri(i,s)):O("SyncEngine","Cannot apply mutation batch with id: "+e)}async function kz(t,e){const n=B(t);if(E0(n),I0(n),e===!0&&n.vc!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await h_(n,r.toArray());n.vc=!0,await Sv(n.remoteStore,!0);for(const s of i)lp(n.remoteStore,s)}else if(e===!1&&n.vc!==!1){const r=[];let i=Promise.resolve();n._c.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(La(n,o),Oa(n.localStore,o,!0))),tc(n.remoteStore,o)}),await i,await h_(n,r),function(s){const o=B(s);o.yc.forEach((a,l)=>{tc(o.remoteStore,l)}),o.Ic.Ts(),o.yc=new Map,o.gc=new ke(F.comparator)}(n),n.vc=!1,await Sv(n.remoteStore,!1)}}async function h_(t,e,n){const r=B(t),i=[],s=[];for(const o of e){let a;const l=r._c.get(o);if(l&&l.length!==0){a=await Da(r.localStore,mn(l[0]));for(const u of l){const c=r.wc.get(u),d=await Tz(r,c);d.snapshot&&s.push(d.snapshot)}}else{const u=await kN(r.localStore,o);a=await Da(r.localStore,u),await g0(r,qN(u),o,!1,a.resumeToken)}i.push(a)}return r.dc.nu(s),i}function qN(t){return Ob(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function bz(t){const e=B(t);return B(B(e.localStore).persistence).$i()}async function Nz(t,e,n,r){const i=B(t);if(i.vc)return void O("SyncEngine","Ignoring unexpected query state notification.");const s=i._c.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await bN(i.localStore,Lb(s[0])),a=Lc.createSynthesizedRemoteEventForCurrentChange(e,n==="current",ht.EMPTY_BYTE_STRING);await ri(i,o,a);break}case"rejected":await Oa(i.localStore,e,!0),La(i,e,r);break;default:H()}}async function Az(t,e,n){const r=E0(t);if(r.vc){for(const i of e){if(r._c.has(i)){O("SyncEngine","Adding an already active target "+i);continue}const s=await kN(r.localStore,i),o=await Da(r.localStore,s);await g0(r,qN(s),o.targetId,!1,o.resumeToken),lp(r.remoteStore,o)}for(const i of n)r._c.has(i)&&await Oa(r.localStore,i,!1).then(()=>{tc(r.remoteStore,i),La(r,i)}).catch(ls)}}function E0(t){const e=B(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=BN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Sz.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vz.bind(null,e),e.dc.nu=az.bind(null,e.eventManager),e.dc.Pc=lz.bind(null,e.eventManager),e}function I0(t){const e=B(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=yz.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=wz.bind(null,e),e}function Rz(t,e,n){const r=B(t);(async function(i,s,o){try{const a=await s.getMetadata();if(await function(d,h){const f=B(d),m=nt(h.createTime);return f.persistence.runTransaction("hasNewerBundle","readonly",w=>f.qs.getBundleMetadata(w,h.id)).then(w=>!!w&&w.createTime.compareTo(m)>=0)}(i.localStore,a))return await s.close(),o._completeWith(function(d){return{taskState:"Success",documentsLoaded:d.totalDocuments,bytesLoaded:d.totalBytes,totalDocuments:d.totalDocuments,totalBytes:d.totalBytes}}(a)),Promise.resolve(new Set);o._updateProgress(FN(a));const l=new cz(a,i.localStore,s.serializer);let u=await s.bc();for(;u;){const d=await l.zu(u);d&&o._updateProgress(d),u=await s.bc()}const c=await l.complete();return await ri(i,c.Ju,void 0),await function(d,h){const f=B(d);return f.persistence.runTransaction("Save bundle","readwrite",m=>f.qs.saveBundleMetadata(m,h))}(i.localStore,a),o._completeWith(c.progress),Promise.resolve(c.Hu)}catch(a){return Jn("SyncEngine",`Loading bundle failed with ${a}`),o._failWith(a),Promise.resolve(new Set)}})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class Cv{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Mc(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return SN(this.persistence,new _N,e.initialUser,this.serializer)}createPersistence(e){return new IN(ap.zs,this.serializer)}createSharedClientState(e){return new AN}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class WN extends Cv{constructor(e,n,r){super(),this.Vc=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Vc.initialize(this,e),await I0(this.Vc.syncEngine),await sl(this.Vc.remoteStore),await this.persistence.Ii(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}createLocalStore(e){return SN(this.persistence,new _N,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new E4(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const r=new rB(n,this.persistence);return new nB(e.asyncQueue,r)}createPersistence(e){const n=i0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?rn.withCacheSize(this.cacheSizeBytes):rn.DEFAULT;return new r0(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,RN(),Yd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new AN}}class Dz extends WN{constructor(e,n){super(e,n,!1),this.Vc=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Vc.syncEngine;this.sharedClientState instanceof xm&&(this.sharedClientState.syncEngine={jr:xz.bind(null,n),zr:Nz.bind(null,n),Wr:Az.bind(null,n),$i:bz.bind(null,n),Qr:Cz.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ii(async r=>{await kz(this.Vc.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}createSharedClientState(e){const n=RN();if(!xm.D(n))throw new D(k.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=i0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new xm(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class _0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>d_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=_z.bind(null,this.syncEngine),await Sv(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new oz}createDatastore(e){const n=Mc(e.databaseInfo.databaseId),r=(i=e.databaseInfo,new q4(i));var i;return function(s,o,a,l){return new K4(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,i=e.asyncQueue,s=a=>d_(this.syncEngine,a,0),o=a_.D()?new a_:new j4,new Q4(n,r,i,s,o);var n,r,i,s,o}createSyncEngine(e,n){return function(r,i,s,o,a,l,u){const c=new fz(r,i,s,o,a,l);return u&&(c.vc=!0),c}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=B(e);O("RemoteStore","RemoteStore shutting down."),n.vu.add(5),await il(n),n.Pu.shutdown(),n.bu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f_(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Ze("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oz{constructor(e,n){this.Cc=e,this.serializer=n,this.metadata=new Et,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}async getMetadata(){return this.metadata.promise}async bc(){return await this.getMetadata(),this.Nc()}async Nc(){const e=await this.kc();if(e===null)return null;const n=this.xc.decode(e),r=Number(n);isNaN(r)&&this.Mc(`length string (${n}) is not valid number`);const i=await this.$c(r);return new uz(JSON.parse(i),e.length+r)}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async kc(){for(;this.Oc()<0&&!await this.Fc(););if(this.buffer.length===0)return null;const e=this.Oc();e<0&&this.Mc("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async $c(e){for(;this.buffer.length<e;)await this.Fc()&&this.Mc("Reached the end of bundle when more is expected.");const n=this.xc.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}async Fc(){const e=await this.Cc.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pz{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new D(k.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=await async function(r,i){const s=B(r),o=Zu(s.serializer)+"/documents",a={documents:i.map(d=>Ju(s.serializer,d))},l=await s.vo("BatchGetDocuments",o,a,i.length),u=new Map;l.forEach(d=>{const h=e4(s.serializer,d);u.set(h.key.toString(),h)});const c=[];return i.forEach(d=>{const h=u.get(d.toString());ee(!!h),c.push(h)}),c}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new rl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=F.fromPath(r);this.mutations.push(new Hw(i,this.precondition(i)))}),await async function(n,r){const i=B(n),s=Zu(i.serializer)+"/documents",o={writes:r.map(a=>ec(i.serializer,a))};await i.Io("Commit",s,o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw H();n=Z.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new D(k.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Z.min())?Ve.exists(!1):Ve.updateTime(n):Ve.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Z.min()))throw new D(k.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ve.updateTime(n)}return Ve.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lz{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.Bc=r.maxAttempts,this.qo=new a0(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){this.qo.No(async()=>{const e=new Pz(this.datastore),n=this.qc(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Uc(i)}))}).catch(r=>{this.Uc(r)})})}qc(e){try{const n=this.updateFunction(e);return!Ac(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!Qb(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $z{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=yt.UNAUTHENTICATED,this.clientId=cb.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{O("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(O("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new D(k.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Et;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=al(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Xd(t,e){t.asyncQueue.verifyOperationInProgress(),O("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await TN(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function xv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await S0(t);O("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(i=>l_(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>l_(e.remoteStore,s)),t._onlineComponents=e}function HN(t){return t.name==="FirebaseError"?t.code===k.FAILED_PRECONDITION||t.code===k.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function S0(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){O("FirestoreClient","Using user provided OfflineComponentProvider");try{await Xd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!HN(n))throw n;Jn("Error using user provided cache. Falling back to memory cache: "+n),await Xd(t,new Cv)}}else O("FirestoreClient","Using default OfflineComponentProvider"),await Xd(t,new Cv);return t._offlineComponents}async function cp(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(O("FirestoreClient","Using user provided OnlineComponentProvider"),await xv(t,t._uninitializedComponentsProvider._online)):(O("FirestoreClient","Using default OnlineComponentProvider"),await xv(t,new _0))),t._onlineComponents}function KN(t){return S0(t).then(e=>e.persistence)}function T0(t){return S0(t).then(e=>e.localStore)}function GN(t){return cp(t).then(e=>e.remoteStore)}function C0(t){return cp(t).then(e=>e.syncEngine)}function Mz(t){return cp(t).then(e=>e.datastore)}async function $a(t){const e=await cp(t),n=e.eventManager;return n.onListen=pz.bind(null,e.syncEngine),n.onUnlisten=mz.bind(null,e.syncEngine),n}function Fz(t){return t.asyncQueue.enqueue(async()=>{const e=await KN(t),n=await GN(t);return e.setNetworkEnabled(!0),function(r){const i=B(r);return i.vu.delete(0),Fc(i)}(n)})}function Uz(t){return t.asyncQueue.enqueue(async()=>{const e=await KN(t),n=await GN(t);return e.setNetworkEnabled(!1),async function(r){const i=B(r);i.vu.add(0),await il(i),i.bu.set("Offline")}(n)})}function Vz(t,e){const n=new Et;return t.asyncQueue.enqueueAndForget(async()=>async function(r,i,s){try{const o=await function(a,l){const u=B(a);return u.persistence.runTransaction("read document","readonly",c=>u.localDocuments.getDocument(c,l))}(r,i);o.isFoundDocument()?s.resolve(o):o.isNoDocument()?s.resolve(null):s.reject(new D(k.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(o){const a=al(o,`Failed to get document '${i} from cache`);s.reject(a)}}(await T0(t),e,n)),n.promise}function QN(t,e,n={}){const r=new Et;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,o,a,l){const u=new up({next:d=>{s.enqueueAndForget(()=>f0(i,c));const h=d.docs.has(o);!h&&d.fromCache?l.reject(new D(k.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&a&&a.source==="server"?l.reject(new D(k.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),c=new m0(tl(o.path),u,{includeMetadataChanges:!0,Ku:!0});return h0(i,c)}(await $a(t),t.asyncQueue,e,n,r)),r.promise}function jz(t,e){const n=new Et;return t.asyncQueue.enqueueAndForget(async()=>async function(r,i,s){try{const o=await Gh(r,i,!0),a=new jN(i,o.ir),l=a.sc(o.documents),u=a.applyChanges(l,!1);s.resolve(u.snapshot)}catch(o){const a=al(o,`Failed to execute query '${i} against cache`);s.reject(a)}}(await T0(t),e,n)),n.promise}function YN(t,e,n={}){const r=new Et;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,o,a,l){const u=new up({next:d=>{s.enqueueAndForget(()=>f0(i,c)),d.fromCache&&a.source==="server"?l.reject(new D(k.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),c=new m0(o,u,{includeMetadataChanges:!0,Ku:!0});return h0(i,c)}(await $a(t),t.asyncQueue,e,n,r)),r.promise}function Bz(t,e){const n=new up(e);return t.asyncQueue.enqueueAndForget(async()=>function(r,i){B(r).ku.add(i),i.next()}(await $a(t),n)),()=>{n.Dc(),t.asyncQueue.enqueueAndForget(async()=>function(r,i){B(r).ku.delete(i)}(await $a(t),n))}}function zz(t,e,n,r){const i=function(s,o){let a;return a=typeof s=="string"?Xb().encode(s):s,function(l,u){return new Oz(l,u)}(function(l,u){if(l instanceof Uint8Array)return f_(l,u);if(l instanceof ArrayBuffer)return f_(new Uint8Array(l),u);if(l instanceof ReadableStream)return l.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(a),o)}(n,Mc(e));t.asyncQueue.enqueueAndForget(async()=>{Rz(await C0(t),i,r)})}function qz(t,e){return t.asyncQueue.enqueue(async()=>function(n,r){const i=B(n);return i.persistence.runTransaction("Get named query","readonly",s=>i.qs.getNamedQuery(s,r))}(await T0(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XN(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x0(t,e,n){if(!n)throw new D(k.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function JN(t,e,n,r){if(e===!0&&r===!0)throw new D(k.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function m_(t){if(!F.isDocumentKey(t))throw new D(k.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function g_(t){if(F.isDocumentKey(t))throw new D(k.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function dp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":H()}function we(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new D(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=dp(t);throw new D(k.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function ZN(t,e){if(e<=0)throw new D(k.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new D(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new D(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}JN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=XN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new D(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new D(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new D(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(n=this.experimentalLongPollingOptions,r=e.experimentalLongPollingOptions,n.timeoutSeconds===r.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var n,r}}class Uc{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new v_({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new D(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new D(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new v_(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new qj;switch(n.type){case"firstParty":return new Gj(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new D(k.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=p_.get(e);n&&(O("ComponentProvider","Removing Datastore"),p_.delete(e),n.terminate())}(this),Promise.resolve()}}function Wz(t,e,n,r={}){var i;const s=(t=we(t,Uc))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Jn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=yt.MOCK_USER;else{a=h$(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new D(k.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new yt(u)}t._authCredentials=new Wj(new ub(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $e(this.firestore,e,this._key)}}class Lt{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Lt(this.firestore,e,this._query)}}class yr extends Lt{constructor(e,n,r){super(e,n,tl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $e(this.firestore,null,new F(e))}withConverter(e){return new yr(this.firestore,e,this._path)}}function eA(t,e,...n){if(t=ne(t),x0("collection","path",e),t instanceof Uc){const r=ge.fromString(e,...n);return g_(r),new yr(t,null,r)}{if(!(t instanceof $e||t instanceof yr))throw new D(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ge.fromString(e,...n));return g_(r),new yr(t.firestore,null,r)}}function Hz(t,e){if(t=we(t,Uc),x0("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new D(k.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Lt(t,null,function(n){return new ti(ge.emptyPath(),n)}(e))}function Jh(t,e,...n){if(t=ne(t),arguments.length===1&&(e=cb.A()),x0("doc","path",e),t instanceof Uc){const r=ge.fromString(e,...n);return m_(r),new $e(t,null,new F(r))}{if(!(t instanceof $e||t instanceof yr))throw new D(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ge.fromString(e,...n));return m_(r),new $e(t.firestore,t instanceof yr?t.converter:null,new F(r))}}function tA(t,e){return t=ne(t),e=ne(e),(t instanceof $e||t instanceof yr)&&(e instanceof $e||e instanceof yr)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function nA(t,e){return t=ne(t),e=ne(e),t instanceof Lt&&e instanceof Lt&&t.firestore===e.firestore&&Dc(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kz{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new a0(this,"async_queue_retry"),this.Xc=()=>{const n=Yd();n&&O("AsyncQueue","Visibility state changed to "+n.visibilityState),this.qo.Mo()};const e=Yd();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const n=Yd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const n=new Et;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}async ea(){if(this.Qc.length!==0){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!us(e))throw e;O("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No(()=>this.ea())}}ta(e){const n=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{this.Wc=r,this.Hc=!1;const i=function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),o}(r);throw Ze("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Hc=!1,r))));return this.Gc=n,n}enqueueAfterDelay(e,n,r){this.Zc(),this.Yc.indexOf(e)>-1&&(n=0);const i=d0.createAndSchedule(this,e,n,r,s=>this.na(s));return this.zc.push(i),i}Zc(){this.Wc&&H()}verifyOperationInProgress(){}async sa(){let e;do e=this.Gc,await e;while(e!==this.Gc)}ia(e){for(const n of this.zc)if(n.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.zc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const n=this.zc.indexOf(e);this.zc.splice(n,1)}}function kv(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const r=e;for(const i of n)if(i in r&&typeof r[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Gz{constructor(){this._progressObserver={},this._taskCompletionResolver=new Et,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qz=-1;class Xe extends Uc{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Kz,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||rA(this),this._firestoreClient.terminate()}}function Tt(t){return t._firestoreClient||rA(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function rA(t){var e,n,r;const i=t._freezeSettings(),s=function(o,a,l,u){return new TB(o,a,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,XN(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new $z(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.cache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.cache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function Yz(t,e){sA(t=we(t,Xe));const n=Tt(t);if(n._uninitializedComponentsProvider)throw new D(k.FAILED_PRECONDITION,"SDK cache is already specified.");Jn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings(),i=new _0;return iA(n,i,new WN(i,r.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function Xz(t){sA(t=we(t,Xe));const e=Tt(t);if(e._uninitializedComponentsProvider)throw new D(k.FAILED_PRECONDITION,"SDK cache is already specified.");Jn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),r=new _0;return iA(e,r,new Dz(r,n.cacheSizeBytes))}function iA(t,e,n){const r=new Et;return t.asyncQueue.enqueue(async()=>{try{await Xd(t,n),await xv(t,e),r.resolve()}catch(i){const s=i;if(!HN(s))throw s;Jn("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}}).then(()=>r.promise)}function Jz(t){if(t._initialized&&!t._terminated)throw new D(k.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Et;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(n){if(!Hn.D())return Promise.resolve();const r=n+"main";await Hn.delete(r)}(i0(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function Zz(t){return function(e){const n=new Et;return e.asyncQueue.enqueueAndForget(async()=>Ez(await C0(e),n)),n.promise}(Tt(t=we(t,Xe)))}function e3(t){return Fz(Tt(t=we(t,Xe)))}function t3(t){return Uz(Tt(t=we(t,Xe)))}function n3(t,e){const n=Tt(t=we(t,Xe)),r=new Gz;return zz(n,t._databaseId,e,r),r}function r3(t,e){return qz(Tt(t=we(t,Xe)),e).then(n=>n?new Lt(t,null,n.query):null)}function sA(t){if(t._initialized||t._terminated)throw new D(k.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Tr(ht.fromBase64String(e))}catch(n){throw new D(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Tr(ht.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new D(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new et(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new D(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new D(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return se(this._lat,e._lat)||se(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i3=/^__.*__$/;class s3{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ni(e,this.data,this.fieldMask,n,this.fieldTransforms):new nl(e,this.data,n,this.fieldTransforms)}}class oA{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ni(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function aA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw H()}}class fp{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.ua(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new fp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Zh(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(e.length===0)throw this._a("Document fields must not be empty");if(aA(this.ca)&&i3.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class o3{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Mc(e)}ya(e,n,r,i=!1){return new fp({ca:e,methodName:n,ga:r,path:et.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function wo(t){const e=t._freezeSettings(),n=Mc(t._databaseId);return new o3(t._databaseId,!!e.ignoreUndefinedProperties,n)}function pp(t,e,n,r,i,s={}){const o=t.ya(s.merge||s.mergeFields?2:0,e,n,i);A0("Data must be an object, but it was:",o,r);const a=cA(r,o);let l,u;if(s.merge)l=new ln(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const d of s.mergeFields){const h=bv(e,d,n);if(!o.contains(h))throw new D(k.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);hA(c,h)||c.push(h)}l=new ln(c),u=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,u=o.fieldTransforms;return new s3(new Nt(a),l,u)}class Vc extends yo{_toFieldTransform(e){if(e.ca!==2)throw e.ca===1?e._a(`${this._methodName}() can only appear at the top level of your update data`):e._a(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Vc}}function lA(t,e,n){return new fp({ca:3,ga:e.settings.ga,methodName:t._methodName,la:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class k0 extends yo{_toFieldTransform(e){return new Pc(e.path,new Na)}isEqual(e){return e instanceof k0}}class a3 extends yo{constructor(e,n){super(e),this.pa=n}_toFieldTransform(e){const n=lA(this,e,!0),r=this.pa.map(s=>Eo(s,n)),i=new ro(r);return new Pc(e.path,i)}isEqual(e){return this===e}}class l3 extends yo{constructor(e,n){super(e),this.pa=n}_toFieldTransform(e){const n=lA(this,e,!0),r=this.pa.map(s=>Eo(s,n)),i=new io(r);return new Pc(e.path,i)}isEqual(e){return this===e}}class u3 extends yo{constructor(e,n){super(e),this.Ia=n}_toFieldTransform(e){const n=new Aa(e.serializer,Bb(e.serializer,this.Ia));return new Pc(e.path,n)}isEqual(e){return this===e}}function b0(t,e,n,r){const i=t.ya(1,e,n);A0("Data must be an object, but it was:",i,r);const s=[],o=Nt.empty();vo(r,(l,u)=>{const c=R0(e,l,n);u=ne(u);const d=i.da(c);if(u instanceof Vc)s.push(c);else{const h=Eo(u,d);h!=null&&(s.push(c),o.set(c,h))}});const a=new ln(s);return new oA(o,a,i.fieldTransforms)}function N0(t,e,n,r,i,s){const o=t.ya(1,e,n),a=[bv(e,r,n)],l=[i];if(s.length%2!=0)throw new D(k.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(bv(e,s[h])),l.push(s[h+1]);const u=[],c=Nt.empty();for(let h=a.length-1;h>=0;--h)if(!hA(u,a[h])){const f=a[h];let m=l[h];m=ne(m);const w=o.da(f);if(m instanceof Vc)u.push(f);else{const I=Eo(m,w);I!=null&&(u.push(f),c.set(f,I))}}const d=new ln(u);return new oA(c,d,o.fieldTransforms)}function uA(t,e,n,r=!1){return Eo(n,t.ya(r?4:3,e))}function Eo(t,e){if(dA(t=ne(t)))return A0("Unsupported field value:",e,t),cA(t,e);if(t instanceof yo)return function(n,r){if(!aA(r.ca))throw r._a(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.la&&e.ca!==4)throw e._a("Nested arrays are not supported");return function(n,r){const i=[];let s=0;for(const o of n){let a=Eo(o,r.wa(s));a==null&&(a={nullValue:"NULL_VALUE"}),i.push(a),s++}return{arrayValue:{values:i}}}(t,e)}return function(n,r){if((n=ne(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Bb(r.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=je.fromDate(n);return{timestampValue:Ra(r.serializer,i)}}if(n instanceof je){const i=new je(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Ra(r.serializer,i)}}if(n instanceof hp)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Tr)return{bytesValue:eN(r.serializer,n._byteString)};if(n instanceof $e){const i=r.databaseId,s=n.firestore._databaseId;if(!s.isEqual(i))throw r._a(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Jw(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r._a(`Unsupported field value: ${dp(n)}`)}(t,e)}function cA(t,e){const n={};return _b(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):vo(t,(r,i)=>{const s=Eo(i,e.ha(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function dA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof je||t instanceof hp||t instanceof Tr||t instanceof $e||t instanceof yo)}function A0(t,e,n){if(!dA(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const r=dp(n);throw r==="an object"?e._a(t+" a custom object"):e._a(t+" "+r)}}function bv(t,e,n){if((e=ne(e))instanceof Xi)return e._internalPath;if(typeof e=="string")return R0(t,e);throw Zh("Field path arguments must be of type string or ",t,!1,void 0,n)}const c3=new RegExp("[~\\*/\\[\\]]");function R0(t,e,n){if(e.search(c3)>=0)throw Zh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Xi(...e.split("."))._internalPath}catch{throw Zh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Zh(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new D(k.INVALID_ARGUMENT,a+t+l)}function hA(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new $e(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new d3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(mp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class d3 extends nc{data(){return super.data()}}function mp(t,e){return typeof e=="string"?R0(t,e):e instanceof Xi?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fA(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new D(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class D0{}class jc extends D0{}function ci(t,e,...n){let r=[];e instanceof D0&&r.push(e),r=r.concat(n),function(i){const s=i.filter(a=>a instanceof O0).length,o=i.filter(a=>a instanceof gp).length;if(s>1||s>0&&o>0)throw new D(k.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class gp extends jc{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new gp(e,n,r)}_apply(e){const n=this._parse(e);return mA(e._query,n),new Lt(e.firestore,e.converter,pv(e._query,n))}_parse(e){const n=wo(e.firestore);return function(i,s,o,a,l,u,c){let d;if(l.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new D(k.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){w_(c,u);const h=[];for(const f of c)h.push(y_(a,i,f));d={arrayValue:{values:h}}}else d=y_(a,i,c)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||w_(c,u),d=uA(o,s,c,u==="in"||u==="not-in");return he.create(l,u,d)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function h3(t,e,n){const r=e,i=mp("where",t);return gp._create(i,r,n)}class O0 extends D0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new O0(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:_e.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,i){let s=r;const o=i.getFlattenedFilters();for(const a of o)mA(s,a),s=pv(s,a)}(e._query,n),new Lt(e.firestore,e.converter,pv(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class P0 extends jc{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new P0(e,n)}_apply(e){const n=function(r,i,s){if(r.startAt!==null)throw new D(k.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new D(k.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new fa(i,s);return function(a,l){if(zw(a)===null){const u=np(a);u!==null&&gA(a,u,l.field)}}(r,o),o}(e._query,this._field,this._direction);return new Lt(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new ti(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function f3(t,e="asc"){const n=e,r=mp("orderBy",t);return P0._create(r,n)}class vp extends jc{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new vp(e,n,r)}_apply(e){return new Lt(e.firestore,e.converter,qh(e._query,this._limit,this._limitType))}}function p3(t){return ZN("limit",t),vp._create("limit",t,"F")}function m3(t){return ZN("limitToLast",t),vp._create("limitToLast",t,"L")}class yp extends jc{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new yp(e,n,r)}_apply(e){const n=pA(e,this.type,this._docOrFields,this._inclusive);return new Lt(e.firestore,e.converter,function(r,i){return new ti(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)}(e._query,n))}}function g3(...t){return yp._create("startAt",t,!0)}function v3(...t){return yp._create("startAfter",t,!1)}class wp extends jc{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new wp(e,n,r)}_apply(e){const n=pA(e,this.type,this._docOrFields,this._inclusive);return new Lt(e.firestore,e.converter,function(r,i){return new ti(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)}(e._query,n))}}function y3(...t){return wp._create("endBefore",t,!1)}function w3(...t){return wp._create("endAt",t,!0)}function pA(t,e,n,r){if(n[0]=ne(n[0]),n[0]instanceof nc)return function(i,s,o,a,l){if(!a)throw new D(k.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const u=[];for(const c of Bs(i))if(c.field.isKeyField())u.push(to(s,a.key));else{const d=a.data.field(c.field);if(tp(d))throw new D(k.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+c.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(d===null){const h=c.field.canonicalString();throw new D(k.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${h}' (used as the orderBy) does not exist.`)}u.push(d)}return new Qi(u,l)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=wo(t.firestore);return function(s,o,a,l,u,c){const d=s.explicitOrderBy;if(u.length>d.length)throw new D(k.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const h=[];for(let f=0;f<u.length;f++){const m=u[f];if(d[f].field.isKeyField()){if(typeof m!="string")throw new D(k.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof m}`);if(!qw(s)&&m.indexOf("/")!==-1)throw new D(k.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${m}' contains a slash.`);const w=s.path.child(ge.fromString(m));if(!F.isDocumentKey(w))throw new D(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${w}' is not because it contains an odd number of segments.`);const I=new F(w);h.push(to(o,I))}else{const w=uA(a,l,m);h.push(w)}}return new Qi(h,c)}(t._query,t.firestore._databaseId,i,e,n,r)}}function y_(t,e,n){if(typeof(n=ne(n))=="string"){if(n==="")throw new D(k.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qw(e)&&n.indexOf("/")!==-1)throw new D(k.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ge.fromString(n));if(!F.isDocumentKey(r))throw new D(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return to(t,new F(r))}if(n instanceof $e)return to(t,n._key);throw new D(k.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${dp(n)}.`)}function w_(t,e){if(!Array.isArray(t)||t.length===0)throw new D(k.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function mA(t,e){if(e.isInequality()){const r=np(t),i=e.field;if(r!==null&&!r.isEqual(i))throw new D(k.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=zw(t);s!==null&&gA(t,i,s)}const n=function(r,i){for(const s of r)for(const o of s.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new D(k.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new D(k.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function gA(t,e,n){if(!n.isEqual(e))throw new D(k.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class L0{convertValue(e,n="none"){switch(eo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Hi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw H()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return vo(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new hp(Qe(e.latitude),Qe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=jw(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Qu(e));default:return null}}convertTimestamp(e){const n=Wi(e);return new je(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ge.fromString(e);ee(cN(r));const i=new Ki(r.get(1),r.get(3)),s=new F(r.popFirst(5));return i.isEqual(n)||Ze(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class E3 extends L0{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new $e(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Qr extends nc{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new lu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(mp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class lu extends Qr{data(e={}){return super.data(e)}}class Ji{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Os(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new lu(this._firestore,this._userDataWriter,r.key,r,new Os(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new D(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(o=>{const a=new lu(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Os(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:s++}})}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>i||o.type!==3).map(o=>{const a=new lu(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Os(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let l=-1,u=-1;return o.type!==0&&(l=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),u=s.indexOf(o.doc.key)),{type:I3(o.type),doc:a,oldIndex:l,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function I3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return H()}}function vA(t,e){return t instanceof Qr&&e instanceof Qr?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Ji&&e instanceof Ji&&t._firestore===e._firestore&&nA(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _3(t){t=we(t,$e);const e=we(t.firestore,Xe);return QN(Tt(e),t._key).then(n=>$0(e,t,n))}class Io extends L0{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new $e(this.firestore,null,n)}}function S3(t){t=we(t,$e);const e=we(t.firestore,Xe),n=Tt(e),r=new Io(e);return Vz(n,t._key).then(i=>new Qr(e,r,t._key,i,new Os(i!==null&&i.hasLocalMutations,!0),t.converter))}function T3(t){t=we(t,$e);const e=we(t.firestore,Xe);return QN(Tt(e),t._key,{source:"server"}).then(n=>$0(e,t,n))}function C3(t){t=we(t,Lt);const e=we(t.firestore,Xe),n=Tt(e),r=new Io(e);return fA(t._query),YN(n,t._query).then(i=>new Ji(e,r,t,i))}function x3(t){t=we(t,Lt);const e=we(t.firestore,Xe),n=Tt(e),r=new Io(e);return jz(n,t._query).then(i=>new Ji(e,r,t,i))}function k3(t){t=we(t,Lt);const e=we(t.firestore,Xe),n=Tt(e),r=new Io(e);return YN(n,t._query,{source:"server"}).then(i=>new Ji(e,r,t,i))}function E_(t,e,n){t=we(t,$e);const r=we(t.firestore,Xe),i=Ep(t.converter,e,n);return Bc(r,[pp(wo(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ve.none())])}function I_(t,e,n,...r){t=we(t,$e);const i=we(t.firestore,Xe),s=wo(i);let o;return o=typeof(e=ne(e))=="string"||e instanceof Xi?N0(s,"updateDoc",t._key,e,n,r):b0(s,"updateDoc",t._key,e),Bc(i,[o.toMutation(t._key,Ve.exists(!0))])}function b3(t){return Bc(we(t.firestore,Xe),[new rl(t._key,Ve.none())])}function N3(t,e){const n=we(t.firestore,Xe),r=Jh(t),i=Ep(t.converter,e);return Bc(n,[pp(wo(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Ve.exists(!1))]).then(()=>r)}function yA(t,...e){var n,r,i;t=ne(t);let s={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||kv(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(kv(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let l,u,c;if(t instanceof $e)u=we(t.firestore,Xe),c=tl(t._key.path),l={next:d=>{e[o]&&e[o]($0(u,t,d))},error:e[o+1],complete:e[o+2]};else{const d=we(t,Lt);u=we(d.firestore,Xe),c=d._query;const h=new Io(u);l={next:f=>{e[o]&&e[o](new Ji(u,h,d,f))},error:e[o+1],complete:e[o+2]},fA(t._query)}return function(d,h,f,m){const w=new up(m),I=new m0(h,w,f);return d.asyncQueue.enqueueAndForget(async()=>h0(await $a(d),I)),()=>{w.Dc(),d.asyncQueue.enqueueAndForget(async()=>f0(await $a(d),I))}}(Tt(u),c,a,l)}function A3(t,e){return Bz(Tt(t=we(t,Xe)),kv(e)?e:{next:e})}function Bc(t,e){return function(n,r){const i=new Et;return n.asyncQueue.enqueueAndForget(async()=>gz(await C0(n),r,i)),i.promise}(Tt(t),e)}function $0(t,e,n){const r=n.docs.get(e._key),i=new Io(t);return new Qr(t,i,e._key,r,new Os(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R3={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=wo(e)}set(e,n,r){this._verifyNotCommitted();const i=wi(e,this._firestore),s=Ep(i.converter,n,r),o=pp(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Ve.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=wi(e,this._firestore);let o;return o=typeof(n=ne(n))=="string"||n instanceof Xi?N0(this._dataReader,"WriteBatch.update",s._key,n,r,i):b0(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Ve.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=wi(e,this._firestore);return this._mutations=this._mutations.concat(new rl(n._key,Ve.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new D(k.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function wi(t,e){if((t=ne(t)).firestore!==e)throw new D(k.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3 extends class{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=wo(e)}get(e){const n=wi(e,this._firestore),r=new E3(this._firestore);return this._transaction.lookup([n._key]).then(i=>{if(!i||i.length!==1)return H();const s=i[0];if(s.isFoundDocument())return new nc(this._firestore,r,s.key,s,n.converter);if(s.isNoDocument())return new nc(this._firestore,r,n._key,null,n.converter);throw H()})}set(e,n,r){const i=wi(e,this._firestore),s=Ep(i.converter,n,r),o=pp(this._dataReader,"Transaction.set",i._key,s,i.converter!==null,r);return this._transaction.set(i._key,o),this}update(e,n,r,...i){const s=wi(e,this._firestore);let o;return o=typeof(n=ne(n))=="string"||n instanceof Xi?N0(this._dataReader,"Transaction.update",s._key,n,r,i):b0(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,o),this}delete(e){const n=wi(e,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=wi(e,this._firestore),r=new Io(this._firestore);return super.get(e).then(i=>new Qr(this._firestore,r,n._key,i._document,new Os(!1,!1),n.converter))}}function P3(t,e,n){t=we(t,Xe);const r=Object.assign(Object.assign({},R3),n);return function(i){if(i.maxAttempts<1)throw new D(k.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,s,o){const a=new Et;return i.asyncQueue.enqueueAndForget(async()=>{const l=await Mz(i);new Lz(i.asyncQueue,l,o,s,a).run()}),a.promise}(Tt(t),i=>e(new O3(t,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L3(){return new Vc("deleteField")}function $3(){return new k0("serverTimestamp")}function M3(...t){return new a3("arrayUnion",t)}function F3(...t){return new l3("arrayRemove",t)}function U3(t){return new u3("increment",t)}(function(t,e=!0){(function(n){el=n})(is),Bi(new Ir("firestore",(n,{instanceIdentifier:r,options:i})=>{const s=n.getProvider("app").getImmediate(),o=new Xe(new Hj(n.getProvider("auth-internal")),new Yj(n.getProvider("app-check-internal")),function(a,l){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new D(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ki(a.options.projectId,l)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),gr(g1,"3.13.0",t),gr(g1,"3.13.0","esm2017")})();const V3="@firebase/firestore-compat",j3="0.3.12";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M0(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new D("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __(){if(typeof Uint8Array>"u")throw new D("unimplemented","Uint8Arrays are not available in this environment.")}function S_(){if(!_B())throw new D("unimplemented","Blobs are unavailable in Firestore in this environment.")}let wA=class Nv{constructor(e){this._delegate=e}static fromBase64String(e){return S_(),new Nv(Tr.fromBase64String(e))}static fromUint8Array(e){return __(),new Nv(Tr.fromUint8Array(e))}toBase64(){return S_(),this._delegate.toBase64()}toUint8Array(){return __(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Av(t){return B3(t,["next","error","complete"])}function B3(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{enableIndexedDbPersistence(e,n){return Yz(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return Xz(e._delegate)}clearIndexedDbPersistence(e){return Jz(e._delegate)}}class EA{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ki||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Jn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){Wz(this._delegate,e,n,r)}enableNetwork(){return e3(this._delegate)}disableNetwork(){return t3(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,JN("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Zz(this._delegate)}onSnapshotsInSync(e){return A3(this._delegate,e)}get app(){if(!this._appCompat)throw new D("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ma(this,eA(this._delegate,e))}catch(n){throw Gt(n,"collection()","Firestore.collection()")}}doc(e){try{return new On(this,Jh(this._delegate,e))}catch(n){throw Gt(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Kt(this,Hz(this._delegate,e))}catch(n){throw Gt(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return P3(this._delegate,n=>e(new IA(this,n)))}batch(){return Tt(this._delegate),new _A(new D3(this._delegate,e=>Bc(this._delegate,e)))}loadBundle(e){return n3(this._delegate,e)}namedQuery(e){return r3(this._delegate,e).then(n=>n?new Kt(this,n):null)}}class Ip extends L0{constructor(e){super(),this.firestore=e}convertBytes(e){return new wA(new Tr(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return On.forKey(n,this.firestore,null)}}function q3(t){Bj(t)}class IA{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Ip(e)}get(e){const n=Ps(e);return this._delegate.get(n).then(r=>new rc(this._firestore,new Qr(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=Ps(e);return r?(M0("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Ps(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Ps(e);return this._delegate.delete(n),this}}class _A{constructor(e){this._delegate=e}set(e,n,r){const i=Ps(e);return r?(M0("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Ps(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Ps(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class lo{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new lu(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ic(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=lo.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new lo(e,new Ip(e),n),i.set(n,s)),s}}lo.INSTANCES=new WeakMap;class On{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Ip(e)}static forPath(e,n,r){if(e.length%2!==0)throw new D("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new On(n,new $e(n._delegate,r,new F(e)))}static forKey(e,n,r){return new On(n,new $e(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ma(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ma(this.firestore,eA(this._delegate,e))}catch(n){throw Gt(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=ne(e),e instanceof $e?tA(this._delegate,e):!1}set(e,n){n=M0("DocumentReference.set",n);try{return n?E_(this._delegate,e,n):E_(this._delegate,e)}catch(r){throw Gt(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?I_(this._delegate,e):I_(this._delegate,e,n,...r)}catch(i){throw Gt(i,"updateDoc()","DocumentReference.update()")}}delete(){return b3(this._delegate)}onSnapshot(...e){const n=SA(e),r=TA(e,i=>new rc(this.firestore,new Qr(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return yA(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=S3(this._delegate):(e==null?void 0:e.source)==="server"?n=T3(this._delegate):n=_3(this._delegate),n.then(r=>new rc(this.firestore,new Qr(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new On(this.firestore,e?this._delegate.withConverter(lo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Gt(t,e,n){return t.message=t.message.replace(e,n),t}function SA(t){for(const e of t)if(typeof e=="object"&&!Av(e))return e;return{}}function TA(t,e){var n,r;let i;return Av(t[0])?i=t[0]:Av(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}class rc{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new On(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return vA(this._delegate,e._delegate)}}class ic extends rc{data(e){const n=this._delegate.data(e);return zj(n!==void 0),n}}class Kt{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Ip(e)}where(e,n,r){try{return new Kt(this.firestore,ci(this._delegate,h3(e,n,r)))}catch(i){throw Gt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Kt(this.firestore,ci(this._delegate,f3(e,n)))}catch(r){throw Gt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Kt(this.firestore,ci(this._delegate,p3(e)))}catch(n){throw Gt(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Kt(this.firestore,ci(this._delegate,m3(e)))}catch(n){throw Gt(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Kt(this.firestore,ci(this._delegate,g3(...e)))}catch(n){throw Gt(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Kt(this.firestore,ci(this._delegate,v3(...e)))}catch(n){throw Gt(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Kt(this.firestore,ci(this._delegate,y3(...e)))}catch(n){throw Gt(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Kt(this.firestore,ci(this._delegate,w3(...e)))}catch(n){throw Gt(n,"endAt()","Query.endAt()")}}isEqual(e){return nA(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=x3(this._delegate):(e==null?void 0:e.source)==="server"?n=k3(this._delegate):n=C3(this._delegate),n.then(r=>new Rv(this.firestore,new Ji(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=SA(e),r=TA(e,i=>new Rv(this.firestore,new Ji(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return yA(this._delegate,n,r)}withConverter(e){return new Kt(this.firestore,e?this._delegate.withConverter(lo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class W3{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new ic(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Rv{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Kt(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ic(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new W3(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new ic(this._firestore,r))})}isEqual(e){return vA(this._delegate,e._delegate)}}class Ma extends Kt{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new On(this.firestore,e):null}doc(e){try{return e===void 0?new On(this.firestore,Jh(this._delegate)):new On(this.firestore,Jh(this._delegate,e))}catch(n){throw Gt(n,"doc()","CollectionReference.doc()")}}add(e){return N3(this._delegate,e).then(n=>new On(this.firestore,n))}isEqual(e){return tA(this._delegate,e._delegate)}withConverter(e){return new Ma(this.firestore,e?this._delegate.withConverter(lo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Ps(t){return we(t,$e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(...e){this._delegate=new Xi(...e)}static documentId(){return new F0(et.keyField().canonicalString())}isEqual(e){return e=ne(e),e instanceof Xi?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e){this._delegate=e}static serverTimestamp(){const e=$3();return e._methodName="FieldValue.serverTimestamp",new xs(e)}static delete(){const e=L3();return e._methodName="FieldValue.delete",new xs(e)}static arrayUnion(...e){const n=M3(...e);return n._methodName="FieldValue.arrayUnion",new xs(n)}static arrayRemove(...e){const n=F3(...e);return n._methodName="FieldValue.arrayRemove",new xs(n)}static increment(e){const n=U3(e);return n._methodName="FieldValue.increment",new xs(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H3={Firestore:EA,GeoPoint:hp,Timestamp:je,Blob:wA,Transaction:IA,WriteBatch:_A,DocumentReference:On,DocumentSnapshot:rc,Query:Kt,QueryDocumentSnapshot:ic,QuerySnapshot:Rv,CollectionReference:Ma,FieldPath:F0,FieldValue:xs,setLogLevel:q3,CACHE_SIZE_UNLIMITED:Qz};function K3(t,e){t.INTERNAL.registerComponent(new Ir("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},H3)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G3(t){K3(t,(e,n)=>new EA(e,n,new z3)),t.registerVersion(V3,j3)}G3(qt);const CA={apiKey:"AIzaSyCNXp_vGHdkHfmQ1bp9ZIWX9klylv07Dh8",authDomain:"dr2023-1544a.firebaseapp.com",projectId:"dr2023-1544a",storageBucket:"dr2023-1544a.appspot.com",messagingSenderId:"845031493250",appId:"1:845031493250:web:cfe70c377751e61db96e9b"};console.log("🚀 ~ file: firebase.js:14 ~ firebaseConfig:",CA);qt.initializeApp(CA);async function Q3(t){return console.log(t),await qt.firestore().collection("productos").get()}async function xA(t){return await qt.firestore().doc(`productos/${t}`).get()}async function Y3(t){return await qt.firestore().collection("productos").add(t)}async function X3(t,e){return await qt.firestore().doc(`productos/${t}`).set(e)}async function J3(t){return await qt.firestore().doc(`productos/${t}`).delete()}function Z3(){const[t,e]=v.useState([]),[n,r]=v.useState(!0),[i,s]=v.useState("ipod");return v.useEffect(()=>{(async()=>{try{const l=await Q3(i);e(l.docs),r(!1)}catch(l){console.log("Error",l)}})()},[i]),{productos:t,loading:n,buscar:i,handleBuscar:a=>{var l;s((l=a==null?void 0:a.target)==null?void 0:l.value)}}}function e9(){const{productos:t,loading:e,buscar:n,handleBuscar:r}=Z3(),i="Listado productos";return e?E.jsx("div",{children:"Cargando..."}):E.jsxs("div",{children:[E.jsx("input",{value:n,onChange:r}),E.jsx("h1",{children:i}),E.jsx(t$,{children:t.map(s=>E.jsx(e$,{...s.data(),id:s.id},s.id))})]})}const t9="_title_19d1t_1",n9={title:t9};function r9(){return console.log(qt),E.jsxs("div",{className:"",children:[E.jsx("h1",{className:n9.title,children:"Test"}),E.jsx(e9,{})]})}var T_={exports:{}},Dv={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(r){function i(o,a,l,u,c,d){var h=u||"<<anonymous>>",f=d||l;if(a[l]==null)return o?new Error("Required "+c+" `"+f+"` was not specified "+("in `"+h+"`.")):null;for(var m=arguments.length,w=Array(m>6?m-6:0),I=6;I<m;I++)w[I-6]=arguments[I];return r.apply(void 0,[a,l,h,c,f].concat(w))}var s=i.bind(null,!1);return s.isRequired=i.bind(null,!0),s}t.exports=e.default})(Dv,Dv.exports);var i9=Dv.exports;(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var n=i9,r=i(n);function i(o){return o&&o.__esModule?o:{default:o}}function s(){for(var o=arguments.length,a=Array(o),l=0;l<o;l++)a[l]=arguments[l];function u(){for(var c=arguments.length,d=Array(c),h=0;h<c;h++)d[h]=arguments[h];var f=null;return a.forEach(function(m){if(f==null){var w=m.apply(void 0,d);w!=null&&(f=w)}}),f}return(0,r.default)(u)}t.exports=e.default})(T_,T_.exports);function Ov(){return Ov=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ov.apply(this,arguments)}function kA(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function C_(t){return"default"+t.charAt(0).toUpperCase()+t.substr(1)}function s9(t){var e=o9(t,"string");return typeof e=="symbol"?e:String(e)}function o9(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function a9(t,e,n){var r=v.useRef(t!==void 0),i=v.useState(e),s=i[0],o=i[1],a=t!==void 0,l=r.current;return r.current=a,!a&&l&&s!==e&&o(e),[a?t:s,v.useCallback(function(u){for(var c=arguments.length,d=new Array(c>1?c-1:0),h=1;h<c;h++)d[h-1]=arguments[h];n&&n.apply(void 0,[u].concat(d)),o(u)},[n])]}function _p(t,e){return Object.keys(e).reduce(function(n,r){var i,s=n,o=s[C_(r)],a=s[r],l=kA(s,[C_(r),r].map(s9)),u=e[r],c=a9(a,o,t[u]),d=c[0],h=c[1];return Ov({},l,(i={},i[r]=d,i[u]=h,i))},t)}function Pv(t,e){return Pv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Pv(t,e)}function l9(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Pv(t,e)}var u9=Function.prototype.bind.call(Function.prototype.call,[].slice);function Ar(t,e){return u9(t.querySelectorAll(e))}function bA(){var t=v.useReducer(function(n){return!n},!1),e=t[1];return e}var x_=function(e){return!e||typeof e=="function"?e:function(n){e.current=n}};function c9(t,e){var n=x_(t),r=x_(e);return function(i){n&&n(i),r&&r(i)}}function ll(t,e){return v.useMemo(function(){return c9(t,e)},[t,e])}const NA=v.createContext(null);NA.displayName="NavContext";const U0=NA,d9=v.createContext(null),sc=(t,e=null)=>t!=null?String(t):e||null,uo=d9,h9=v.createContext(null),AA=h9,f9="data-rr-ui-",p9="rrUi";function ul(t){return`${f9}${t}`}function m9(t){return`${p9}${t}`}function g9(t){var e=v.useRef(t);return v.useEffect(function(){e.current=t},[t]),e}function tt(t){var e=g9(t);return v.useCallback(function(){return e.current&&e.current.apply(e,arguments)},[e])}const v9=["as","active","eventKey"];function y9(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function RA({key:t,onClick:e,active:n,id:r,role:i,disabled:s}){const o=v.useContext(uo),a=v.useContext(U0),l=v.useContext(AA);let u=n;const c={role:i};if(a){!i&&a.role==="tablist"&&(c.role="tab");const d=a.getControllerId(t??null),h=a.getControlledId(t??null);c[ul("event-key")]=t,c.id=d||r,u=n==null&&t!=null?a.activeKey===t:n,(u||!(l!=null&&l.unmountOnExit)&&!(l!=null&&l.mountOnEnter))&&(c["aria-controls"]=h)}return c.role==="tab"&&(c["aria-selected"]=u,u||(c.tabIndex=-1),s&&(c.tabIndex=-1,c["aria-disabled"]=!0)),c.onClick=tt(d=>{s||(e==null||e(d),t!=null&&o&&!d.isPropagationStopped()&&o(t,d))}),[c,{isActive:u}]}const DA=v.forwardRef((t,e)=>{let{as:n=jy,active:r,eventKey:i}=t,s=y9(t,v9);const[o,a]=RA(Object.assign({key:sc(i,s.href),active:r},s));return o[ul("active")]=a.isActive,E.jsx(n,Object.assign({},s,o,{ref:e}))});DA.displayName="NavItem";const w9=DA,E9=["as","onSelect","activeKey","role","onKeyDown"];function I9(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}const k_=()=>{},b_=ul("event-key"),OA=v.forwardRef((t,e)=>{let{as:n="div",onSelect:r,activeKey:i,role:s,onKeyDown:o}=t,a=I9(t,E9);const l=bA(),u=v.useRef(!1),c=v.useContext(uo),d=v.useContext(AA);let h,f;d&&(s=s||"tablist",i=d.activeKey,h=d.getControlledId,f=d.getControllerId);const m=v.useRef(null),w=g=>{const _=m.current;if(!_)return null;const T=Ar(_,`[${b_}]:not([aria-disabled=true])`),C=_.querySelector("[aria-selected=true]");if(!C||C!==document.activeElement)return null;const b=T.indexOf(C);if(b===-1)return null;let A=b+g;return A>=T.length&&(A=0),A<0&&(A=T.length-1),T[A]},I=(g,_)=>{g!=null&&(r==null||r(g,_),c==null||c(g,_))},y=g=>{if(o==null||o(g),!d)return;let _;switch(g.key){case"ArrowLeft":case"ArrowUp":_=w(-1);break;case"ArrowRight":case"ArrowDown":_=w(1);break;default:return}_&&(g.preventDefault(),I(_.dataset[m9("EventKey")]||null,g),u.current=!0,l())};v.useEffect(()=>{if(m.current&&u.current){const g=m.current.querySelector(`[${b_}][aria-selected=true]`);g==null||g.focus()}u.current=!1});const p=ll(e,m);return E.jsx(uo.Provider,{value:I,children:E.jsx(U0.Provider,{value:{role:s,activeKey:sc(i),getControlledId:h||k_,getControllerId:f||k_},children:E.jsx(n,Object.assign({},a,{onKeyDown:y,ref:p,role:s}))})})});OA.displayName="Nav";const _9=Object.assign(OA,{Item:w9}),PA=v.createContext(null);PA.displayName="NavbarContext";const _o=PA,S9=$t("nav-item");function T9(){return v.useState(null)}function C9(t,e,n,r){r===void 0&&(r=!1);var i=tt(n);v.useEffect(function(){var s=typeof t=="function"?t():t;return s.addEventListener(e,i,r),function(){return s.removeEventListener(e,i,r)}},[t])}function LA(){var t=v.useRef(!0),e=v.useRef(function(){return t.current});return v.useEffect(function(){return t.current=!0,function(){t.current=!1}},[]),e.current}function $A(t){var e=v.useRef(null);return v.useEffect(function(){e.current=t}),e.current}var x9=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",k9=typeof document<"u";const ef=k9||x9?v.useLayoutEffect:v.useEffect,b9=["onKeyDown"];function N9(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function A9(t){return!t||t.trim()==="#"}const MA=v.forwardRef((t,e)=>{let{onKeyDown:n}=t,r=N9(t,b9);const[i]=Vy(Object.assign({tagName:"a"},r)),s=tt(o=>{i.onKeyDown(o),n==null||n(o)});return A9(r.href)||r.role==="button"?E.jsx("a",Object.assign({ref:e},r,i,{onKeyDown:s})):E.jsx("a",Object.assign({ref:e},r,{onKeyDown:n}))});MA.displayName="Anchor";const V0=MA,FA=v.forwardRef(({bsPrefix:t,className:e,as:n=V0,active:r,eventKey:i,disabled:s=!1,...o},a)=>{t=ve(t,"nav-link");const[l,u]=RA({key:sc(i,o.href),active:r,disabled:s,...o});return E.jsx(n,{...o,...l,ref:a,disabled:s,className:le(e,t,s&&"disabled",u.isActive&&"active")})});FA.displayName="NavLink";const UA=FA,VA=v.forwardRef((t,e)=>{const{as:n="div",bsPrefix:r,variant:i,fill:s=!1,justify:o=!1,navbar:a,navbarScroll:l,className:u,activeKey:c,...d}=_p(t,{activeKey:"onSelect"}),h=ve(r,"nav");let f,m,w=!1;const I=v.useContext(_o),y=v.useContext(MC);return I?(f=I.bsPrefix,w=a??!0):y&&({cardHeaderBsPrefix:m}=y),E.jsx(_9,{as:n,ref:e,activeKey:c,className:le(u,{[h]:!w,[`${f}-nav`]:w,[`${f}-nav-scroll`]:w&&l,[`${m}-${i}`]:!!m,[`${h}-${i}`]:!!i,[`${h}-fill`]:s,[`${h}-justified`]:o}),...d})});VA.displayName="Nav";const Ro=Object.assign(VA,{Item:S9,Link:UA}),jA=v.forwardRef(({bsPrefix:t,className:e,as:n,...r},i)=>{t=ve(t,"navbar-brand");const s=n||(r.href?"a":"span");return E.jsx(s,{...r,ref:i,className:le(e,t)})});jA.displayName="NavbarBrand";const R9=jA;function Sp(t){return t&&t.ownerDocument||document}function D9(t){var e=Sp(t);return e&&e.defaultView||window}function O9(t,e){return D9(t).getComputedStyle(t,e)}var P9=/([A-Z])/g;function L9(t){return t.replace(P9,"-$1").toLowerCase()}var $9=/^ms-/;function Cd(t){return L9(t).replace($9,"-ms-")}var M9=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function F9(t){return!!(t&&M9.test(t))}function jr(t,e){var n="",r="";if(typeof e=="string")return t.style.getPropertyValue(Cd(e))||O9(t).getPropertyValue(Cd(e));Object.keys(e).forEach(function(i){var s=e[i];!s&&s!==0?t.style.removeProperty(Cd(i)):F9(i)?r+=i+"("+s+") ":n+=Cd(i)+": "+s+";"}),r&&(n+="transform: "+r+";"),t.style.cssText+=";"+n}var BA={exports:{}},U9="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",V9=U9,j9=V9;function zA(){}function qA(){}qA.resetWarningCache=zA;var B9=function(){function t(r,i,s,o,a,l){if(l!==j9){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:qA,resetWarningCache:zA};return n.PropTypes=n,n};BA.exports=B9();var z9=BA.exports;const Br=uc(z9),N_={disabled:!1},WA=Oe.createContext(null);var q9=function(e){return e.scrollTop},zl="unmounted",mi="exited",qn="entering",Rr="entered",oc="exiting",ii=function(t){l9(e,t);function e(r,i){var s;s=t.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,l;return s.appearStatus=null,r.in?a?(l=mi,s.appearStatus=qn):l=Rr:r.unmountOnExit||r.mountOnEnter?l=zl:l=mi,s.state={status:l},s.nextCallback=null,s}e.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===zl?{status:mi}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==qn&&o!==Rr&&(s=qn):(o===qn||o===Rr)&&(s=oc)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===qn){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:Yo.findDOMNode(this);o&&q9(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===mi&&this.setState({status:zl})},n.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,l=this.props.nodeRef?[a]:[Yo.findDOMNode(this),a],u=l[0],c=l[1],d=this.getTimeouts(),h=a?d.appear:d.enter;if(!i&&!o||N_.disabled){this.safeSetState({status:Rr},function(){s.props.onEntered(u)});return}this.props.onEnter(u,c),this.safeSetState({status:qn},function(){s.props.onEntering(u,c),s.onTransitionEnd(h,function(){s.safeSetState({status:Rr},function(){s.props.onEntered(u,c)})})})},n.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:Yo.findDOMNode(this);if(!s||N_.disabled){this.safeSetState({status:mi},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:oc},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:mi},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:Yo.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],u=l[0],c=l[1];this.props.addEndListener(u,c)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===zl)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=kA(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Oe.createElement(WA.Provider,{value:null},typeof o=="function"?o(i,a):Oe.cloneElement(Oe.Children.only(o),a))},e}(Oe.Component);ii.contextType=WA;ii.propTypes={};function Do(){}ii.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Do,onEntering:Do,onEntered:Do,onExit:Do,onExiting:Do,onExited:Do};ii.UNMOUNTED=zl;ii.EXITED=mi;ii.ENTERING=qn;ii.ENTERED=Rr;ii.EXITING=oc;const W9=ii,Tp=!!(typeof window<"u"&&window.document&&window.document.createElement);var Lv=!1,$v=!1;try{var bm={get passive(){return Lv=!0},get once(){return $v=Lv=!0}};Tp&&(window.addEventListener("test",bm,bm),window.removeEventListener("test",bm,!0))}catch{}function HA(t,e,n,r){if(r&&typeof r!="boolean"&&!$v){var i=r.once,s=r.capture,o=n;!$v&&i&&(o=n.__once||function a(l){this.removeEventListener(e,a,s),n.call(this,l)},n.__once=o),t.addEventListener(e,o,Lv?r:s)}t.addEventListener(e,n,r)}function H9(t,e,n,r){var i=r&&typeof r!="boolean"?r.capture:r;t.removeEventListener(e,n,i),n.__once&&t.removeEventListener(e,n.__once,i)}function Ci(t,e,n,r){return HA(t,e,n,r),function(){H9(t,e,n,r)}}function K9(t,e,n,r){if(n===void 0&&(n=!1),r===void 0&&(r=!0),t){var i=document.createEvent("HTMLEvents");i.initEvent(e,n,r),t.dispatchEvent(i)}}function G9(t){var e=jr(t,"transitionDuration")||"",n=e.indexOf("ms")===-1?1e3:1;return parseFloat(e)*n}function Q9(t,e,n){n===void 0&&(n=5);var r=!1,i=setTimeout(function(){r||K9(t,"transitionend",!0)},e+n),s=Ci(t,"transitionend",function(){r=!0},{once:!0});return function(){clearTimeout(i),s()}}function Y9(t,e,n,r){n==null&&(n=G9(t)||0);var i=Q9(t,n,r),s=Ci(t,"transitionend",e);return function(){i(),s()}}function A_(t,e){const n=jr(t,e)||"",r=n.indexOf("ms")===-1?1e3:1;return parseFloat(n)*r}function j0(t,e){const n=A_(t,"transitionDuration"),r=A_(t,"transitionDelay"),i=Y9(t,s=>{s.target===t&&(i(),e(s))},n+r)}function Nl(...t){return t.filter(e=>e!=null).reduce((e,n)=>{if(typeof n!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return e===null?n:function(...i){e.apply(this,i),n.apply(this,i)}},null)}function KA(t){t.offsetHeight}function X9(t){return t&&"setState"in t?Yo.findDOMNode(t):t??null}const J9=Oe.forwardRef(({onEnter:t,onEntering:e,onEntered:n,onExit:r,onExiting:i,onExited:s,addEndListener:o,children:a,childRef:l,...u},c)=>{const d=v.useRef(null),h=ll(d,l),f=C=>{h(X9(C))},m=C=>b=>{C&&d.current&&C(d.current,b)},w=v.useCallback(m(t),[t]),I=v.useCallback(m(e),[e]),y=v.useCallback(m(n),[n]),p=v.useCallback(m(r),[r]),g=v.useCallback(m(i),[i]),_=v.useCallback(m(s),[s]),T=v.useCallback(m(o),[o]);return E.jsx(W9,{ref:c,...u,onEnter:w,onEntered:y,onEntering:I,onExit:p,onExited:_,onExiting:g,addEndListener:T,nodeRef:d,children:typeof a=="function"?(C,b)=>a(C,{...b,ref:f}):Oe.cloneElement(a,{ref:f})})}),B0=J9,Z9={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function e6(t,e){const n=`offset${t[0].toUpperCase()}${t.slice(1)}`,r=e[n],i=Z9[t];return r+parseInt(jr(e,i[0]),10)+parseInt(jr(e,i[1]),10)}const t6={[mi]:"collapse",[oc]:"collapsing",[qn]:"collapsing",[Rr]:"collapse show"},n6=Oe.forwardRef(({onEnter:t,onEntering:e,onEntered:n,onExit:r,onExiting:i,className:s,children:o,dimension:a="height",in:l=!1,timeout:u=300,mountOnEnter:c=!1,unmountOnExit:d=!1,appear:h=!1,getDimensionValue:f=e6,...m},w)=>{const I=typeof a=="function"?a():a,y=v.useMemo(()=>Nl(C=>{C.style[I]="0"},t),[I,t]),p=v.useMemo(()=>Nl(C=>{const b=`scroll${I[0].toUpperCase()}${I.slice(1)}`;C.style[I]=`${C[b]}px`},e),[I,e]),g=v.useMemo(()=>Nl(C=>{C.style[I]=null},n),[I,n]),_=v.useMemo(()=>Nl(C=>{C.style[I]=`${f(I,C)}px`,KA(C)},r),[r,f,I]),T=v.useMemo(()=>Nl(C=>{C.style[I]=null},i),[I,i]);return E.jsx(B0,{ref:w,addEndListener:j0,...m,"aria-expanded":m.role?l:null,onEnter:y,onEntering:p,onEntered:g,onExit:_,onExiting:T,childRef:o.ref,in:l,timeout:u,mountOnEnter:c,unmountOnExit:d,appear:h,children:(C,b)=>Oe.cloneElement(o,{...b,className:le(s,o.props.className,t6[C],I==="width"&&"collapse-horizontal")})})}),r6=n6,GA=v.forwardRef(({children:t,bsPrefix:e,...n},r)=>{e=ve(e,"navbar-collapse");const i=v.useContext(_o);return E.jsx(r6,{in:!!(i&&i.expanded),...n,children:E.jsx("div",{ref:r,className:e,children:t})})});GA.displayName="NavbarCollapse";const i6=GA,QA=v.forwardRef(({bsPrefix:t,className:e,children:n,label:r="Toggle navigation",as:i="button",onClick:s,...o},a)=>{t=ve(t,"navbar-toggler");const{onToggle:l,expanded:u}=v.useContext(_o)||{},c=tt(d=>{s&&s(d),l&&l()});return i==="button"&&(o.type="button"),E.jsx(i,{...o,ref:a,onClick:c,"aria-label":r,className:le(e,t,!u&&"collapsed"),children:n||E.jsx("span",{className:`${t}-icon`})})});QA.displayName="NavbarToggle";const s6=QA;var Mv=new WeakMap,R_=function(e,n){if(!(!e||!n)){var r=Mv.get(n)||new Map;Mv.set(n,r);var i=r.get(e);return i||(i=n.matchMedia(e),i.refCount=0,r.set(i.media,i)),i}};function o6(t,e){e===void 0&&(e=typeof window>"u"?void 0:window);var n=R_(t,e),r=v.useState(function(){return n?n.matches:!1}),i=r[0],s=r[1];return ef(function(){var o=R_(t,e);if(!o)return s(!1);var a=Mv.get(e),l=function(){s(o.matches)};return o.refCount++,o.addListener(l),l(),function(){o.removeListener(l),o.refCount--,o.refCount<=0&&(a==null||a.delete(o.media)),o=void 0}},[t]),i}function a6(t){var e=Object.keys(t);function n(a,l){return a===l?l:a?a+" and "+l:l}function r(a){return e[Math.min(e.indexOf(a)+1,e.length-1)]}function i(a){var l=r(a),u=t[l];return typeof u=="number"?u=u-.2+"px":u="calc("+u+" - 0.2px)","(max-width: "+u+")"}function s(a){var l=t[a];return typeof l=="number"&&(l=l+"px"),"(min-width: "+l+")"}function o(a,l,u){var c;if(typeof a=="object")c=a,u=l,l=!0;else{var d;l=l||!0,c=(d={},d[a]=l,d)}var h=v.useMemo(function(){return Object.entries(c).reduce(function(f,m){var w=m[0],I=m[1];return(I==="up"||I===!0)&&(f=n(f,s(w))),(I==="down"||I===!0)&&(f=n(f,i(w))),f},"")},[JSON.stringify(c)]);return o6(h,u)}return o}var l6=a6({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400});function Nm(t){t===void 0&&(t=Sp());try{var e=t.activeElement;return!e||!e.nodeName?null:e}catch{return t.body}}function tf(t,e){if(t.contains)return t.contains(e);if(t.compareDocumentPosition)return t===e||!!(t.compareDocumentPosition(e)&16)}function u6(t){var e=v.useRef(t);return e.current=t,e}function c6(t){var e=u6(t);v.useEffect(function(){return function(){return e.current()}},[])}function d6(t=document){const e=t.defaultView;return Math.abs(e.innerWidth-t.documentElement.clientWidth)}const D_=ul("modal-open");class h6{constructor({ownerDocument:e,handleContainerOverflow:n=!0,isRTL:r=!1}={}){this.handleContainerOverflow=n,this.isRTL=r,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return d6(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const n={overflow:"hidden"},r=this.isRTL?"paddingLeft":"paddingRight",i=this.getElement();e.style={overflow:i.style.overflow,[r]:i.style[r]},e.scrollBarWidth&&(n[r]=`${parseInt(jr(i,r)||"0",10)+e.scrollBarWidth}px`),i.setAttribute(D_,""),jr(i,n)}reset(){[...this.modals].forEach(e=>this.remove(e))}removeContainerStyle(e){const n=this.getElement();n.removeAttribute(D_),Object.assign(n.style,e.style)}add(e){let n=this.modals.indexOf(e);return n!==-1||(n=this.modals.length,this.modals.push(e),this.setModalAttributes(e),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(e){const n=this.modals.indexOf(e);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}const z0=h6,YA=v.createContext(Tp?window:void 0);YA.Provider;function Cp(){return v.useContext(YA)}const Am=(t,e)=>Tp?t==null?(e||Sp()).body:(typeof t=="function"&&(t=t()),t&&"current"in t&&(t=t.current),t&&("nodeType"in t||t.getBoundingClientRect)?t:null):null;function f6(t,e){const n=Cp(),[r,i]=v.useState(()=>Am(t,n==null?void 0:n.document));if(!r){const s=Am(t);s&&i(s)}return v.useEffect(()=>{e&&r&&e(r)},[e,r]),v.useEffect(()=>{const s=Am(t);s!==r&&i(s)},[t,r]),r}function p6({children:t,in:e,onExited:n,mountOnEnter:r,unmountOnExit:i}){const s=v.useRef(null),o=v.useRef(e),a=tt(n);v.useEffect(()=>{e?o.current=!0:a(s.current)},[e,a]);const l=ll(s,t.ref),u=v.cloneElement(t,{ref:l});return e?u:i||!o.current&&r?null:u}function m6({in:t,onTransition:e}){const n=v.useRef(null),r=v.useRef(!0),i=tt(e);return ef(()=>{if(!n.current)return;let s=!1;return i({in:t,element:n.current,initial:r.current,isStale:()=>s}),()=>{s=!0}},[t,i]),ef(()=>(r.current=!1,()=>{r.current=!0}),[]),n}function g6({children:t,in:e,onExited:n,onEntered:r,transition:i}){const[s,o]=v.useState(!e);e&&s&&o(!1);const a=m6({in:!!e,onTransition:u=>{const c=()=>{u.isStale()||(u.in?r==null||r(u.element,u.initial):(o(!0),n==null||n(u.element)))};Promise.resolve(i(u)).then(c,d=>{throw u.in||o(!0),d})}}),l=ll(a,t.ref);return s&&!e?null:v.cloneElement(t,{ref:l})}function O_(t,e,n){return t?E.jsx(t,Object.assign({},n)):e?E.jsx(g6,Object.assign({},n,{transition:e})):E.jsx(p6,Object.assign({},n))}function v6(t){return t.code==="Escape"||t.keyCode===27}const y6=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function w6(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}let Rm;function E6(t){return Rm||(Rm=new z0({ownerDocument:t==null?void 0:t.document})),Rm}function I6(t){const e=Cp(),n=t||E6(e),r=v.useRef({dialog:null,backdrop:null});return Object.assign(r.current,{add:()=>n.add(r.current),remove:()=>n.remove(r.current),isTopModal:()=>n.isTopModal(r.current),setDialogRef:v.useCallback(i=>{r.current.dialog=i},[]),setBackdropRef:v.useCallback(i=>{r.current.backdrop=i},[])})}const XA=v.forwardRef((t,e)=>{let{show:n=!1,role:r="dialog",className:i,style:s,children:o,backdrop:a=!0,keyboard:l=!0,onBackdropClick:u,onEscapeKeyDown:c,transition:d,runTransition:h,backdropTransition:f,runBackdropTransition:m,autoFocus:w=!0,enforceFocus:I=!0,restoreFocus:y=!0,restoreFocusOptions:p,renderDialog:g,renderBackdrop:_=Me=>E.jsx("div",Object.assign({},Me)),manager:T,container:C,onShow:b,onHide:A=()=>{},onExit:W,onExited:j,onExiting:Q,onEnter:q,onEntering:U,onEntered:re}=t,ue=w6(t,y6);const oe=Cp(),de=f6(C),P=I6(T),Y=LA(),G=$A(n),[ce,Ee]=v.useState(!n),mt=v.useRef(null);v.useImperativeHandle(e,()=>P,[P]),Tp&&!G&&n&&(mt.current=Nm(oe==null?void 0:oe.document)),n&&ce&&Ee(!1);const Be=tt(()=>{if(P.add(),fs.current=Ci(document,"keydown",kn),Zn.current=Ci(document,"focus",()=>setTimeout(ze),!0),b&&b(),w){var Me,S;const N=Nm((Me=(S=P.dialog)==null?void 0:S.ownerDocument)!=null?Me:oe==null?void 0:oe.document);P.dialog&&N&&!tf(P.dialog,N)&&(mt.current=N,P.dialog.focus())}}),Ie=tt(()=>{if(P.remove(),fs.current==null||fs.current(),Zn.current==null||Zn.current(),y){var Me;(Me=mt.current)==null||Me.focus==null||Me.focus(p),mt.current=null}});v.useEffect(()=>{!n||!de||Be()},[n,de,Be]),v.useEffect(()=>{ce&&Ie()},[ce,Ie]),c6(()=>{Ie()});const ze=tt(()=>{if(!I||!Y()||!P.isTopModal())return;const Me=Nm(oe==null?void 0:oe.document);P.dialog&&Me&&!tf(P.dialog,Me)&&P.dialog.focus()}),Wt=tt(Me=>{Me.target===Me.currentTarget&&(u==null||u(Me),a===!0&&A())}),kn=tt(Me=>{l&&v6(Me)&&P.isTopModal()&&(c==null||c(Me),Me.defaultPrevented||A())}),Zn=v.useRef(),fs=v.useRef(),si=(...Me)=>{Ee(!0),j==null||j(...Me)};if(!de)return null;const ps=Object.assign({role:r,ref:P.setDialogRef,"aria-modal":r==="dialog"?!0:void 0},ue,{style:s,className:i,tabIndex:-1});let ms=g?g(ps):E.jsx("div",Object.assign({},ps,{children:v.cloneElement(o,{role:"document"})}));ms=O_(d,h,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:W,onExiting:Q,onExited:si,onEnter:q,onEntering:U,onEntered:re,children:ms});let gs=null;return a&&(gs=_({ref:P.setBackdropRef,onClick:Wt}),gs=O_(f,m,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:gs})),E.jsx(E.Fragment,{children:Yo.createPortal(E.jsxs(E.Fragment,{children:[gs,ms]}),de)})});XA.displayName="Modal";const _6=Object.assign(XA,{Manager:z0}),S6={[qn]:"show",[Rr]:"show"},JA=v.forwardRef(({className:t,children:e,transitionClasses:n={},onEnter:r,...i},s)=>{const o={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...i},a=v.useCallback((l,u)=>{KA(l),r==null||r(l,u)},[r]);return E.jsx(B0,{ref:s,addEndListener:j0,...o,onEnter:a,childRef:e.ref,children:(l,u)=>v.cloneElement(e,{...u,className:le("fade",t,e.props.className,S6[l],n[l])})})});JA.displayName="Fade";const Fv=JA,T6=$t("offcanvas-body"),C6={[qn]:"show",[Rr]:"show"},ZA=v.forwardRef(({bsPrefix:t,className:e,children:n,in:r=!1,mountOnEnter:i=!1,unmountOnExit:s=!1,appear:o=!1,...a},l)=>(t=ve(t,"offcanvas"),E.jsx(B0,{ref:l,addEndListener:j0,in:r,mountOnEnter:i,unmountOnExit:s,appear:o,...a,childRef:n.ref,children:(u,c)=>v.cloneElement(n,{...c,className:le(e,n.props.className,(u===qn||u===oc)&&`${t}-toggling`,C6[u])})})));ZA.displayName="OffcanvasToggling";const x6=ZA,k6=v.createContext({onHide(){}}),eR=k6,b6={"aria-label":Br.string,onClick:Br.func,variant:Br.oneOf(["white"])},q0=v.forwardRef(({className:t,variant:e,"aria-label":n="Close",...r},i)=>E.jsx("button",{ref:i,type:"button",className:le("btn-close",e&&`btn-close-${e}`,t),"aria-label":n,...r}));q0.displayName="CloseButton";q0.propTypes=b6;const tR=q0,N6=v.forwardRef(({closeLabel:t="Close",closeVariant:e,closeButton:n=!1,onHide:r,children:i,...s},o)=>{const a=v.useContext(eR),l=tt(()=>{a==null||a.onHide(),r==null||r()});return E.jsxs("div",{ref:o,...s,children:[i,n&&E.jsx(tR,{"aria-label":t,variant:e,onClick:l})]})}),A6=N6,nR=v.forwardRef(({bsPrefix:t,className:e,closeLabel:n="Close",closeButton:r=!1,...i},s)=>(t=ve(t,"offcanvas-header"),E.jsx(A6,{ref:s,...i,className:le(e,t),closeLabel:n,closeButton:r})));nR.displayName="OffcanvasHeader";const R6=nR,D6=bf("h5"),O6=$t("offcanvas-title",{Component:D6});function P6(t,e){return t.classList?!!e&&t.classList.contains(e):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")!==-1}function L6(t,e){t.classList?t.classList.add(e):P6(t,e)||(typeof t.className=="string"?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))}function P_(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function $6(t,e){t.classList?t.classList.remove(e):typeof t.className=="string"?t.className=P_(t.className,e):t.setAttribute("class",P_(t.className&&t.className.baseVal||"",e))}const Oo={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class rR extends z0{adjustAndStore(e,n,r){const i=n.style[e];n.dataset[e]=i,jr(n,{[e]:`${parseFloat(jr(n,e))+r}px`})}restore(e,n){const r=n.dataset[e];r!==void 0&&(delete n.dataset[e],jr(n,{[e]:r}))}setContainerStyle(e){super.setContainerStyle(e);const n=this.getElement();if(L6(n,"modal-open"),!e.scrollBarWidth)return;const r=this.isRTL?"paddingLeft":"paddingRight",i=this.isRTL?"marginLeft":"marginRight";Ar(n,Oo.FIXED_CONTENT).forEach(s=>this.adjustAndStore(r,s,e.scrollBarWidth)),Ar(n,Oo.STICKY_CONTENT).forEach(s=>this.adjustAndStore(i,s,-e.scrollBarWidth)),Ar(n,Oo.NAVBAR_TOGGLER).forEach(s=>this.adjustAndStore(i,s,e.scrollBarWidth))}removeContainerStyle(e){super.removeContainerStyle(e);const n=this.getElement();$6(n,"modal-open");const r=this.isRTL?"paddingLeft":"paddingRight",i=this.isRTL?"marginLeft":"marginRight";Ar(n,Oo.FIXED_CONTENT).forEach(s=>this.restore(r,s)),Ar(n,Oo.STICKY_CONTENT).forEach(s=>this.restore(i,s)),Ar(n,Oo.NAVBAR_TOGGLER).forEach(s=>this.restore(i,s))}}let Dm;function M6(t){return Dm||(Dm=new rR(t)),Dm}const F6=rR;function U6(t){return E.jsx(x6,{...t})}function V6(t){return E.jsx(Fv,{...t})}const iR=v.forwardRef(({bsPrefix:t,className:e,children:n,"aria-labelledby":r,placement:i="start",responsive:s,show:o=!1,backdrop:a=!0,keyboard:l=!0,scroll:u=!1,onEscapeKeyDown:c,onShow:d,onHide:h,container:f,autoFocus:m=!0,enforceFocus:w=!0,restoreFocus:I=!0,restoreFocusOptions:y,onEntered:p,onExit:g,onExiting:_,onEnter:T,onEntering:C,onExited:b,backdropClassName:A,manager:W,renderStaticNode:j=!1,...Q},q)=>{const U=v.useRef();t=ve(t,"offcanvas");const{onToggle:re}=v.useContext(_o)||{},[ue,oe]=v.useState(!1),de=l6(s||"xs","up");v.useEffect(()=>{oe(s?o&&!de:o)},[o,s,de]);const P=tt(()=>{re==null||re(),h==null||h()}),Y=v.useMemo(()=>({onHide:P}),[P]);function G(){return W||(u?(U.current||(U.current=new F6({handleContainerOverflow:!1})),U.current):M6())}const ce=(Ie,...ze)=>{Ie&&(Ie.style.visibility="visible"),T==null||T(Ie,...ze)},Ee=(Ie,...ze)=>{Ie&&(Ie.style.visibility=""),b==null||b(...ze)},mt=v.useCallback(Ie=>E.jsx("div",{...Ie,className:le(`${t}-backdrop`,A)}),[A,t]),Be=Ie=>E.jsx("div",{...Ie,...Q,className:le(e,s?`${t}-${s}`:t,`${t}-${i}`),"aria-labelledby":r,children:n});return E.jsxs(E.Fragment,{children:[!ue&&(s||j)&&Be({}),E.jsx(eR.Provider,{value:Y,children:E.jsx(_6,{show:ue,ref:q,backdrop:a,container:f,keyboard:l,autoFocus:m,enforceFocus:w&&!u,restoreFocus:I,restoreFocusOptions:y,onEscapeKeyDown:c,onShow:d,onHide:P,onEnter:ce,onEntering:C,onEntered:p,onExit:g,onExiting:_,onExited:Ee,manager:G(),transition:U6,backdropTransition:V6,renderBackdrop:mt,renderDialog:Be})})]})});iR.displayName="Offcanvas";const j6=Object.assign(iR,{Body:T6,Header:R6,Title:O6}),sR=v.forwardRef((t,e)=>{const n=v.useContext(_o);return E.jsx(j6,{ref:e,show:!!(n!=null&&n.expanded),...t,renderStaticNode:!0})});sR.displayName="NavbarOffcanvas";const B6=sR,z6=$t("navbar-text",{Component:"span"}),oR=v.forwardRef((t,e)=>{const{bsPrefix:n,expand:r=!0,variant:i="light",bg:s,fixed:o,sticky:a,className:l,as:u="nav",expanded:c,onToggle:d,onSelect:h,collapseOnSelect:f=!1,...m}=_p(t,{expanded:"onToggle"}),w=ve(n,"navbar"),I=v.useCallback((...g)=>{h==null||h(...g),f&&c&&(d==null||d(!1))},[h,f,c,d]);m.role===void 0&&u!=="nav"&&(m.role="navigation");let y=`${w}-expand`;typeof r=="string"&&(y=`${y}-${r}`);const p=v.useMemo(()=>({onToggle:()=>d==null?void 0:d(!c),bsPrefix:w,expanded:!!c,expand:r}),[w,c,r,d]);return E.jsx(_o.Provider,{value:p,children:E.jsx(uo.Provider,{value:I,children:E.jsx(u,{ref:e,...m,className:le(l,w,r&&y,i&&`${w}-${i}`,s&&`bg-${s}`,a&&`sticky-${a}`,o&&`fixed-${o}`)})})})});oR.displayName="Navbar";const xd=Object.assign(oR,{Brand:R9,Collapse:i6,Offcanvas:B6,Text:z6,Toggle:s6});function q6(t,e,n){const r=v.useRef(t!==void 0),[i,s]=v.useState(e),o=t!==void 0,a=r.current;return r.current=o,!o&&a&&i!==e&&s(e),[o?t:i,v.useCallback((l,...u)=>{n&&n(l,...u),s(l)},[n])]}const W6=v.createContext(null),xp=W6;var L_=Object.prototype.hasOwnProperty;function $_(t,e,n){for(n of t.keys())if(uu(n,e))return n}function uu(t,e){var n,r,i;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&uu(t[r],e[r]););return r===-1}if(n===Set){if(t.size!==e.size)return!1;for(r of t)if(i=r,i&&typeof i=="object"&&(i=$_(e,i),!i)||!e.has(i))return!1;return!0}if(n===Map){if(t.size!==e.size)return!1;for(r of t)if(i=r[0],i&&typeof i=="object"&&(i=$_(e,i),!i)||!uu(r[1],e.get(i)))return!1;return!0}if(n===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(n===DataView){if((r=t.byteLength)===e.byteLength)for(;r--&&t.getInt8(r)===e.getInt8(r););return r===-1}if(ArrayBuffer.isView(t)){if((r=t.byteLength)===e.byteLength)for(;r--&&t[r]===e[r];);return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(L_.call(t,n)&&++r&&!L_.call(e,n)||!(n in e)||!uu(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}function H6(t){var e=LA();return[t[0],v.useCallback(function(n){if(e())return t[1](n)},[e,t[1]])]}var fn="top",Fn="bottom",Un="right",pn="left",W0="auto",zc=[fn,Fn,Un,pn],Fa="start",ac="end",K6="clippingParents",aR="viewport",Al="popper",G6="reference",M_=zc.reduce(function(t,e){return t.concat([e+"-"+Fa,e+"-"+ac])},[]),lR=[].concat(zc,[W0]).reduce(function(t,e){return t.concat([e,e+"-"+Fa,e+"-"+ac])},[]),Q6="beforeRead",Y6="read",X6="afterRead",J6="beforeMain",Z6="main",e5="afterMain",t5="beforeWrite",n5="write",r5="afterWrite",i5=[Q6,Y6,X6,J6,Z6,e5,t5,n5,r5];function wr(t){return t.split("-")[0]}function Tn(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function co(t){var e=Tn(t).Element;return t instanceof e||t instanceof Element}function Er(t){var e=Tn(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function H0(t){if(typeof ShadowRoot>"u")return!1;var e=Tn(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}var zs=Math.max,nf=Math.min,Ua=Math.round;function Uv(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function uR(){return!/^((?!chrome|android).)*safari/i.test(Uv())}function Va(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,s=1;e&&Er(t)&&(i=t.offsetWidth>0&&Ua(r.width)/t.offsetWidth||1,s=t.offsetHeight>0&&Ua(r.height)/t.offsetHeight||1);var o=co(t)?Tn(t):window,a=o.visualViewport,l=!uR()&&n,u=(r.left+(l&&a?a.offsetLeft:0))/i,c=(r.top+(l&&a?a.offsetTop:0))/s,d=r.width/i,h=r.height/s;return{width:d,height:h,top:c,right:u+d,bottom:c+h,left:u,x:u,y:c}}function K0(t){var e=Va(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function cR(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&H0(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Zi(t){return t?(t.nodeName||"").toLowerCase():null}function Yr(t){return Tn(t).getComputedStyle(t)}function s5(t){return["table","td","th"].indexOf(Zi(t))>=0}function hs(t){return((co(t)?t.ownerDocument:t.document)||window.document).documentElement}function kp(t){return Zi(t)==="html"?t:t.assignedSlot||t.parentNode||(H0(t)?t.host:null)||hs(t)}function F_(t){return!Er(t)||Yr(t).position==="fixed"?null:t.offsetParent}function o5(t){var e=/firefox/i.test(Uv()),n=/Trident/i.test(Uv());if(n&&Er(t)){var r=Yr(t);if(r.position==="fixed")return null}var i=kp(t);for(H0(i)&&(i=i.host);Er(i)&&["html","body"].indexOf(Zi(i))<0;){var s=Yr(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function qc(t){for(var e=Tn(t),n=F_(t);n&&s5(n)&&Yr(n).position==="static";)n=F_(n);return n&&(Zi(n)==="html"||Zi(n)==="body"&&Yr(n).position==="static")?e:n||o5(t)||e}function G0(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function cu(t,e,n){return zs(t,nf(e,n))}function a5(t,e,n){var r=cu(t,e,n);return r>n?n:r}function dR(){return{top:0,right:0,bottom:0,left:0}}function hR(t){return Object.assign({},dR(),t)}function fR(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var l5=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,hR(typeof e!="number"?e:fR(e,zc))};function u5(t){var e,n=t.state,r=t.name,i=t.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=wr(n.placement),l=G0(a),u=[pn,Un].indexOf(a)>=0,c=u?"height":"width";if(!(!s||!o)){var d=l5(i.padding,n),h=K0(s),f=l==="y"?fn:pn,m=l==="y"?Fn:Un,w=n.rects.reference[c]+n.rects.reference[l]-o[l]-n.rects.popper[c],I=o[l]-n.rects.reference[l],y=qc(s),p=y?l==="y"?y.clientHeight||0:y.clientWidth||0:0,g=w/2-I/2,_=d[f],T=p-h[c]-d[m],C=p/2-h[c]/2+g,b=cu(_,C,T),A=l;n.modifiersData[r]=(e={},e[A]=b,e.centerOffset=b-C,e)}}function c5(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||cR(e.elements.popper,i)&&(e.elements.arrow=i))}const d5={name:"arrow",enabled:!0,phase:"main",fn:u5,effect:c5,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ja(t){return t.split("-")[1]}var h5={top:"auto",right:"auto",bottom:"auto",left:"auto"};function f5(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:Ua(n*i)/i||0,y:Ua(r*i)/i||0}}function U_(t){var e,n=t.popper,r=t.popperRect,i=t.placement,s=t.variation,o=t.offsets,a=t.position,l=t.gpuAcceleration,u=t.adaptive,c=t.roundOffsets,d=t.isFixed,h=o.x,f=h===void 0?0:h,m=o.y,w=m===void 0?0:m,I=typeof c=="function"?c({x:f,y:w}):{x:f,y:w};f=I.x,w=I.y;var y=o.hasOwnProperty("x"),p=o.hasOwnProperty("y"),g=pn,_=fn,T=window;if(u){var C=qc(n),b="clientHeight",A="clientWidth";if(C===Tn(n)&&(C=hs(n),Yr(C).position!=="static"&&a==="absolute"&&(b="scrollHeight",A="scrollWidth")),C=C,i===fn||(i===pn||i===Un)&&s===ac){_=Fn;var W=d&&C===T&&T.visualViewport?T.visualViewport.height:C[b];w-=W-r.height,w*=l?1:-1}if(i===pn||(i===fn||i===Fn)&&s===ac){g=Un;var j=d&&C===T&&T.visualViewport?T.visualViewport.width:C[A];f-=j-r.width,f*=l?1:-1}}var Q=Object.assign({position:a},u&&h5),q=c===!0?f5({x:f,y:w},Tn(n)):{x:f,y:w};if(f=q.x,w=q.y,l){var U;return Object.assign({},Q,(U={},U[_]=p?"0":"",U[g]=y?"0":"",U.transform=(T.devicePixelRatio||1)<=1?"translate("+f+"px, "+w+"px)":"translate3d("+f+"px, "+w+"px, 0)",U))}return Object.assign({},Q,(e={},e[_]=p?w+"px":"",e[g]=y?f+"px":"",e.transform="",e))}function p5(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,s=n.adaptive,o=s===void 0?!0:s,a=n.roundOffsets,l=a===void 0?!0:a,u={placement:wr(e.placement),variation:ja(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,U_(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,U_(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const m5={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:p5,data:{}};var kd={passive:!0};function g5(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,s=i===void 0?!0:i,o=r.resize,a=o===void 0?!0:o,l=Tn(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&u.forEach(function(c){c.addEventListener("scroll",n.update,kd)}),a&&l.addEventListener("resize",n.update,kd),function(){s&&u.forEach(function(c){c.removeEventListener("scroll",n.update,kd)}),a&&l.removeEventListener("resize",n.update,kd)}}const v5={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:g5,data:{}};var y5={left:"right",right:"left",bottom:"top",top:"bottom"};function Jd(t){return t.replace(/left|right|bottom|top/g,function(e){return y5[e]})}var w5={start:"end",end:"start"};function V_(t){return t.replace(/start|end/g,function(e){return w5[e]})}function Q0(t){var e=Tn(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function Y0(t){return Va(hs(t)).left+Q0(t).scrollLeft}function E5(t,e){var n=Tn(t),r=hs(t),i=n.visualViewport,s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;var u=uR();(u||!u&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a+Y0(t),y:l}}function I5(t){var e,n=hs(t),r=Q0(t),i=(e=t.ownerDocument)==null?void 0:e.body,s=zs(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=zs(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+Y0(t),l=-r.scrollTop;return Yr(i||n).direction==="rtl"&&(a+=zs(n.clientWidth,i?i.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function X0(t){var e=Yr(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function pR(t){return["html","body","#document"].indexOf(Zi(t))>=0?t.ownerDocument.body:Er(t)&&X0(t)?t:pR(kp(t))}function du(t,e){var n;e===void 0&&(e=[]);var r=pR(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),s=Tn(r),o=i?[s].concat(s.visualViewport||[],X0(r)?r:[]):r,a=e.concat(o);return i?a:a.concat(du(kp(o)))}function Vv(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function _5(t,e){var n=Va(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function j_(t,e,n){return e===aR?Vv(E5(t,n)):co(e)?_5(e,n):Vv(I5(hs(t)))}function S5(t){var e=du(kp(t)),n=["absolute","fixed"].indexOf(Yr(t).position)>=0,r=n&&Er(t)?qc(t):t;return co(r)?e.filter(function(i){return co(i)&&cR(i,r)&&Zi(i)!=="body"}):[]}function T5(t,e,n,r){var i=e==="clippingParents"?S5(t):[].concat(e),s=[].concat(i,[n]),o=s[0],a=s.reduce(function(l,u){var c=j_(t,u,r);return l.top=zs(c.top,l.top),l.right=nf(c.right,l.right),l.bottom=nf(c.bottom,l.bottom),l.left=zs(c.left,l.left),l},j_(t,o,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function mR(t){var e=t.reference,n=t.element,r=t.placement,i=r?wr(r):null,s=r?ja(r):null,o=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(i){case fn:l={x:o,y:e.y-n.height};break;case Fn:l={x:o,y:e.y+e.height};break;case Un:l={x:e.x+e.width,y:a};break;case pn:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var u=i?G0(i):null;if(u!=null){var c=u==="y"?"height":"width";switch(s){case Fa:l[u]=l[u]-(e[c]/2-n[c]/2);break;case ac:l[u]=l[u]+(e[c]/2-n[c]/2);break}}return l}function lc(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,s=n.strategy,o=s===void 0?t.strategy:s,a=n.boundary,l=a===void 0?K6:a,u=n.rootBoundary,c=u===void 0?aR:u,d=n.elementContext,h=d===void 0?Al:d,f=n.altBoundary,m=f===void 0?!1:f,w=n.padding,I=w===void 0?0:w,y=hR(typeof I!="number"?I:fR(I,zc)),p=h===Al?G6:Al,g=t.rects.popper,_=t.elements[m?p:h],T=T5(co(_)?_:_.contextElement||hs(t.elements.popper),l,c,o),C=Va(t.elements.reference),b=mR({reference:C,element:g,strategy:"absolute",placement:i}),A=Vv(Object.assign({},g,b)),W=h===Al?A:C,j={top:T.top-W.top+y.top,bottom:W.bottom-T.bottom+y.bottom,left:T.left-W.left+y.left,right:W.right-T.right+y.right},Q=t.modifiersData.offset;if(h===Al&&Q){var q=Q[i];Object.keys(j).forEach(function(U){var re=[Un,Fn].indexOf(U)>=0?1:-1,ue=[fn,Fn].indexOf(U)>=0?"y":"x";j[U]+=q[ue]*re})}return j}function C5(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,s=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,u=l===void 0?lR:l,c=ja(r),d=c?a?M_:M_.filter(function(m){return ja(m)===c}):zc,h=d.filter(function(m){return u.indexOf(m)>=0});h.length===0&&(h=d);var f=h.reduce(function(m,w){return m[w]=lc(t,{placement:w,boundary:i,rootBoundary:s,padding:o})[wr(w)],m},{});return Object.keys(f).sort(function(m,w){return f[m]-f[w]})}function x5(t){if(wr(t)===W0)return[];var e=Jd(t);return[V_(t),e,V_(e)]}function k5(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!0:o,l=n.fallbackPlacements,u=n.padding,c=n.boundary,d=n.rootBoundary,h=n.altBoundary,f=n.flipVariations,m=f===void 0?!0:f,w=n.allowedAutoPlacements,I=e.options.placement,y=wr(I),p=y===I,g=l||(p||!m?[Jd(I)]:x5(I)),_=[I].concat(g).reduce(function(Be,Ie){return Be.concat(wr(Ie)===W0?C5(e,{placement:Ie,boundary:c,rootBoundary:d,padding:u,flipVariations:m,allowedAutoPlacements:w}):Ie)},[]),T=e.rects.reference,C=e.rects.popper,b=new Map,A=!0,W=_[0],j=0;j<_.length;j++){var Q=_[j],q=wr(Q),U=ja(Q)===Fa,re=[fn,Fn].indexOf(q)>=0,ue=re?"width":"height",oe=lc(e,{placement:Q,boundary:c,rootBoundary:d,altBoundary:h,padding:u}),de=re?U?Un:pn:U?Fn:fn;T[ue]>C[ue]&&(de=Jd(de));var P=Jd(de),Y=[];if(s&&Y.push(oe[q]<=0),a&&Y.push(oe[de]<=0,oe[P]<=0),Y.every(function(Be){return Be})){W=Q,A=!1;break}b.set(Q,Y)}if(A)for(var G=m?3:1,ce=function(Ie){var ze=_.find(function(Wt){var kn=b.get(Wt);if(kn)return kn.slice(0,Ie).every(function(Zn){return Zn})});if(ze)return W=ze,"break"},Ee=G;Ee>0;Ee--){var mt=ce(Ee);if(mt==="break")break}e.placement!==W&&(e.modifiersData[r]._skip=!0,e.placement=W,e.reset=!0)}}const b5={name:"flip",enabled:!0,phase:"main",fn:k5,requiresIfExists:["offset"],data:{_skip:!1}};function B_(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function z_(t){return[fn,Un,Fn,pn].some(function(e){return t[e]>=0})}function N5(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,s=e.modifiersData.preventOverflow,o=lc(e,{elementContext:"reference"}),a=lc(e,{altBoundary:!0}),l=B_(o,r),u=B_(a,i,s),c=z_(l),d=z_(u);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":d})}const A5={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:N5};function R5(t,e,n){var r=wr(t),i=[pn,fn].indexOf(r)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*i,[pn,Un].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}function D5(t){var e=t.state,n=t.options,r=t.name,i=n.offset,s=i===void 0?[0,0]:i,o=lR.reduce(function(c,d){return c[d]=R5(d,e.rects,s),c},{}),a=o[e.placement],l=a.x,u=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=u),e.modifiersData[r]=o}const O5={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:D5};function P5(t){var e=t.state,n=t.name;e.modifiersData[n]=mR({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const L5={name:"popperOffsets",enabled:!0,phase:"read",fn:P5,data:{}};function $5(t){return t==="x"?"y":"x"}function M5(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!1:o,l=n.boundary,u=n.rootBoundary,c=n.altBoundary,d=n.padding,h=n.tether,f=h===void 0?!0:h,m=n.tetherOffset,w=m===void 0?0:m,I=lc(e,{boundary:l,rootBoundary:u,padding:d,altBoundary:c}),y=wr(e.placement),p=ja(e.placement),g=!p,_=G0(y),T=$5(_),C=e.modifiersData.popperOffsets,b=e.rects.reference,A=e.rects.popper,W=typeof w=="function"?w(Object.assign({},e.rects,{placement:e.placement})):w,j=typeof W=="number"?{mainAxis:W,altAxis:W}:Object.assign({mainAxis:0,altAxis:0},W),Q=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,q={x:0,y:0};if(C){if(s){var U,re=_==="y"?fn:pn,ue=_==="y"?Fn:Un,oe=_==="y"?"height":"width",de=C[_],P=de+I[re],Y=de-I[ue],G=f?-A[oe]/2:0,ce=p===Fa?b[oe]:A[oe],Ee=p===Fa?-A[oe]:-b[oe],mt=e.elements.arrow,Be=f&&mt?K0(mt):{width:0,height:0},Ie=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:dR(),ze=Ie[re],Wt=Ie[ue],kn=cu(0,b[oe],Be[oe]),Zn=g?b[oe]/2-G-kn-ze-j.mainAxis:ce-kn-ze-j.mainAxis,fs=g?-b[oe]/2+G+kn+Wt+j.mainAxis:Ee+kn+Wt+j.mainAxis,si=e.elements.arrow&&qc(e.elements.arrow),ps=si?_==="y"?si.clientTop||0:si.clientLeft||0:0,ms=(U=Q==null?void 0:Q[_])!=null?U:0,gs=de+Zn-ms-ps,Me=de+fs-ms,S=cu(f?nf(P,gs):P,de,f?zs(Y,Me):Y);C[_]=S,q[_]=S-de}if(a){var N,R=_==="x"?fn:pn,X=_==="x"?Fn:Un,V=C[T],M=T==="y"?"height":"width",te=V+I[R],be=V-I[X],Ne=[fn,pn].indexOf(y)!==-1,Cr=(N=Q==null?void 0:Q[T])!=null?N:0,Gc=Ne?te:V-b[M]-A[M]-Cr+j.altAxis,So=Ne?V+b[M]+A[M]-Cr-j.altAxis:be,To=f&&Ne?a5(Gc,V,So):cu(f?Gc:te,V,f?So:be);C[T]=To,q[T]=To-V}e.modifiersData[r]=q}}const F5={name:"preventOverflow",enabled:!0,phase:"main",fn:M5,requiresIfExists:["offset"]};function U5(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function V5(t){return t===Tn(t)||!Er(t)?Q0(t):U5(t)}function j5(t){var e=t.getBoundingClientRect(),n=Ua(e.width)/t.offsetWidth||1,r=Ua(e.height)/t.offsetHeight||1;return n!==1||r!==1}function B5(t,e,n){n===void 0&&(n=!1);var r=Er(e),i=Er(e)&&j5(e),s=hs(e),o=Va(t,i,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((Zi(e)!=="body"||X0(s))&&(a=V5(e)),Er(e)?(l=Va(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=Y0(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function z5(t){var e=new Map,n=new Set,r=[];t.forEach(function(s){e.set(s.name,s)});function i(s){n.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&i(l)}}),r.push(s)}return t.forEach(function(s){n.has(s.name)||i(s)}),r}function q5(t){var e=z5(t);return i5.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function W5(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function H5(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var q_={placement:"bottom",modifiers:[],strategy:"absolute"};function W_(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function K5(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,s=i===void 0?q_:i;return function(a,l,u){u===void 0&&(u=s);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},q_,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],h=!1,f={state:c,setOptions:function(y){var p=typeof y=="function"?y(c.options):y;w(),c.options=Object.assign({},s,c.options,p),c.scrollParents={reference:co(a)?du(a):a.contextElement?du(a.contextElement):[],popper:du(l)};var g=q5(H5([].concat(r,c.options.modifiers)));return c.orderedModifiers=g.filter(function(_){return _.enabled}),m(),f.update()},forceUpdate:function(){if(!h){var y=c.elements,p=y.reference,g=y.popper;if(W_(p,g)){c.rects={reference:B5(p,qc(g),c.options.strategy==="fixed"),popper:K0(g)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(j){return c.modifiersData[j.name]=Object.assign({},j.data)});for(var _=0;_<c.orderedModifiers.length;_++){if(c.reset===!0){c.reset=!1,_=-1;continue}var T=c.orderedModifiers[_],C=T.fn,b=T.options,A=b===void 0?{}:b,W=T.name;typeof C=="function"&&(c=C({state:c,options:A,name:W,instance:f})||c)}}}},update:W5(function(){return new Promise(function(I){f.forceUpdate(),I(c)})}),destroy:function(){w(),h=!0}};if(!W_(a,l))return f;f.setOptions(u).then(function(I){!h&&u.onFirstUpdate&&u.onFirstUpdate(I)});function m(){c.orderedModifiers.forEach(function(I){var y=I.name,p=I.options,g=p===void 0?{}:p,_=I.effect;if(typeof _=="function"){var T=_({state:c,name:y,instance:f,options:g}),C=function(){};d.push(T||C)}})}function w(){d.forEach(function(I){return I()}),d=[]}return f}}const G5=K5({defaultModifiers:[A5,L5,m5,v5,O5,b5,F5,d5]}),Q5=["enabled","placement","strategy","modifiers"];function Y5(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}const X5={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:()=>{}},J5={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:({state:t})=>()=>{const{reference:e,popper:n}=t.elements;if("removeAttribute"in e){const r=(e.getAttribute("aria-describedby")||"").split(",").filter(i=>i.trim()!==n.id);r.length?e.setAttribute("aria-describedby",r.join(",")):e.removeAttribute("aria-describedby")}},fn:({state:t})=>{var e;const{popper:n,reference:r}=t.elements,i=(e=n.getAttribute("role"))==null?void 0:e.toLowerCase();if(n.id&&i==="tooltip"&&"setAttribute"in r){const s=r.getAttribute("aria-describedby");if(s&&s.split(",").indexOf(n.id)!==-1)return;r.setAttribute("aria-describedby",s?`${s},${n.id}`:n.id)}}},Z5=[];function eq(t,e,n={}){let{enabled:r=!0,placement:i="bottom",strategy:s="absolute",modifiers:o=Z5}=n,a=Y5(n,Q5);const l=v.useRef(o),u=v.useRef(),c=v.useCallback(()=>{var I;(I=u.current)==null||I.update()},[]),d=v.useCallback(()=>{var I;(I=u.current)==null||I.forceUpdate()},[]),[h,f]=H6(v.useState({placement:i,update:c,forceUpdate:d,attributes:{},styles:{popper:{},arrow:{}}})),m=v.useMemo(()=>({name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:({state:I})=>{const y={},p={};Object.keys(I.elements).forEach(g=>{y[g]=I.styles[g],p[g]=I.attributes[g]}),f({state:I,styles:y,attributes:p,update:c,forceUpdate:d,placement:I.placement})}}),[c,d,f]),w=v.useMemo(()=>(uu(l.current,o)||(l.current=o),l.current),[o]);return v.useEffect(()=>{!u.current||!r||u.current.setOptions({placement:i,strategy:s,modifiers:[...w,m,X5]})},[s,i,m,r,w]),v.useEffect(()=>{if(!(!r||t==null||e==null))return u.current=G5(t,e,Object.assign({},a,{placement:i,strategy:s,modifiers:[...w,J5,m]})),()=>{u.current!=null&&(u.current.destroy(),u.current=void 0,f(I=>Object.assign({},I,{attributes:{},styles:{popper:{}}})))}},[r,t,e]),h}var tq=function(){},nq=tq;const rq=uc(nq),H_=()=>{};function iq(t){return t.button===0}function sq(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}const Om=t=>t&&("current"in t?t.current:t),K_={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};function oq(t,e=H_,{disabled:n,clickTrigger:r="click"}={}){const i=v.useRef(!1),s=v.useRef(!1),o=v.useCallback(u=>{const c=Om(t);rq(!!c,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),i.current=!c||sq(u)||!iq(u)||!!tf(c,u.target)||s.current,s.current=!1},[t]),a=tt(u=>{const c=Om(t);c&&tf(c,u.target)&&(s.current=!0)}),l=tt(u=>{i.current||e(u)});v.useEffect(()=>{var u,c;if(n||t==null)return;const d=Sp(Om(t)),h=d.defaultView||window;let f=(u=h.event)!=null?u:(c=h.parent)==null?void 0:c.event,m=null;K_[r]&&(m=Ci(d,K_[r],a,!0));const w=Ci(d,r,o,!0),I=Ci(d,r,p=>{if(p===f){f=void 0;return}l(p)});let y=[];return"ontouchstart"in d.documentElement&&(y=[].slice.call(d.body.children).map(p=>Ci(p,"mousemove",H_))),()=>{m==null||m(),w(),I(),y.forEach(p=>p())}},[t,n,r,o,a,l])}function aq(t){const e={};return Array.isArray(t)?(t==null||t.forEach(n=>{e[n.name]=n}),e):t||e}function lq(t={}){return Array.isArray(t)?t:Object.keys(t).map(e=>(t[e].name=e,t[e]))}function uq({enabled:t,enableEvents:e,placement:n,flip:r,offset:i,fixed:s,containerPadding:o,arrowElement:a,popperConfig:l={}}){var u,c,d,h,f;const m=aq(l.modifiers);return Object.assign({},l,{placement:n,enabled:t,strategy:s?"fixed":l.strategy,modifiers:lq(Object.assign({},m,{eventListeners:{enabled:e,options:(u=m.eventListeners)==null?void 0:u.options},preventOverflow:Object.assign({},m.preventOverflow,{options:o?Object.assign({padding:o},(c=m.preventOverflow)==null?void 0:c.options):(d=m.preventOverflow)==null?void 0:d.options}),offset:{options:Object.assign({offset:i},(h=m.offset)==null?void 0:h.options)},arrow:Object.assign({},m.arrow,{enabled:!!a,options:Object.assign({},(f=m.arrow)==null?void 0:f.options,{element:a})}),flip:Object.assign({enabled:!!r},m.flip)}))})}const cq=["children"];function dq(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}const hq=()=>{};function gR(t={}){const e=v.useContext(xp),[n,r]=T9(),i=v.useRef(!1),{flip:s,offset:o,rootCloseEvent:a,fixed:l=!1,placement:u,popperConfig:c={},enableEventListeners:d=!0,usePopper:h=!!e}=t,f=(e==null?void 0:e.show)==null?!!t.show:e.show;f&&!i.current&&(i.current=!0);const m=C=>{e==null||e.toggle(!1,C)},{placement:w,setMenu:I,menuElement:y,toggleElement:p}=e||{},g=eq(p,y,uq({placement:u||w||"bottom-start",enabled:h,enableEvents:d??f,offset:o,flip:s,fixed:l,arrowElement:n,popperConfig:c})),_=Object.assign({ref:I||hq,"aria-labelledby":p==null?void 0:p.id},g.attributes.popper,{style:g.styles.popper}),T={show:f,placement:w,hasShown:i.current,toggle:e==null?void 0:e.toggle,popper:h?g:null,arrowProps:h?Object.assign({ref:r},g.attributes.arrow,{style:g.styles.arrow}):{}};return oq(y,m,{clickTrigger:a,disabled:!f}),[_,T]}const fq={usePopper:!0};function J0(t){let{children:e}=t,n=dq(t,cq);const[r,i]=gR(n);return E.jsx(E.Fragment,{children:e(r,i)})}J0.displayName="DropdownMenu";J0.defaultProps=fq;const Z0={prefix:String(Math.round(Math.random()*1e10)),current:0,isSSR:!1},eE=Oe.createContext(Z0);let pq=!!(typeof window<"u"&&window.document&&window.document.createElement),Pm=new WeakMap;function mq(t=!1){let e=v.useContext(eE),n=v.useRef(null);if(n.current===null&&!t){var r,i;let s=(r=Oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||r===void 0||(i=r.ReactCurrentOwner)===null||i===void 0?void 0:i.current;if(s){let o=Pm.get(s);o==null?Pm.set(s,{id:e.current,state:s.memoizedState}):s.memoizedState!==o.state&&(e.current=o.id,Pm.delete(s))}n.current=++e.current}return n.current}function gq(t){let e=v.useContext(eE);e===Z0&&!pq&&console.warn("When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server.");let n=mq(!!t);return t||`react-aria${e.prefix}-${n}`}function vq(t){let e=Oe.useId(),[n]=v.useState(_q()),r=n?"react-aria":`react-aria${Z0.prefix}`;return t||`${r}-${e}`}const yq=typeof Oe.useId=="function"?vq:gq;function wq(){return!1}function Eq(){return!0}function Iq(t){return()=>{}}function _q(){return typeof Oe.useSyncExternalStore=="function"?Oe.useSyncExternalStore(Iq,wq,Eq):v.useContext(eE).isSSR}const vR=t=>{var e;return((e=t.getAttribute("role"))==null?void 0:e.toLowerCase())==="menu"},G_=()=>{};function yR(){const t=yq(),{show:e=!1,toggle:n=G_,setToggle:r,menuElement:i}=v.useContext(xp)||{},s=v.useCallback(a=>{n(!e,a)},[e,n]),o={id:t,ref:r||G_,onClick:s,"aria-expanded":!!e};return i&&vR(i)&&(o["aria-haspopup"]=!0),[o,{show:e,toggle:n}]}function wR({children:t}){const[e,n]=yR();return E.jsx(E.Fragment,{children:t(e,n)})}wR.displayName="DropdownToggle";const Sq=["eventKey","disabled","onClick","active","as"];function Tq(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function ER({key:t,href:e,active:n,disabled:r,onClick:i}){const s=v.useContext(uo),o=v.useContext(U0),{activeKey:a}=o||{},l=sc(t,e),u=n==null&&t!=null?sc(a)===l:n;return[{onClick:tt(d=>{r||(i==null||i(d),s&&!d.isPropagationStopped()&&s(l,d))}),"aria-disabled":r||void 0,"aria-selected":u,[ul("dropdown-item")]:""},{isActive:u}]}const IR=v.forwardRef((t,e)=>{let{eventKey:n,disabled:r,onClick:i,active:s,as:o=jy}=t,a=Tq(t,Sq);const[l]=ER({key:n,href:a.href,disabled:r,onClick:i,active:s});return E.jsx(o,Object.assign({},a,{ref:e},l))});IR.displayName="DropdownItem";function Q_(){const t=bA(),e=v.useRef(null),n=v.useCallback(r=>{e.current=r,t()},[t]);return[e,n]}function Wc({defaultShow:t,show:e,onSelect:n,onToggle:r,itemSelector:i=`* [${ul("dropdown-item")}]`,focusFirstItemOnShow:s,placement:o="bottom-start",children:a}){const l=Cp(),[u,c]=q6(e,t,r),[d,h]=Q_(),f=d.current,[m,w]=Q_(),I=m.current,y=$A(u),p=v.useRef(null),g=v.useRef(!1),_=v.useContext(uo),T=v.useCallback((Q,q,U=q==null?void 0:q.type)=>{c(Q,{originalEvent:q,source:U})},[c]),C=tt((Q,q)=>{n==null||n(Q,q),T(!1,q,"select"),q.isPropagationStopped()||_==null||_(Q,q)}),b=v.useMemo(()=>({toggle:T,placement:o,show:u,menuElement:f,toggleElement:I,setMenu:h,setToggle:w}),[T,o,u,f,I,h,w]);f&&y&&!u&&(g.current=f.contains(f.ownerDocument.activeElement));const A=tt(()=>{I&&I.focus&&I.focus()}),W=tt(()=>{const Q=p.current;let q=s;if(q==null&&(q=d.current&&vR(d.current)?"keyboard":!1),q===!1||q==="keyboard"&&!/^key.+$/.test(Q))return;const U=Ar(d.current,i)[0];U&&U.focus&&U.focus()});v.useEffect(()=>{u?W():g.current&&(g.current=!1,A())},[u,g,A,W]),v.useEffect(()=>{p.current=null});const j=(Q,q)=>{if(!d.current)return null;const U=Ar(d.current,i);let re=U.indexOf(Q)+q;return re=Math.max(0,Math.min(re,U.length)),U[re]};return C9(v.useCallback(()=>l.document,[l]),"keydown",Q=>{var q,U;const{key:re}=Q,ue=Q.target,oe=(q=d.current)==null?void 0:q.contains(ue),de=(U=m.current)==null?void 0:U.contains(ue);if(/input|textarea/i.test(ue.tagName)&&(re===" "||re!=="Escape"&&oe||re==="Escape"&&ue.type==="search")||!oe&&!de||re==="Tab"&&(!d.current||!u))return;p.current=Q.type;const Y={originalEvent:Q,source:Q.type};switch(re){case"ArrowUp":{const G=j(ue,-1);G&&G.focus&&G.focus(),Q.preventDefault();return}case"ArrowDown":if(Q.preventDefault(),!u)c(!0,Y);else{const G=j(ue,1);G&&G.focus&&G.focus()}return;case"Tab":HA(ue.ownerDocument,"keyup",G=>{var ce;(G.key==="Tab"&&!G.target||!((ce=d.current)!=null&&ce.contains(G.target)))&&c(!1,Y)},{once:!0});break;case"Escape":re==="Escape"&&(Q.preventDefault(),Q.stopPropagation()),c(!1,Y);break}}),E.jsx(uo.Provider,{value:C,children:E.jsx(xp.Provider,{value:b,children:a})})}Wc.displayName="Dropdown";Wc.Menu=J0;Wc.Toggle=wR;Wc.Item=IR;const _R=v.createContext({});_R.displayName="DropdownContext";const SR=_R,TR=v.forwardRef(({bsPrefix:t,className:e,eventKey:n,disabled:r=!1,onClick:i,active:s,as:o=V0,...a},l)=>{const u=ve(t,"dropdown-item"),[c,d]=ER({key:n,href:a.href,disabled:r,onClick:i,active:s});return E.jsx(o,{...a,...c,ref:l,className:le(e,u,d.isActive&&"active",r&&"disabled")})});TR.displayName="DropdownItem";const Cq=TR,CR=v.createContext(null);CR.displayName="InputGroupContext";const xR=CR;function kR(t,e){return t}function bR(t,e,n){const r=n?"top-end":"top-start",i=n?"top-start":"top-end",s=n?"bottom-end":"bottom-start",o=n?"bottom-start":"bottom-end",a=n?"right-start":"left-start",l=n?"right-end":"left-end",u=n?"left-start":"right-start",c=n?"left-end":"right-end";let d=t?o:s;return e==="up"?d=t?i:r:e==="end"?d=t?c:u:e==="start"?d=t?l:a:e==="down-centered"?d="bottom":e==="up-centered"&&(d="top"),d}const NR=v.forwardRef(({bsPrefix:t,className:e,align:n,rootCloseEvent:r,flip:i=!0,show:s,renderOnMount:o,as:a="div",popperConfig:l,variant:u,...c},d)=>{let h=!1;const f=v.useContext(_o),m=ve(t,"dropdown-menu"),{align:w,drop:I,isRTL:y}=v.useContext(SR);n=n||w;const p=v.useContext(xR),g=[];if(n)if(typeof n=="object"){const Q=Object.keys(n);if(Q.length){const q=Q[0],U=n[q];h=U==="start",g.push(`${m}-${q}-${U}`)}}else n==="end"&&(h=!0);const _=bR(h,I,y),[T,{hasShown:C,popper:b,show:A,toggle:W}]=gR({flip:i,rootCloseEvent:r,show:s,usePopper:!f&&g.length===0,offset:[0,2],popperConfig:l,placement:_});if(T.ref=ll(kR(d),T.ref),ef(()=>{A&&(b==null||b.update())},[A]),!C&&!o&&!p)return null;typeof a!="string"&&(T.show=A,T.close=()=>W==null?void 0:W(!1),T.align=n);let j=c.style;return b!=null&&b.placement&&(j={...c.style,...T.style},c["x-placement"]=b.placement),E.jsx(a,{...c,...T,style:j,...(g.length||f)&&{"data-bs-popper":"static"},className:le(e,m,A&&"show",h&&`${m}-end`,u&&`${m}-${u}`,...g)})});NR.displayName="DropdownMenu";const xq=NR,AR=v.forwardRef(({bsPrefix:t,split:e,className:n,childBsPrefix:r,as:i=Qs,...s},o)=>{const a=ve(t,"dropdown-toggle"),l=v.useContext(xp);r!==void 0&&(s.bsPrefix=r);const[u]=yR();return u.ref=ll(u.ref,kR(o)),E.jsx(i,{className:le(n,a,e&&`${a}-split`,(l==null?void 0:l.show)&&"show"),...u,...s})});AR.displayName="DropdownToggle";const kq=AR,bq=$t("dropdown-header",{defaultProps:{role:"heading"}}),Nq=$t("dropdown-divider",{Component:"hr",defaultProps:{role:"separator"}}),Aq=$t("dropdown-item-text",{Component:"span"}),RR=v.forwardRef((t,e)=>{const{bsPrefix:n,drop:r="down",show:i,className:s,align:o="start",onSelect:a,onToggle:l,focusFirstItemOnShow:u,as:c="div",navbar:d,autoClose:h=!0,...f}=_p(t,{show:"onToggle"}),m=v.useContext(xR),w=ve(n,"dropdown"),I=ML(),y=b=>h===!1?b==="click":h==="inside"?b!=="rootClose":h==="outside"?b!=="select":!0,p=tt((b,A)=>{A.originalEvent.currentTarget===document&&(A.source!=="keydown"||A.originalEvent.key==="Escape")&&(A.source="rootClose"),y(A.source)&&(l==null||l(b,A))}),_=bR(o==="end",r,I),T=v.useMemo(()=>({align:o,drop:r,isRTL:I}),[o,r,I]),C={down:w,"down-centered":`${w}-center`,up:"dropup","up-centered":"dropup-center dropup",end:"dropend",start:"dropstart"};return E.jsx(SR.Provider,{value:T,children:E.jsx(Wc,{placement:_,show:i,onSelect:a,onToggle:p,focusFirstItemOnShow:u,itemSelector:`.${w}-item:not(.disabled):not(:disabled)`,children:m?f.children:E.jsx(c,{...f,ref:e,className:le(s,i&&"show",C[r])})})})});RR.displayName="Dropdown";const Ls=Object.assign(RR,{Toggle:kq,Menu:xq,Item:Cq,ItemText:Aq,Divider:Nq,Header:bq}),DR=v.forwardRef(({id:t,title:e,children:n,bsPrefix:r,className:i,rootCloseEvent:s,menuRole:o,disabled:a,active:l,renderMenuOnMount:u,menuVariant:c,...d},h)=>{const f=ve(void 0,"nav-item");return E.jsxs(Ls,{ref:h,...d,className:le(i,f),children:[E.jsx(Ls.Toggle,{id:t,eventKey:null,active:l,disabled:a,childBsPrefix:r,as:UA,children:e}),E.jsx(Ls.Menu,{role:o,renderOnMount:u,rootCloseEvent:s,variant:c,children:n})]})});DR.displayName="NavDropdown";const Y_=Object.assign(DR,{Item:Ls.Item,ItemText:Ls.ItemText,Divider:Ls.Divider,Header:Ls.Header});function Rq(){const{login:t,handleLogout:e,userInfo:n}=zy();return E.jsx(E.Fragment,{children:E.jsxs(xd,{expand:"lg",className:"bg-body-tertiary",children:[E.jsx(xd.Brand,{as:pi,to:"/",children:"curso-react-ea442"}),E.jsx(xd.Toggle,{"aria-controls":"basic-navbar-nav"}),E.jsx(xd.Collapse,{id:"basic-navbar-nav",children:E.jsxs(Ro,{className:"me-auto",children:[E.jsx(Ro.Link,{as:pi,to:"/",children:"Inicio"}),t&&E.jsxs(E.Fragment,{children:[E.jsx(Ro.Link,{as:pi,to:"/contador",children:"Contador"}),E.jsx(Y_,{title:"Productos",id:"basic-nav-dropdown",children:E.jsx(Y_.Item,{as:pi,to:"/productos/alta",children:"Alta"})}),E.jsx(Ro.Link,{onClick:()=>e(),children:"Salir"})]}),!t&&E.jsxs(E.Fragment,{children:[E.jsx(Ro.Link,{as:pi,to:"/alta",children:"Registrarme"}),E.jsx(Ro.Link,{as:pi,to:"/ingresar",children:"Ingresar"})]})]})}),t&&E.jsxs("div",{children:["Hola ",n.name]})]})})}var Hc=t=>t.type==="checkbox",Zo=t=>t instanceof Date,Qt=t=>t==null;const OR=t=>typeof t=="object";var ft=t=>!Qt(t)&&!Array.isArray(t)&&OR(t)&&!Zo(t),Dq=t=>ft(t)&&t.target?Hc(t.target)?t.target.checked:t.target.value:t,Oq=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,Pq=(t,e)=>t.has(Oq(e)),Lq=t=>{const e=t.constructor&&t.constructor.prototype;return ft(e)&&e.hasOwnProperty("isPrototypeOf")},tE=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function di(t){let e;const n=Array.isArray(t);if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(tE&&(t instanceof Blob||t instanceof FileList))&&(n||ft(t)))if(e=n?[]:{},!n&&!Lq(t))e=t;else for(const r in t)t.hasOwnProperty(r)&&(e[r]=di(t[r]));else return t;return e}var Kc=t=>Array.isArray(t)?t.filter(Boolean):[],ot=t=>t===void 0,J=(t,e,n)=>{if(!e||!ft(t))return n;const r=Kc(e.split(/[,[\].]+?/)).reduce((i,s)=>Qt(i)?i:i[s],t);return ot(r)||r===t?ot(t[e])?n:t[e]:r};const X_={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Wn={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},xr={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};Oe.createContext(null);var $q=(t,e,n,r=!0)=>{const i={defaultValues:e._defaultValues};for(const s in t)Object.defineProperty(i,s,{get:()=>{const o=s;return e._proxyFormState[o]!==Wn.all&&(e._proxyFormState[o]=!r||Wn.all),n&&(n[o]=!0),t[o]}});return i},bn=t=>ft(t)&&!Object.keys(t).length,Mq=(t,e,n,r)=>{n(t);const{name:i,...s}=t;return bn(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(o=>e[o]===(!r||Wn.all))},Lm=t=>Array.isArray(t)?t:[t];function Fq(t){const e=Oe.useRef(t);e.current=t,Oe.useEffect(()=>{const n=!t.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{n&&n.unsubscribe()}},[t.disabled])}var fr=t=>typeof t=="string",Uq=(t,e,n,r,i)=>fr(t)?(r&&e.watch.add(t),J(n,t,i)):Array.isArray(t)?t.map(s=>(r&&e.watch.add(s),J(n,s))):(r&&(e.watchAll=!0),n),nE=t=>/^\w*$/.test(t),PR=t=>Kc(t.replace(/["|']|\]/g,"").split(/\.|\[/));function Fe(t,e,n){let r=-1;const i=nE(e)?[e]:PR(e),s=i.length,o=s-1;for(;++r<s;){const a=i[r];let l=n;if(r!==o){const u=t[a];l=ft(u)||Array.isArray(u)?u:isNaN(+i[r+1])?{}:[]}t[a]=l,t=t[a]}return t}var Vq=(t,e,n,r,i)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:i||!0}}:{};const jv=(t,e,n)=>{for(const r of n||Object.keys(t)){const i=J(t,r);if(i){const{_f:s,...o}=i;if(s&&e(s.name)){if(s.ref.focus){s.ref.focus();break}else if(s.refs&&s.refs[0].focus){s.refs[0].focus();break}}else ft(o)&&jv(o,e)}}};var J_=t=>({isOnSubmit:!t||t===Wn.onSubmit,isOnBlur:t===Wn.onBlur,isOnChange:t===Wn.onChange,isOnAll:t===Wn.all,isOnTouch:t===Wn.onTouched}),Z_=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length)))),jq=(t,e,n)=>{const r=Kc(J(t,n));return Fe(r,"root",e[n]),Fe(t,n,r),t},ma=t=>typeof t=="boolean",rE=t=>t.type==="file",xi=t=>typeof t=="function",rf=t=>{if(!tE)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Zd=t=>fr(t),iE=t=>t.type==="radio",sf=t=>t instanceof RegExp;const eS={value:!1,isValid:!1},tS={value:!0,isValid:!0};var LR=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!ot(t[0].attributes.value)?ot(t[0].value)||t[0].value===""?tS:{value:t[0].value,isValid:!0}:tS:eS}return eS};const nS={isValid:!1,value:null};var $R=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,nS):nS;function rS(t,e,n="validate"){if(Zd(t)||Array.isArray(t)&&t.every(Zd)||ma(t)&&!t)return{type:n,message:Zd(t)?t:"",ref:e}}var Po=t=>ft(t)&&!sf(t)?t:{value:t,message:""},iS=async(t,e,n,r,i)=>{const{ref:s,refs:o,required:a,maxLength:l,minLength:u,min:c,max:d,pattern:h,validate:f,name:m,valueAsNumber:w,mount:I,disabled:y}=t._f,p=J(e,m);if(!I||y)return{};const g=o?o[0]:s,_=q=>{r&&g.reportValidity&&(g.setCustomValidity(ma(q)?"":q||""),g.reportValidity())},T={},C=iE(s),b=Hc(s),A=C||b,W=(w||rE(s))&&ot(s.value)&&ot(p)||rf(s)&&s.value===""||p===""||Array.isArray(p)&&!p.length,j=Vq.bind(null,m,n,T),Q=(q,U,re,ue=xr.maxLength,oe=xr.minLength)=>{const de=q?U:re;T[m]={type:q?ue:oe,message:de,ref:s,...j(q?ue:oe,de)}};if(i?!Array.isArray(p)||!p.length:a&&(!A&&(W||Qt(p))||ma(p)&&!p||b&&!LR(o).isValid||C&&!$R(o).isValid)){const{value:q,message:U}=Zd(a)?{value:!!a,message:a}:Po(a);if(q&&(T[m]={type:xr.required,message:U,ref:g,...j(xr.required,U)},!n))return _(U),T}if(!W&&(!Qt(c)||!Qt(d))){let q,U;const re=Po(d),ue=Po(c);if(!Qt(p)&&!isNaN(p)){const oe=s.valueAsNumber||p&&+p;Qt(re.value)||(q=oe>re.value),Qt(ue.value)||(U=oe<ue.value)}else{const oe=s.valueAsDate||new Date(p),de=G=>new Date(new Date().toDateString()+" "+G),P=s.type=="time",Y=s.type=="week";fr(re.value)&&p&&(q=P?de(p)>de(re.value):Y?p>re.value:oe>new Date(re.value)),fr(ue.value)&&p&&(U=P?de(p)<de(ue.value):Y?p<ue.value:oe<new Date(ue.value))}if((q||U)&&(Q(!!q,re.message,ue.message,xr.max,xr.min),!n))return _(T[m].message),T}if((l||u)&&!W&&(fr(p)||i&&Array.isArray(p))){const q=Po(l),U=Po(u),re=!Qt(q.value)&&p.length>+q.value,ue=!Qt(U.value)&&p.length<+U.value;if((re||ue)&&(Q(re,q.message,U.message),!n))return _(T[m].message),T}if(h&&!W&&fr(p)){const{value:q,message:U}=Po(h);if(sf(q)&&!p.match(q)&&(T[m]={type:xr.pattern,message:U,ref:s,...j(xr.pattern,U)},!n))return _(U),T}if(f){if(xi(f)){const q=await f(p,e),U=rS(q,g);if(U&&(T[m]={...U,...j(xr.validate,U.message)},!n))return _(U.message),T}else if(ft(f)){let q={};for(const U in f){if(!bn(q)&&!n)break;const re=rS(await f[U](p,e),g,U);re&&(q={...re,...j(U,re.message)},_(re.message),n&&(T[m]=q))}if(!bn(q)&&(T[m]={ref:g,...q},!n))return T}}return _(!0),T};function Bq(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=ot(t)?r++:t[e[r++]];return t}function zq(t){for(const e in t)if(t.hasOwnProperty(e)&&!ot(t[e]))return!1;return!0}function Ct(t,e){const n=Array.isArray(e)?e:nE(e)?[e]:PR(e),r=n.length===1?t:Bq(t,n),i=n.length-1,s=n[i];return r&&delete r[s],i!==0&&(ft(r)&&bn(r)||Array.isArray(r)&&zq(r))&&Ct(t,n.slice(0,-1)),t}function $m(){let t=[];return{get observers(){return t},next:i=>{for(const s of t)s.next&&s.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(s=>s!==i)}}),unsubscribe:()=>{t=[]}}}var of=t=>Qt(t)||!OR(t);function ki(t,e){if(of(t)||of(e))return t===e;if(Zo(t)&&Zo(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const i of n){const s=t[i];if(!r.includes(i))return!1;if(i!=="ref"){const o=e[i];if(Zo(s)&&Zo(o)||ft(s)&&ft(o)||Array.isArray(s)&&Array.isArray(o)?!ki(s,o):s!==o)return!1}}return!0}var MR=t=>t.type==="select-multiple",qq=t=>iE(t)||Hc(t),Mm=t=>rf(t)&&t.isConnected,FR=t=>{for(const e in t)if(xi(t[e]))return!0;return!1};function af(t,e={}){const n=Array.isArray(t);if(ft(t)||n)for(const r in t)Array.isArray(t[r])||ft(t[r])&&!FR(t[r])?(e[r]=Array.isArray(t[r])?[]:{},af(t[r],e[r])):Qt(t[r])||(e[r]=!0);return e}function UR(t,e,n){const r=Array.isArray(t);if(ft(t)||r)for(const i in t)Array.isArray(t[i])||ft(t[i])&&!FR(t[i])?ot(e)||of(n[i])?n[i]=Array.isArray(t[i])?af(t[i],[]):{...af(t[i])}:UR(t[i],Qt(e)?{}:e[i],n[i]):n[i]=!ki(t[i],e[i]);return n}var Fm=(t,e)=>UR(t,e,af(e)),VR=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>ot(t)?t:e?t===""?NaN:t&&+t:n&&fr(t)?new Date(t):r?r(t):t;function Um(t){const e=t.ref;if(!(t.refs?t.refs.every(n=>n.disabled):e.disabled))return rE(e)?e.files:iE(e)?$R(t.refs).value:MR(e)?[...e.selectedOptions].map(({value:n})=>n):Hc(e)?LR(t.refs).value:VR(ot(e.value)?t.ref.value:e.value,t)}var Wq=(t,e,n,r)=>{const i={};for(const s of t){const o=J(e,s);o&&Fe(i,s,o._f)}return{criteriaMode:n,names:[...t],fields:i,shouldUseNativeValidation:r}},Rl=t=>ot(t)?t:sf(t)?t.source:ft(t)?sf(t.value)?t.value.source:t.value:t,Hq=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate);function sS(t,e,n){const r=J(t,n);if(r||nE(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const s=i.join("."),o=J(e,s),a=J(t,s);if(o&&!Array.isArray(o)&&n!==s)return{name:n};if(a&&a.type)return{name:s,error:a};i.pop()}return{name:n}}var Kq=(t,e,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(e||t):(n?r.isOnBlur:i.isOnBlur)?!t:(n?r.isOnChange:i.isOnChange)?t:!0,Gq=(t,e)=>!Kc(J(t,e)).length&&Ct(t,e);const Qq={mode:Wn.onSubmit,reValidateMode:Wn.onChange,shouldFocusError:!0};function Yq(t={},e){let n={...Qq,...t},r={submitCount:0,isDirty:!1,isLoading:xi(n.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{}},i={},s=ft(n.defaultValues)||ft(n.values)?di(n.defaultValues||n.values)||{}:{},o=n.shouldUnregister?{}:di(s),a={action:!1,mount:!1,watch:!1},l={mount:new Set,unMount:new Set,array:new Set,watch:new Set},u,c=0;const d={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={values:$m(),array:$m(),state:$m()},f=t.resetOptions&&t.resetOptions.keepDirtyValues,m=J_(n.mode),w=J_(n.reValidateMode),I=n.criteriaMode===Wn.all,y=S=>N=>{clearTimeout(c),c=setTimeout(S,N)},p=async S=>{if(d.isValid||S){const N=n.resolver?bn((await W()).errors):await Q(i,!0);N!==r.isValid&&h.state.next({isValid:N})}},g=S=>d.isValidating&&h.state.next({isValidating:S}),_=(S,N=[],R,X,V=!0,M=!0)=>{if(X&&R){if(a.action=!0,M&&Array.isArray(J(i,S))){const te=R(J(i,S),X.argA,X.argB);V&&Fe(i,S,te)}if(M&&Array.isArray(J(r.errors,S))){const te=R(J(r.errors,S),X.argA,X.argB);V&&Fe(r.errors,S,te),Gq(r.errors,S)}if(d.touchedFields&&M&&Array.isArray(J(r.touchedFields,S))){const te=R(J(r.touchedFields,S),X.argA,X.argB);V&&Fe(r.touchedFields,S,te)}d.dirtyFields&&(r.dirtyFields=Fm(s,o)),h.state.next({name:S,isDirty:U(S,N),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Fe(o,S,N)},T=(S,N)=>{Fe(r.errors,S,N),h.state.next({errors:r.errors})},C=(S,N,R,X)=>{const V=J(i,S);if(V){const M=J(o,S,ot(R)?J(s,S):R);ot(M)||X&&X.defaultChecked||N?Fe(o,S,N?M:Um(V._f)):oe(S,M),a.mount&&p()}},b=(S,N,R,X,V)=>{let M=!1,te=!1;const be={name:S};if(!R||X){d.isDirty&&(te=r.isDirty,r.isDirty=be.isDirty=U(),M=te!==be.isDirty);const Ne=ki(J(s,S),N);te=J(r.dirtyFields,S),Ne?Ct(r.dirtyFields,S):Fe(r.dirtyFields,S,!0),be.dirtyFields=r.dirtyFields,M=M||d.dirtyFields&&te!==!Ne}if(R){const Ne=J(r.touchedFields,S);Ne||(Fe(r.touchedFields,S,R),be.touchedFields=r.touchedFields,M=M||d.touchedFields&&Ne!==R)}return M&&V&&h.state.next(be),M?be:{}},A=(S,N,R,X)=>{const V=J(r.errors,S),M=d.isValid&&ma(N)&&r.isValid!==N;if(t.delayError&&R?(u=y(()=>T(S,R)),u(t.delayError)):(clearTimeout(c),u=null,R?Fe(r.errors,S,R):Ct(r.errors,S)),(R?!ki(V,R):V)||!bn(X)||M){const te={...X,...M&&ma(N)?{isValid:N}:{},errors:r.errors,name:S};r={...r,...te},h.state.next(te)}g(!1)},W=async S=>n.resolver(o,n.context,Wq(S||l.mount,i,n.criteriaMode,n.shouldUseNativeValidation)),j=async S=>{const{errors:N}=await W();if(S)for(const R of S){const X=J(N,R);X?Fe(r.errors,R,X):Ct(r.errors,R)}else r.errors=N;return N},Q=async(S,N,R={valid:!0})=>{for(const X in S){const V=S[X];if(V){const{_f:M,...te}=V;if(M){const be=l.array.has(M.name),Ne=await iS(V,o,I,n.shouldUseNativeValidation&&!N,be);if(Ne[M.name]&&(R.valid=!1,N))break;!N&&(J(Ne,M.name)?be?jq(r.errors,Ne,M.name):Fe(r.errors,M.name,Ne[M.name]):Ct(r.errors,M.name))}te&&await Q(te,N,R)}}return R.valid},q=()=>{for(const S of l.unMount){const N=J(i,S);N&&(N._f.refs?N._f.refs.every(R=>!Mm(R)):!Mm(N._f.ref))&&ze(S)}l.unMount=new Set},U=(S,N)=>(S&&N&&Fe(o,S,N),!ki(ce(),s)),re=(S,N,R)=>Uq(S,l,{...a.mount?o:ot(N)?s:fr(S)?{[S]:N}:N},R,N),ue=S=>Kc(J(a.mount?o:s,S,t.shouldUnregister?J(s,S,[]):[])),oe=(S,N,R={})=>{const X=J(i,S);let V=N;if(X){const M=X._f;M&&(!M.disabled&&Fe(o,S,VR(N,M)),V=rf(M.ref)&&Qt(N)?"":N,MR(M.ref)?[...M.ref.options].forEach(te=>te.selected=V.includes(te.value)):M.refs?Hc(M.ref)?M.refs.length>1?M.refs.forEach(te=>(!te.defaultChecked||!te.disabled)&&(te.checked=Array.isArray(V)?!!V.find(be=>be===te.value):V===te.value)):M.refs[0]&&(M.refs[0].checked=!!V):M.refs.forEach(te=>te.checked=te.value===V):rE(M.ref)?M.ref.value="":(M.ref.value=V,M.ref.type||h.values.next({name:S,values:{...o}})))}(R.shouldDirty||R.shouldTouch)&&b(S,V,R.shouldTouch,R.shouldDirty,!0),R.shouldValidate&&G(S)},de=(S,N,R)=>{for(const X in N){const V=N[X],M=`${S}.${X}`,te=J(i,M);(l.array.has(S)||!of(V)||te&&!te._f)&&!Zo(V)?de(M,V,R):oe(M,V,R)}},P=(S,N,R={})=>{const X=J(i,S),V=l.array.has(S),M=di(N);Fe(o,S,M),V?(h.array.next({name:S,values:{...o}}),(d.isDirty||d.dirtyFields)&&R.shouldDirty&&h.state.next({name:S,dirtyFields:Fm(s,o),isDirty:U(S,M)})):X&&!X._f&&!Qt(M)?de(S,M,R):oe(S,M,R),Z_(S,l)&&h.state.next({...r}),h.values.next({name:S,values:{...o}}),!a.mount&&e()},Y=async S=>{const N=S.target;let R=N.name,X=!0;const V=J(i,R),M=()=>N.type?Um(V._f):Dq(S);if(V){let te,be;const Ne=M(),Cr=S.type===X_.BLUR||S.type===X_.FOCUS_OUT,Gc=!Hq(V._f)&&!n.resolver&&!J(r.errors,R)&&!V._f.deps||Kq(Cr,J(r.touchedFields,R),r.isSubmitted,w,m),So=Z_(R,l,Cr);Fe(o,R,Ne),Cr?(V._f.onBlur&&V._f.onBlur(S),u&&u(0)):V._f.onChange&&V._f.onChange(S);const To=b(R,Ne,Cr,!1),aD=!bn(To)||So;if(!Cr&&h.values.next({name:R,type:S.type,values:{...o}}),Gc)return d.isValid&&p(),aD&&h.state.next({name:R,...So?{}:To});if(!Cr&&So&&h.state.next({...r}),g(!0),n.resolver){const{errors:aE}=await W([R]),lD=sS(r.errors,i,R),lE=sS(aE,i,lD.name||R);te=lE.error,R=lE.name,be=bn(aE)}else te=(await iS(V,o,I,n.shouldUseNativeValidation))[R],X=isNaN(Ne)||Ne===J(o,R,Ne),X&&(te?be=!1:d.isValid&&(be=await Q(i,!0)));X&&(V._f.deps&&G(V._f.deps),A(R,be,te,To))}},G=async(S,N={})=>{let R,X;const V=Lm(S);if(g(!0),n.resolver){const M=await j(ot(S)?S:V);R=bn(M),X=S?!V.some(te=>J(M,te)):R}else S?(X=(await Promise.all(V.map(async M=>{const te=J(i,M);return await Q(te&&te._f?{[M]:te}:te)}))).every(Boolean),!(!X&&!r.isValid)&&p()):X=R=await Q(i);return h.state.next({...!fr(S)||d.isValid&&R!==r.isValid?{}:{name:S},...n.resolver||!S?{isValid:R}:{},errors:r.errors,isValidating:!1}),N.shouldFocus&&!X&&jv(i,M=>M&&J(r.errors,M),S?V:l.mount),X},ce=S=>{const N={...s,...a.mount?o:{}};return ot(S)?N:fr(S)?J(N,S):S.map(R=>J(N,R))},Ee=(S,N)=>({invalid:!!J((N||r).errors,S),isDirty:!!J((N||r).dirtyFields,S),isTouched:!!J((N||r).touchedFields,S),error:J((N||r).errors,S)}),mt=S=>{S&&Lm(S).forEach(N=>Ct(r.errors,N)),h.state.next({errors:S?r.errors:{}})},Be=(S,N,R)=>{const X=(J(i,S,{_f:{}})._f||{}).ref;Fe(r.errors,S,{...N,ref:X}),h.state.next({name:S,errors:r.errors,isValid:!1}),R&&R.shouldFocus&&X&&X.focus&&X.focus()},Ie=(S,N)=>xi(S)?h.values.subscribe({next:R=>S(re(void 0,N),R)}):re(S,N,!0),ze=(S,N={})=>{for(const R of S?Lm(S):l.mount)l.mount.delete(R),l.array.delete(R),N.keepValue||(Ct(i,R),Ct(o,R)),!N.keepError&&Ct(r.errors,R),!N.keepDirty&&Ct(r.dirtyFields,R),!N.keepTouched&&Ct(r.touchedFields,R),!n.shouldUnregister&&!N.keepDefaultValue&&Ct(s,R);h.values.next({values:{...o}}),h.state.next({...r,...N.keepDirty?{isDirty:U()}:{}}),!N.keepIsValid&&p()},Wt=(S,N={})=>{let R=J(i,S);const X=ma(N.disabled);return Fe(i,S,{...R||{},_f:{...R&&R._f?R._f:{ref:{name:S}},name:S,mount:!0,...N}}),l.mount.add(S),R?X&&Fe(o,S,N.disabled?void 0:J(o,S,Um(R._f))):C(S,!0,N.value),{...X?{disabled:N.disabled}:{},...n.progressive?{required:!!N.required,min:Rl(N.min),max:Rl(N.max),minLength:Rl(N.minLength),maxLength:Rl(N.maxLength),pattern:Rl(N.pattern)}:{},name:S,onChange:Y,onBlur:Y,ref:V=>{if(V){Wt(S,N),R=J(i,S);const M=ot(V.value)&&V.querySelectorAll&&V.querySelectorAll("input,select,textarea")[0]||V,te=qq(M),be=R._f.refs||[];if(te?be.find(Ne=>Ne===M):M===R._f.ref)return;Fe(i,S,{_f:{...R._f,...te?{refs:[...be.filter(Mm),M,...Array.isArray(J(s,S))?[{}]:[]],ref:{type:M.type,name:S}}:{ref:M}}}),C(S,!1,void 0,M)}else R=J(i,S,{}),R._f&&(R._f.mount=!1),(n.shouldUnregister||N.shouldUnregister)&&!(Pq(l.array,S)&&a.action)&&l.unMount.add(S)}}},kn=()=>n.shouldFocusError&&jv(i,S=>S&&J(r.errors,S),l.mount),Zn=(S,N)=>async R=>{R&&(R.preventDefault&&R.preventDefault(),R.persist&&R.persist());let X=di(o);if(h.state.next({isSubmitting:!0}),n.resolver){const{errors:V,values:M}=await W();r.errors=V,X=M}else await Q(i);Ct(r.errors,"root"),bn(r.errors)?(h.state.next({errors:{}}),await S(X,R)):(N&&await N({...r.errors},R),kn(),setTimeout(kn)),h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:bn(r.errors),submitCount:r.submitCount+1,errors:r.errors})},fs=(S,N={})=>{J(i,S)&&(ot(N.defaultValue)?P(S,J(s,S)):(P(S,N.defaultValue),Fe(s,S,N.defaultValue)),N.keepTouched||Ct(r.touchedFields,S),N.keepDirty||(Ct(r.dirtyFields,S),r.isDirty=N.defaultValue?U(S,J(s,S)):U()),N.keepError||(Ct(r.errors,S),d.isValid&&p()),h.state.next({...r}))},si=(S,N={})=>{const R=S||s,X=di(R),V=S&&!bn(S)?X:s;if(N.keepDefaultValues||(s=R),!N.keepValues){if(N.keepDirtyValues||f)for(const M of l.mount)J(r.dirtyFields,M)?Fe(V,M,J(o,M)):P(M,J(V,M));else{if(tE&&ot(S))for(const M of l.mount){const te=J(i,M);if(te&&te._f){const be=Array.isArray(te._f.refs)?te._f.refs[0]:te._f.ref;if(rf(be)){const Ne=be.closest("form");if(Ne){Ne.reset();break}}}}i={}}o=t.shouldUnregister?N.keepDefaultValues?di(s):{}:di(V),h.array.next({values:{...V}}),h.values.next({values:{...V}})}l={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!a.mount&&e(),a.mount=!d.isValid||!!N.keepIsValid,a.watch=!!t.shouldUnregister,h.state.next({submitCount:N.keepSubmitCount?r.submitCount:0,isDirty:N.keepDirty?r.isDirty:!!(N.keepDefaultValues&&!ki(S,s)),isSubmitted:N.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:N.keepDirtyValues?r.dirtyFields:N.keepDefaultValues&&S?Fm(s,S):{},touchedFields:N.keepTouched?r.touchedFields:{},errors:N.keepErrors?r.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},ps=(S,N)=>si(xi(S)?S(o):S,N);return{control:{register:Wt,unregister:ze,getFieldState:Ee,handleSubmit:Zn,setError:Be,_executeSchema:W,_getWatch:re,_getDirty:U,_updateValid:p,_removeUnmounted:q,_updateFieldArray:_,_getFieldArray:ue,_reset:si,_resetDefaultValues:()=>xi(n.defaultValues)&&n.defaultValues().then(S=>{ps(S,n.resetOptions),h.state.next({isLoading:!1})}),_updateFormState:S=>{r={...r,...S}},_subjects:h,_proxyFormState:d,get _fields(){return i},get _formValues(){return o},get _state(){return a},set _state(S){a=S},get _defaultValues(){return s},get _names(){return l},set _names(S){l=S},get _formState(){return r},set _formState(S){r=S},get _options(){return n},set _options(S){n={...n,...S}}},trigger:G,register:Wt,handleSubmit:Zn,watch:Ie,setValue:P,getValues:ce,reset:ps,resetField:fs,clearErrors:mt,unregister:ze,setError:Be,setFocus:(S,N={})=>{const R=J(i,S),X=R&&R._f;if(X){const V=X.refs?X.refs[0]:X.ref;V.focus&&(V.focus(),N.shouldSelect&&V.select())}},getFieldState:Ee}}function bp(t={}){const e=Oe.useRef(),[n,r]=Oe.useState({isDirty:!1,isValidating:!1,isLoading:xi(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},defaultValues:xi(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...Yq(t,()=>r(s=>({...s}))),formState:n});const i=e.current.control;return i._options=t,Fq({subject:i._subjects.state,next:s=>{Mq(s,i._proxyFormState,i._updateFormState,!0)&&r({...i._formState})}}),Oe.useEffect(()=>{t.values&&(!ki(t.values,i._defaultValues)||!ki(t.values,i._formValues))?i._reset(t.values,i._options.resetOptions):i._resetDefaultValues()},[t.values,i]),Oe.useEffect(()=>{i._state.mount||(i._updateValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),e.current.formState=$q(n,i),e.current}const jR=bf("h4");jR.displayName="DivStyledAsH4";const Xq=$t("alert-heading",{Component:jR}),Jq=$t("alert-link",{Component:V0}),BR=v.forwardRef((t,e)=>{const{bsPrefix:n,show:r=!0,closeLabel:i="Close alert",closeVariant:s,className:o,children:a,variant:l="primary",onClose:u,dismissible:c,transition:d=Fv,...h}=_p(t,{show:"onClose"}),f=ve(n,"alert"),m=tt(y=>{u&&u(!1,y)}),w=d===!0?Fv:d,I=E.jsxs("div",{role:"alert",...w?void 0:h,ref:e,className:le(o,f,l&&`${f}-${l}`,c&&`${f}-dismissible`),children:[c&&E.jsx(tR,{onClick:m,"aria-label":i,variant:s}),a]});return w?E.jsx(w,{unmountOnExit:!0,...h,ref:void 0,in:r,children:I}):r?I:null});BR.displayName="Alert";const Zq=Object.assign(BR,{Link:Jq,Heading:Xq});function eW(t,e){return v.Children.toArray(t).some(n=>v.isValidElement(n)&&n.type===e)}const tW={type:Br.string,tooltip:Br.bool,as:Br.elementType},sE=v.forwardRef(({as:t="div",className:e,type:n="valid",tooltip:r=!1,...i},s)=>E.jsx(t,{...i,ref:s,className:le(e,`${n}-${r?"tooltip":"feedback"}`)}));sE.displayName="Feedback";sE.propTypes=tW;const zR=sE,nW=v.createContext({}),Xr=nW,qR=v.forwardRef(({id:t,bsPrefix:e,className:n,type:r="checkbox",isValid:i=!1,isInvalid:s=!1,as:o="input",...a},l)=>{const{controlId:u}=v.useContext(Xr);return e=ve(e,"form-check-input"),E.jsx(o,{...a,ref:l,type:r,id:t||u,className:le(n,e,i&&"is-valid",s&&"is-invalid")})});qR.displayName="FormCheckInput";const WR=qR,HR=v.forwardRef(({bsPrefix:t,className:e,htmlFor:n,...r},i)=>{const{controlId:s}=v.useContext(Xr);return t=ve(t,"form-check-label"),E.jsx("label",{...r,ref:i,htmlFor:n||s,className:le(e,t)})});HR.displayName="FormCheckLabel";const Bv=HR,KR=v.forwardRef(({id:t,bsPrefix:e,bsSwitchPrefix:n,inline:r=!1,reverse:i=!1,disabled:s=!1,isValid:o=!1,isInvalid:a=!1,feedbackTooltip:l=!1,feedback:u,feedbackType:c,className:d,style:h,title:f="",type:m="checkbox",label:w,children:I,as:y="input",...p},g)=>{e=ve(e,"form-check"),n=ve(n,"form-switch");const{controlId:_}=v.useContext(Xr),T=v.useMemo(()=>({controlId:t||_}),[_,t]),C=!I&&w!=null&&w!==!1||eW(I,Bv),b=E.jsx(WR,{...p,type:m==="switch"?"checkbox":m,ref:g,isValid:o,isInvalid:a,disabled:s,as:y});return E.jsx(Xr.Provider,{value:T,children:E.jsx("div",{style:h,className:le(d,C&&e,r&&`${e}-inline`,i&&`${e}-reverse`,m==="switch"&&n),children:I||E.jsxs(E.Fragment,{children:[b,C&&E.jsx(Bv,{title:f,children:w}),u&&E.jsx(zR,{type:c,tooltip:l,children:u})]})})})});KR.displayName="FormCheck";const lf=Object.assign(KR,{Input:WR,Label:Bv}),GR=v.forwardRef(({bsPrefix:t,type:e,size:n,htmlSize:r,id:i,className:s,isValid:o=!1,isInvalid:a=!1,plaintext:l,readOnly:u,as:c="input",...d},h)=>{const{controlId:f}=v.useContext(Xr);t=ve(t,"form-control");let m;return l?m={[`${t}-plaintext`]:!0}:m={[t]:!0,[`${t}-${n}`]:n},E.jsx(c,{...d,type:e,size:r,ref:h,readOnly:u,id:i||f,className:le(s,m,o&&"is-valid",a&&"is-invalid",e==="color"&&`${t}-color`)})});GR.displayName="FormControl";const rW=Object.assign(GR,{Feedback:zR}),iW=$t("form-floating"),QR=v.forwardRef(({controlId:t,as:e="div",...n},r)=>{const i=v.useMemo(()=>({controlId:t}),[t]);return E.jsx(Xr.Provider,{value:i,children:E.jsx(e,{...n,ref:r})})});QR.displayName="FormGroup";const YR=QR,XR=v.forwardRef(({as:t="label",bsPrefix:e,column:n=!1,visuallyHidden:r=!1,className:i,htmlFor:s,...o},a)=>{const{controlId:l}=v.useContext(Xr);e=ve(e,"form-label");let u="col-form-label";typeof n=="string"&&(u=`${u} ${u}-${n}`);const c=le(i,e,r&&"visually-hidden",n&&u);return s=s||l,n?E.jsx(BC,{ref:a,as:"label",className:c,htmlFor:s,...o}):E.jsx(t,{ref:a,className:c,htmlFor:s,...o})});XR.displayName="FormLabel";const sW=XR,JR=v.forwardRef(({bsPrefix:t,className:e,id:n,...r},i)=>{const{controlId:s}=v.useContext(Xr);return t=ve(t,"form-range"),E.jsx("input",{...r,type:"range",ref:i,className:le(e,t),id:n||s})});JR.displayName="FormRange";const oW=JR,ZR=v.forwardRef(({bsPrefix:t,size:e,htmlSize:n,className:r,isValid:i=!1,isInvalid:s=!1,id:o,...a},l)=>{const{controlId:u}=v.useContext(Xr);return t=ve(t,"form-select"),E.jsx("select",{...a,size:n,ref:l,className:le(r,t,e&&`${t}-${e}`,i&&"is-valid",s&&"is-invalid"),id:o||u})});ZR.displayName="FormSelect";const aW=ZR,eD=v.forwardRef(({bsPrefix:t,className:e,as:n="small",muted:r,...i},s)=>(t=ve(t,"form-text"),E.jsx(n,{...i,ref:s,className:le(e,t,r&&"text-muted")})));eD.displayName="FormText";const lW=eD,tD=v.forwardRef((t,e)=>E.jsx(lf,{...t,ref:e,type:"switch"}));tD.displayName="Switch";const uW=Object.assign(tD,{Input:lf.Input,Label:lf.Label}),nD=v.forwardRef(({bsPrefix:t,className:e,children:n,controlId:r,label:i,...s},o)=>(t=ve(t,"form-floating"),E.jsxs(YR,{ref:o,className:le(e,t),controlId:r,...s,children:[n,E.jsx("label",{htmlFor:r,children:i})]})));nD.displayName="FloatingLabel";const cW=nD,dW={_ref:Br.any,validated:Br.bool,as:Br.elementType},oE=v.forwardRef(({className:t,validated:e,as:n="form",...r},i)=>E.jsx(n,{...r,ref:i,className:le(t,e&&"was-validated")}));oE.displayName="Form";oE.propTypes=dW;const Ce=Object.assign(oE,{Group:YR,Control:rW,Floating:iW,Check:lf,Switch:uW,Label:sW,Text:lW,Range:oW,Select:aW,FloatingLabel:cW}),rD=v.forwardRef(({bsPrefix:t,fluid:e=!1,as:n="div",className:r,...i},s)=>{const o=ve(t,"container"),a=typeof e=="string"?`-${e}`:"-fluid";return E.jsx(n,{ref:s,...i,className:le(r,e?`${o}${a}`:o)})});rD.displayName="Container";const hW=rD,iD=v.forwardRef(({bsPrefix:t,variant:e,animation:n="border",size:r,as:i="div",className:s,...o},a)=>{t=ve(t,"spinner");const l=`${t}-${n}`;return E.jsx(i,{ref:a,...o,className:le(s,l,r&&`${l}-${r}`,e&&`text-${e}`)})});iD.displayName="Spinner";const fW=iD;async function pW(t){const e=await qt.auth().createUserWithEmailAndPassword(t.email,t.password);if(e.user.uid)return await qt.firestore().collection("usuarios").add({name:t.nombre,lastname:t.apellido,userId:e.user.uid})}async function mW(t){const e=await qt.auth().signInWithEmailAndPassword(t.email,t.password);return e.user.uid?(await qt.firestore().collection("usuarios").where("userId","==",e.user.uid).get()).docs[0].data():{}}const gW={"auth/email-already-in-use":"El email ya se encuentra registrado","auth/weak-password":"La contraseña debe tener al menos 6 caracteres"},vW={"auth/user-not-found":"El email no existe","auth/wrong-password":"La contraseña es incorrecta"};function sD({variant:t,text:e,duration:n,link:r}){const i=kC();return n!==0&&r&&setTimeout(()=>{i(r)},n),E.jsx(E.Fragment,{children:E.jsx(Zq,{variant:t,children:e})})}function oD({variant:t="primary",type:e="submit",loading:n,children:r}){return E.jsxs(Qs,{type:e,variant:t,disabled:n,children:[n&&E.jsx(fW,{animation:"border",size:"sm"}),r]})}function ea({label:t,type:e="text",name:n,register:r,placeholder:i,errors:s,children:o}){var a;return E.jsxs(Ce.Group,{className:"mb-3",controlId:n,children:[E.jsx(Ce.Label,{children:t}),E.jsx(Ce.Control,{className:"input",type:e,placeholder:i,...r}),s&&((a=s[n])==null?void 0:a.type)==="required"&&E.jsx(Ce.Text,{className:"text-muted",children:"El campo es obligatorio"}),o&&o]})}function yW(){var l,u;const{register:t,handleSubmit:e,formState:{errors:n}}=bp({mode:"onChange"}),[r,i]=v.useState({variant:"",text:"",duration:0,link:""}),[s,o]=v.useState(!1),a=async c=>{o(!0);try{console.log(c),await pW(c),i({variant:"success",text:"Usuario creado correctamente",duration:3e3,link:"/ingresar"}),o(!1)}catch(d){console.log(d),i({variant:"danger",text:gW[d.code]||"Ha ocurrido un error",duration:0}),o(!1)}};return E.jsxs("div",{children:[E.jsxs(Ce,{onSubmit:e(a),children:[E.jsx(ea,{type:"text",label:"Nombre",placeholder:"Ingrese su nombre",register:{...t("nombre",{required:!0})},errors:n,name:"nombre"}),E.jsx(ea,{type:"text",label:"Apellido",placeholder:"Ingrese su apellido",register:{...t("apellido")},errors:n,name:"apellido"}),E.jsx(ea,{type:"email",label:"Email",placeholder:"Ingrese su email",register:{...t("email",{required:!0})},errors:n,name:"email"}),E.jsx(ea,{type:"password",label:"Contraseña",placeholder:"Ingrese su password",register:{...t("password",{required:!0,minLength:6,maxLength:12})},errors:n,name:"password",children:E.jsxs(Ce.Text,{className:"text-muted",children:[((l=n==null?void 0:n.password)==null?void 0:l.type)==="minLength"&&E.jsx("div",{children:"Debe introducir al menos 6 caracteres"}),((u=n==null?void 0:n.password)==null?void 0:u.type)==="maxLength"&&E.jsx("div",{children:"Debe introducir como maximo 12 caracteres"})]})}),E.jsx(oD,{type:"submit",variant:"primary",loading:s,children:"Registrarme"})]}),E.jsx(sD,{...r})]})}function wW(){const{id:t}=bC(),[e,n]=v.useState({}),[r,i]=v.useState(!0);return console.log("🚀 ~ file: Detalle.jsx:6 ~ Detalle ~ params:",t),v.useEffect(()=>{(async()=>{try{const o=await xA(t);n(o.data()),i(!1)}catch(o){console.log(o)}})()},[t]),r?E.jsx("div",{className:"",children:"Cargando ..."}):E.jsxs("div",{className:"",children:[E.jsx("h1",{children:e.title}),E.jsx("p",{children:e.price})]})}function EW(){return E.jsx("div",{className:"",children:"NotFound"})}function IW(){var u,c;const{register:t,handleSubmit:e,formState:{errors:n}}=bp({mode:"onChange"}),[r,i]=v.useState({variant:"",text:"",duration:0,link:""}),[s,o]=v.useState(!1),a=zy(),l=async d=>{o(!0);try{console.log(d);const h=await mW(d);console.log("🚀 ~ file: Registro.jsx:18 ~ onSubmit ~ response:",h),i({variant:"success",text:`Bienvenido/a ${h.name}`,duration:3e3,link:"/"}),setTimeout(()=>{a.handleLogin(h)},4e3),o(!1)}catch(h){console.log(h),i({variant:"danger",text:vW[h.code]||"Ha ocurrido un error",duration:0}),o(!1)}};return E.jsxs("div",{children:[E.jsxs(Ce,{onSubmit:e(l),children:[E.jsx(ea,{type:"email",label:"Email",placeholder:"Ingrese su email",register:{...t("email",{required:!0})},errors:n,name:"email"}),E.jsx(ea,{type:"password",label:"Contraseña",placeholder:"Ingrese su password",register:{...t("password",{required:!0,minLength:6,maxLength:12})},errors:n,name:"password",children:E.jsxs(Ce.Text,{className:"text-muted",children:[((u=n==null?void 0:n.password)==null?void 0:u.type)==="minLength"&&E.jsx("div",{children:"Debe introducir al menos 6 caracteres"}),((c=n==null?void 0:n.password)==null?void 0:c.type)==="maxLength"&&E.jsx("div",{children:"Debe introducir como maximo 12 caracteres"})]})}),E.jsx(oD,{type:"submit",variant:"primary",loading:s,children:"Ingresar"})]}),E.jsx(sD,{...r})]})}function _W(){const{register:t,handleSubmit:e}=bp({mode:"onChange"}),n=async r=>{try{const i=await Y3(r);console.log("🚀 ~ file: productosAlta.jsx:19 ~ onSubmit ~ document:",i)}catch(i){console.log(i)}};return E.jsx("div",{children:E.jsxs(Ce,{onSubmit:e(n),children:[E.jsxs(Ce.Group,{className:"mb-3",controlId:"formBasicNombre",children:[E.jsx(Ce.Label,{children:"Nombre"}),E.jsx(Ce.Control,{type:"text",placeholder:"Ingrese su nombre",...t("title")})]}),E.jsxs(Ce.Group,{className:"mb-3",controlId:"formBasicNombre",children:[E.jsx(Ce.Label,{children:"Precio"}),E.jsx(Ce.Control,{type:"number",placeholder:"Ingrese su precio",...t("price")})]}),E.jsxs(Ce.Group,{className:"mb-3",controlId:"formBasicNombre",children:[E.jsx(Ce.Label,{children:"Imagen"}),E.jsx(Ce.Control,{type:"text",placeholder:"Ingrese su imagen",...t("thumbnail")})]}),E.jsx(Qs,{variant:"primary",type:"submit",children:"Guardar"})]})})}function SW(){const{register:t,handleSubmit:e,setValue:n}=bp({mode:"onChange"}),{id:r}=bC();v.useEffect(()=>{(async()=>{try{const a=await xA(r);n("title",a.data().title),n("price",a.data().price),n("thumbnail",a.data().thumbnail)}catch(a){console.log(a)}})()},[r]);const i=async o=>{try{const a=await X3(r,o);console.log("🚀 ~ file: productosAlta.jsx:19 ~ onSubmit ~ document:",a)}catch(a){console.log(a)}},s=async()=>{try{const o=await J3(r);console.log("🚀 ~ file: productosAlta.jsx:19 ~ onSubmit ~ document:",o)}catch(o){console.log(o)}};return E.jsx("div",{children:E.jsxs(Ce,{onSubmit:e(i),children:[E.jsx(Qs,{onClick:s,children:"Eliminar"}),E.jsxs(Ce.Group,{className:"mb-3",controlId:"formBasicNombre",children:[E.jsx(Ce.Label,{children:"Nombre"}),E.jsx(Ce.Control,{type:"text",placeholder:"Ingrese su nombre",...t("title")})]}),E.jsxs(Ce.Group,{className:"mb-3",controlId:"formBasicNombre",children:[E.jsx(Ce.Label,{children:"Precio"}),E.jsx(Ce.Control,{type:"number",placeholder:"Ingrese su precio",...t("price")})]}),E.jsxs(Ce.Group,{className:"mb-3",controlId:"formBasicNombre",children:[E.jsx(Ce.Label,{children:"Imagen"}),E.jsx(Ce.Control,{type:"text",placeholder:"Ingrese su imagen",...t("thumbnail")})]}),E.jsx(Qs,{variant:"primary",type:"submit",children:"Guardar"})]})})}function TW(){return E.jsx(E.Fragment,{children:E.jsx(kL,{children:E.jsx(JL,{children:E.jsx(By.Consumer,{children:({login:t})=>E.jsxs(E.Fragment,{children:[E.jsx(Rq,{}),E.jsx(hW,{children:E.jsxs(_L,{children:[E.jsx(kr,{path:"/",element:E.jsx(r9,{})}),t&&E.jsxs(E.Fragment,{children:[E.jsx(kr,{path:"/contador",element:E.jsx(PP,{})}),E.jsx(kr,{path:"/productos/alta",element:E.jsx(_W,{})}),E.jsx(kr,{path:"/productos/modificar/:id",element:E.jsx(SW,{})})]}),!t&&E.jsxs(E.Fragment,{children:[E.jsx(kr,{path:"/alta",element:E.jsx(yW,{})}),E.jsx(kr,{path:"/ingresar",element:E.jsx(IW,{})})]}),E.jsx(kr,{path:"/producto/:id",element:E.jsx(wW,{})}),E.jsx(kr,{path:"*",element:E.jsx(EW,{})})]})})]})})})})})}Vm.createRoot(document.getElementById("root")).render(E.jsx(Oe.StrictMode,{children:E.jsx(TW,{})}));
